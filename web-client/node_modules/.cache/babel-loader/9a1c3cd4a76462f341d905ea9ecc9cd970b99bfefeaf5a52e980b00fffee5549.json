{"ast":null,"code":"import _objectSpread from\"C:/Floki/web-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo}from'react';// Sign In Modal\nfunction SignInModal(_ref){let{open,onClose,onSignIn}=_ref;const[email,setEmail]=useState('');const[pin,setPin]=useState('');if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#0007',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,boxShadow:'0 8px 32px #0003',padding:'2.5rem 2rem',minWidth:340,maxWidth:400,width:'100%',display:'flex',flexDirection:'column',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',top:18,right:18,background:'none',border:'none',fontSize:24,color:'#888',cursor:'pointer'},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();onSignIn(email,pin);},style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:_objectSpread({},inputStyle)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"PIN (4-6 digits)\",value:pin,onChange:e=>setPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:_objectSpread({},inputStyle),minLength:4,maxLength:6}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'100%',background:'#1a2236',color:'#fff',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8,boxShadow:'0 2px 8px #1a223633'},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{width:'100%',background:'#f7f7fa',color:'#222',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer'},children:\"Cancel\"})]})});}function isValidCard(card){// Card number: 16 digits, expiry: MM/YY, CVC: 3 or 4 digits\nconst numValid=/^\\d{16}$/.test(card.number);const nameValid=card.name.trim().length>0;const expValid=/^(0[1-9]|1[0-2])\\/(\\d{2})$/.test(card.expiry);const cvcValid=/^\\d{3,4}$/.test(card.cvv);return numValid&&nameValid&&expValid&&cvcValid;}// Sign Out Modal\nfunction SignOutModal(_ref2){let{open,onClose,onSignOut}=_ref2;if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#0007',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,boxShadow:'0 8px 32px #0003',padding:'2.5rem 2rem',minWidth:340,maxWidth:400,width:'100%',display:'flex',flexDirection:'column',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',top:18,right:18,background:'none',border:'none',fontSize:24,color:'#888',cursor:'pointer'},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Sign Out\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',fontSize:17,marginBottom:24,textAlign:'center'},children:\"Are you sure you want to sign out?\"}),/*#__PURE__*/_jsx(\"button\",{style:{width:'100%',background:'#e74c3c',color:'#fff',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8,boxShadow:'0 2px 8px #e74c3c33'},onClick:onSignOut,children:\"Sign Out\"}),/*#__PURE__*/_jsx(\"button\",{style:{width:'100%',background:'#f7f7fa',color:'#222',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8},onClick:onClose,children:\"Cancel\"})]})});}// Remove the old logout button and add a floating one at the bottom right\nfunction handleLogout(){setUser(null);setShowSignOut(false);}import Track from'./Track';// Placeholder MENU and OFFERS removed; data is loaded from backend\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const inputStyle={display:'block',margin:'8px 0',padding:'8px',borderRadius:6,border:'1px solid #ccc',width:'100%',fontSize:16};function MenuPage(_ref3){let{menu,handleOrder,selectedCategory,setSelectedCategory}=_ref3;const categories=['breakfast','brunch','lunch','dinner','supper','specials'];const[openIngredients,setOpenIngredients]=useState({});const[specialsType,setSpecialsType]=useState('all');const[selectingQty,setSelectingQty]=useState(null);// food.id\nconst[qty,setQty]=useState(1);const[query,setQuery]=useState('');React.useEffect(()=>{function resetQty(){setSelectingQty(null);setQty(1);}window.addEventListener('resetSelectingQty',resetQty);return()=>window.removeEventListener('resetSelectingQty',resetQty);},[]);function toggleIngredients(id){setOpenIngredients(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:!prev[id]}));}let foods=menu||[];// For specials, apply an optional sub-filter using simple heuristics\nif(selectedCategory==='specials'){foods=(menu||[]).filter(f=>{if(specialsType==='all')return true;const text=\"\".concat(f.name||'',\" \").concat(f.desc||'').toLowerCase();if(specialsType==='chef')return text.includes('chef');if(specialsType==='day')return text.includes('day');if(specialsType==='vegan')return text.includes('vegan');if(specialsType==='vegetarian')return text.includes('vegetarian')||text.includes('vegeterian');return true;});}const filteredFoods=(foods||[]).filter(f=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[f.name,f.desc].concat(Array.isArray(f.ingredients)?f.ingredients:[]);return fields.filter(Boolean).some(x=>String(x).toLowerCase().includes(q));});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236'},children:\"Menu\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,alignItems:'center',marginBottom:12},children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Search dishes\\u2026\",value:query,onChange:e=>setQuery(e.target.value),style:{padding:'8px 12px',borderRadius:8,border:'1px solid #e1e4ee',minWidth:240}})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24,display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'},children:categories.map(cat=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCategory(cat),style:{background:selectedCategory===cat?'#ffb300':'#f7f7fa',color:selectedCategory===cat?'#222':'#555',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer',fontSize:16,transition:'background 0.2s',minWidth:120},children:cat.charAt(0).toUpperCase()+cat.slice(1)},cat))}),selectedCategory==='specials'&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24,display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'},children:['all','chef','day','vegan','vegetarian'].map(type=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpecialsType(type),style:{background:specialsType===type?'#ffb300':'#f7f7fa',color:specialsType===type?'#222':'#555',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer',fontSize:16,transition:'background 0.2s',minWidth:120},children:type==='all'?'All':type==='chef'?\"Chef's Special\":type==='day'?\"Day's Special\":type.charAt(0).toUpperCase()+type.slice(1)},type))}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:32,width:'100%'},children:filteredFoods.map(food=>/*#__PURE__*/_jsxs(\"li\",{style:{background:'#f7f7fa',borderRadius:12,padding:20,boxShadow:'0 1px 8px #0001',display:'flex',alignItems:'center',minHeight:120,flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"img\",{src:food.img,alt:food.name,style:{width:90,height:90,objectFit:'cover',borderRadius:10,marginRight:20}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20},children:food.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:6},children:food.desc}),food.offerActive&&food.offerPercent>0?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ff5252',fontSize:17},children:[\"Ksh \",Math.round(food.price*(1-food.offerPercent/100))]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",food.offerPercent,\"%\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ffb300',fontSize:17},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'6px 0'},children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f39c12',fontWeight:600},children:[\"Rating: \",food.rating,\" \\u2605\"]})}),selectingQty===food.id?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginTop:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQty(qty>1?qty-1:1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:18},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{style:{margin:'0 12px',fontWeight:700,fontSize:18},children:qty}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQty(qty+1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:18},children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOrder(_objectSpread(_objectSpread({},food),{},{quantity:qty})),style:{marginLeft:18,background:'#1a2236',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Order\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectingQty(food.id);setQty(1);},style:{marginTop:8,background:'#1a2236',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Order\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleIngredients(food.id),style:{marginTop:8,background:openIngredients[food.id]?'#ffb300':'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer'},children:\"See Ingredients\"})]})]}),openIngredients[food.id]&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:'#1a2236',marginBottom:6},children:\"Ingredients:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{paddingLeft:18,margin:0},children:food.ingredients.map((ing,idx)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'#555',fontSize:15},children:ing},idx))})]})]},food.id))}),filteredFoods.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',color:'#6a708a',marginTop:12},children:\"No items match your search.\"})]});}function OffersPage(_ref4){let{items}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236'},children:\"Offers\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:24},children:items.map(food=>/*#__PURE__*/_jsx(\"li\",{style:{background:'#f7f7fa',borderRadius:12,padding:16,boxShadow:'0 1px 8px #0001'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[food.img&&/*#__PURE__*/_jsx(\"img\",{src:food.img,alt:food.name,style:{width:90,height:90,objectFit:'cover',borderRadius:10,marginRight:20}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:18},children:food.name}),food.desc&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:6},children:food.desc}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ff5252',fontSize:17},children:[\"Ksh \",Math.round(food.price*(1-food.offerPercent/100))]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",food.offerPercent,\"%\"]})]})]})]})},food.id))}),items.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6a708a'},children:\"No active offers.\"})]});}// Dedicated Sign In Page (gate to the app)\nfunction SignInPage(_ref5){let{onSignIn,onSignUp,onResetPin}=_ref5;const[mode,setMode]=useState('signin');// 'signin' | 'signup' | 'reset'\nconst[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[dob,setDob]=useState('');const[sex,setSex]=useState('');const[phone,setPhone]=useState('');const[email,setEmail]=useState('');const[pin,setPin]=useState('');const[confirmPin,setConfirmPin]=useState('');const[awaitingCode,setAwaitingCode]=useState(false);const[code,setCode]=useState('');const[showPin,setShowPin]=useState(false);const isValidEmail=e=>/^\\S+@\\S+\\.\\S+$/.test(e);const isValidPin=p=>/^\\d{4,6}$/.test(p);const isValidPhone=p=>/^(07\\d{8}|011\\d{7})$/.test(p);const isValidDob=d=>{const y=new Date(d).getFullYear();const cy=new Date().getFullYear();return Number.isFinite(y)&&y>=1900&&y<=cy;};function submit(e){e.preventDefault();if(mode==='signin'){if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!isValidPin(pin)){alert('Enter a 4-6 digit PIN.');return;}onSignIn(email,pin);}else if(mode==='signup'&&!awaitingCode){if(!firstName.trim()){alert('Please enter your first name.');return;}if(!lastName.trim()){alert('Please enter your last name.');return;}if(!isValidDob(dob)){alert('Please select a valid date of birth.');return;}if(!sex){alert('Please select your sex.');return;}if(!isValidPhone(phone)){alert('Enter phone as 07XXXXXXXX or 011XXXXXXX.');return;}if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!isValidPin(pin)){alert('Enter a 4-6 digit PIN.');return;}if(pin!==confirmPin){alert('PINs do not match.');return;}const yob=new Date(dob).getFullYear();// Init registration, send confirmation code\nfetch('/api/auth/register-init',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName:firstName.trim(),lastName:lastName.trim(),yob,sex,phone,email,pin})}).then(async res=>{var _data;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused){}throw new Error(((_data=data)===null||_data===void 0?void 0:_data.error)||'Failed to send confirmation code');}).then(()=>{setAwaitingCode(true);}).catch(err=>alert(err.message));}else if(mode==='signup'&&awaitingCode){if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!code||code.length!==6){alert('Enter the 6-digit confirmation code.');return;}fetch('/api/auth/register-verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,code})}).then(async res=>{var _data2;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused2){}throw new Error(((_data2=data)===null||_data2===void 0?void 0:_data2.error)||'Failed to verify code');}).then(()=>{const yob=new Date(dob).getFullYear();onSignUp({firstName:firstName.trim(),lastName:lastName.trim(),yob,sex,phone,email,pin});}).catch(err=>alert(err.message));}else{if(!isValidEmail(email)){alert('Please enter a valid email.');return;}onResetPin(email);}}const cardStyle={background:'#fff',borderRadius:16,boxShadow:'0 12px 30px rgba(0,0,0,0.10)',border:'1px solid #e6e8eb',padding:'2rem 1.75rem',width:'92vw',maxWidth:520,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif'};const titleStyle={fontSize:26,fontWeight:700,color:'#0f172a',margin:'0 0 16px 0',letterSpacing:0.2};const fieldStyle={width:'100%',border:'1px solid #ddd',borderRadius:10,padding:'12px 14px',fontSize:16,outline:'none',margin:'10px 0',background:'#f7f7fa',boxSizing:'border-box',display:'block',maxWidth:'100%'};const primaryBtn={width:'100%',background:'#ffb300',color:'#222',border:'none',borderRadius:12,padding:'12px 16px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #1a223633',marginTop:12};const linkStyle={color:'#ffb300',background:'transparent',border:'none',padding:0,margin:0,cursor:'pointer',fontSize:14,textDecoration:'underline'};const pinWrapStyle={position:'relative',width:'100%',overflow:'hidden'};const pinToggleStyle={position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'transparent',border:'none',color:'#ffb300',cursor:'pointer',padding:0,display:'flex',alignItems:'center',justifyContent:'center',width:24,height:24,lineHeight:0};const pinFieldStyle=_objectSpread(_objectSpread({},fieldStyle),{},{paddingRight:'48px'});return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',width:'100vw',display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',gap:16,background:'#f7f7fa',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a2236',fontWeight:800,fontSize:30,letterSpacing:0.5,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif',textAlign:'center'},children:\"Floki's\"}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"div\",{style:titleStyle,children:mode==='signin'?'Login':mode==='signup'?'Register':'Reset PIN'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[mode==='signup'&&!awaitingCode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First Name\",value:firstName,onChange:e=>setFirstName(e.target.value),style:fieldStyle,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last Name\",value:lastName,onChange:e=>setLastName(e.target.value),style:fieldStyle,required:true})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Date of Birth\",value:dob,onChange:e=>setDob(e.target.value),style:fieldStyle,required:true,max:new Date().toISOString().slice(0,10)}),/*#__PURE__*/_jsxs(\"select\",{value:sex,onChange:e=>setSex(e.target.value),style:fieldStyle,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sex\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",inputMode:\"tel\",placeholder:\"Tel (07XXXXXXXX or 011XXXXXXX)\",value:phone,onChange:e=>setPhone(e.target.value.replace(/[^0-9]/g,'').slice(0,10)),style:fieldStyle,required:true,maxLength:10})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:fieldStyle,required:true}),mode!=='reset'&&/*#__PURE__*/_jsxs(\"div\",{style:pinWrapStyle,children:[/*#__PURE__*/_jsx(\"input\",{type:showPin?'text':'password',inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:mode==='signin'?'PIN':'Choose PIN',value:pin,onChange:e=>setPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:pinFieldStyle,autoComplete:\"one-time-code\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"Toggle PIN visibility\",onClick:()=>setShowPin(s=>!s),style:pinToggleStyle,children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:showPin?/*#__PURE__*/_jsx(\"path\",{d:\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\",stroke:\"#ffb300\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}):/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\",fill:\"#ffb300\"})})})]}),mode==='signup'&&!awaitingCode&&/*#__PURE__*/_jsxs(\"div\",{style:pinWrapStyle,children:[/*#__PURE__*/_jsx(\"input\",{type:showPin?'text':'password',inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:\"Confirm PIN\",value:confirmPin,onChange:e=>setConfirmPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:pinFieldStyle,autoComplete:\"one-time-code\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"Toggle PIN visibility\",onClick:()=>setShowPin(s=>!s),style:pinToggleStyle,children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:showPin?/*#__PURE__*/_jsx(\"path\",{d:\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\",stroke:\"#ffb300\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}):/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\",fill:\"#ffb300\"})})})]}),mode==='signup'&&awaitingCode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:pinWrapStyle,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:\"Enter Confirmation Code\",value:code,onChange:e=>setCode(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),style:fieldStyle,required:true,maxLength:6})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:14},children:\"A confirmation code was sent to your email.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:linkStyle,onClick:()=>{const yobVal=new Date(dob).getFullYear();fetch('/api/auth/register-init',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName:firstName.trim(),lastName:lastName.trim(),yob:yobVal,sex,phone,email,pin})}).then(async res=>{var _data3;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused3){}throw new Error(((_data3=data)===null||_data3===void 0?void 0:_data3.error)||'Failed to resend code');}).then(()=>alert('Code resent')).catch(err=>alert(err.message));},children:\"Resend Code\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:primaryBtn,children:mode==='signin'?'Log In':mode==='signup'?awaitingCode?'Verify Code':'Send Code':'Send Reset Link'})]}),mode==='signup'&&awaitingCode&&null,/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[mode==='signin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signup'),style:linkStyle,children:\"Register\"})]}),mode==='signup'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Already have an account?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signin'),style:linkStyle,children:\"Sign In\"})]}),mode==='reset'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Remember your PIN?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signin'),style:linkStyle,children:\"Sign In\"})]})]}),mode==='signin'&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,textAlign:'right'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('reset'),style:linkStyle,children:\"Forgot PIN?\"})})]})]});}function App(){// Auth modal states\nconst[showSignIn,setShowSignIn]=useState(false);// no longer auto-opened; kept for future use if needed\nconst[showSignOut,setShowSignOut]=useState(false);const[user,setUser]=useState(null);// Persist user session across refreshes\nReact.useEffect(()=>{try{const raw=typeof localStorage!=='undefined'?localStorage.getItem('clientUser'):null;if(raw){const saved=JSON.parse(raw);if(saved&&saved.email){setUser(saved);setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:saved.name||prev.name,email:saved.email,phone:saved.phone||prev.phone}));}}}catch(_unused4){}},[]);function handleSignIn(email,pin){if(!email||!/^\\S+@\\S+\\.\\S+$/.test(email)){alert('Please enter a valid email.');return;}if(!pin||!/^\\d{4,6}$/.test(pin)){alert('Please enter a 4-6 digit PIN.');return;}fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,pin})}).then(res=>res.ok?res.json():res.json().then(d=>Promise.reject(new Error(d.error||'Login failed')))).then(data=>{var _data$user,_data$user2,_data$user3;// Persist name and phone from backend when available\nconst nextUser={email:((_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.email)||email,name:((_data$user2=data.user)===null||_data$user2===void 0?void 0:_data$user2.name)||undefined,phone:((_data$user3=data.user)===null||_data$user3===void 0?void 0:_data$user3.phone)||undefined};setUser(nextUser);try{if(typeof localStorage!=='undefined')localStorage.setItem('clientUser',JSON.stringify(nextUser));}catch(_unused5){}// Keep profile in sync for downstream usage\nsetProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:nextUser.name||prev.name,email:nextUser.email,phone:nextUser.phone||prev.phone}));setShowSignIn(false);}).catch(err=>alert(err.message));}function handleSignUp(_ref6){let{firstName,lastName,yob,sex,phone,email,pin}=_ref6;if(!email||!pin||pin.length<4||pin.length>6){alert('Please enter a valid email and 4-6 digit PIN.');return;}const nowYear=new Date().getFullYear();const age=String(nowYear-Number(yob));let formattedPhone=phone;if(/^(07\\d{8}|011\\d{7})$/.test(phone)){formattedPhone='+254'+phone.slice(1);}// Finalize locally: profile prefill and sign-in (backend persistence already done on verify)\nconst fullName=\"\".concat(firstName,\" \").concat(lastName).trim();setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:fullName,age,sex,phone:formattedPhone,email}));// Reflect name in the signed-in state immediately and persist\nconst nextUser={email,name:fullName,phone:formattedPhone};setUser(nextUser);try{if(typeof localStorage!=='undefined')localStorage.setItem('clientUser',JSON.stringify(nextUser));}catch(_unused6){}}function handleResetPin(email){if(!/^\\S+@\\S+\\.\\S+$/.test(email)){alert('Please enter a valid email.');return;}fetch('/api/auth/reset-pin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})}).then(res=>res.ok?res.json():Promise.reject(new Error('Failed to send reset email'))).then(()=>alert('Reset instructions have been sent to '+email)).catch(err=>alert(err.message));}function handleSignOut(){setUser(null);setShowSignOut(false);try{if(typeof localStorage!=='undefined')localStorage.removeItem('clientUser');}catch(_unused7){}// Prompt sign-in again after signing out\nsetShowSignIn(true);}const[trackOrders,setTrackOrders]=useState([]);function handleCheckoutComplete(orderItems,deliveryType,grandTotal,orderId){const paymentMethod=order.payment||'Cash';setTrackOrders(prev=>[...prev,{id:orderId,items:orderItems,deliveryType,total:grandTotal,date:new Date(),status:'Pending',paymentMethod,canCancel:true}]);setCart([]);setPage('track');// Set timeout to disable cancel after 1 minute\nsetTimeout(()=>{setTrackOrders(prev=>prev.map((order,idx)=>{if(idx===prev.length-1){return _objectSpread(_objectSpread({},order),{},{canCancel:false});}return order;}));},60000);}const[showCheckout,setShowCheckout]=useState(false);const[emailConfirmed,setEmailConfirmed]=useState(false);const[emailConfirmationMsg,setEmailConfirmationMsg]=useState('');const validateEmail=email=>/^\\S+@\\S+\\.\\S+$/.test(email);const[lastSavedEmail,setLastSavedEmail]=useState('');React.useEffect(()=>{setLastSavedEmail(profile.email);},[]);// Remove auto-open modal sign-in; gating is handled via SignInPage\nconst[profileWarning,setProfileWarning]=useState('');const[profileMapOpen,setProfileMapOpen]=useState(false);const[profileEditing,setProfileEditing]=useState(true);// Placeholder: Replace with actual user account info from auth/profile\nconst[profile,setProfile]=useState({name:'',age:'',sex:'',phone:'',email:'',allergies:'',address:''});const[page,setPage]=useState('menu');const[orderFood,setOrderFood]=useState(null);const[orderPlaced,setOrderPlaced]=useState(false);const[tracking,setTracking]=useState(false);const[order,setOrder]=useState({name:profile.name,phone:profile.phone,address:profile.address,payment:'Cash',location:{lat:null,lng:null}});const[selectedCategory,setSelectedCategory]=useState('breakfast');const[showMap,setShowMap]=useState(false);const[instructions,setInstructions]=useState({utensils:[],condiments:[],notes:''});const[cart,setCart]=useState([]);const[cartNotification,setCartNotification]=useState('');// System notification helper\nfunction notify(title,body){try{if(typeof window==='undefined'||!('Notification'in window))return;if(Notification.permission==='granted'){new Notification(title,{body});}}catch(_unused8){}}React.useEffect(()=>{try{if(typeof window!=='undefined'&&'Notification'in window&&Notification.permission==='default'){Notification.requestPermission().catch(()=>{});}}catch(_unused9){}},[]);function handleOrder(food){if(!user){// Gate prevents reaching here if not signed-in\nreturn;}setOrderFood(food);setPage('instructions');}function handleInstructionsSubmit(instr){// Immediately add item to cart and return to menu\nconst utensilPrices={Spoon:20,Plate:50,Cup:20};const utensilCost=instr.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const qty=instr.qty||1;const unitPrice=orderFood.offerActive&&orderFood.offerPercent>0?Math.round(orderFood.price*(1-orderFood.offerPercent/100)):orderFood.price;const total=qty*unitPrice+utensilCost;setCart([...cart,{id:orderFood.id,name:orderFood.name,qty,price:unitPrice,offerActive:!!orderFood.offerActive,offerPercent:Number(orderFood.offerPercent||0),utensils:instr.utensils,condiments:instr.condiments,notes:instr.notes,deliveryNotes:instr.deliveryNotes,utensilCost,total,img:orderFood.img}]);// Compose notification listing what was added\nlet notif=\"\".concat(qty,\" x \").concat(orderFood.name);if(instr.utensils.length)notif+=\", Utensils: \".concat(instr.utensils.join(', '));if(instr.condiments.length)notif+=\", Condiments: \".concat(instr.condiments.join(', '));if(instr.notes)notif+=\", Notes: \".concat(instr.notes);if(instr.deliveryNotes)notif+=\", Delivery: \".concat(instr.deliveryNotes);notify('Added to cart',notif);setCartNotification(\"\".concat(notif,\" added to cart.\"));setTimeout(()=>setCartNotification(''),2200);setPage('menu');setOrderFood(null);setInstructions({utensils:[],condiments:[],notes:''});// Reset MenuPage selectingQty state if needed\nif(typeof window!=='undefined'){setTimeout(()=>{const evt=new CustomEvent('resetSelectingQty');window.dispatchEvent(evt);},250);}}function handleOrderSubmit(e){e.preventDefault();// Add item to cart and skip name/location module\nconst utensilPrices={Spoon:20,Plate:50,Cup:20};const utensilCost=instructions.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const qty=orderFood.qty||instructions.qty||1;const unitPrice=orderFood.offerActive&&orderFood.offerPercent>0?Math.round(orderFood.price*(1-orderFood.offerPercent/100)):orderFood.price;const total=qty*unitPrice+utensilCost;setCart([...cart,{id:orderFood.id,name:orderFood.name,qty,price:unitPrice,offerActive:!!orderFood.offerActive,offerPercent:Number(orderFood.offerPercent||0),utensils:instructions.utensils,condiments:instructions.condiments,notes:instructions.notes,deliveryNotes:instructions.deliveryNotes,utensilCost,total,img:orderFood.img}]);// Compose notification listing what was added\nlet notif=\"\".concat(qty,\" x \").concat(orderFood.name);if(instructions.utensils.length)notif+=\", Utensils: \".concat(instructions.utensils.join(', '));if(instructions.condiments.length)notif+=\", Condiments: \".concat(instructions.condiments.join(', '));if(instructions.notes)notif+=\", Notes: \".concat(instructions.notes);if(instructions.deliveryNotes)notif+=\", Delivery: \".concat(instructions.deliveryNotes);setCartNotification(\"\".concat(notif,\" added to cart.\"));setTimeout(()=>setCartNotification(''),2200);setPage('menu');setOrderFood(null);setInstructions({utensils:[],condiments:[],notes:''});// Reset MenuPage selectingQty state if needed\nif(typeof window!=='undefined'){setTimeout(()=>{const evt=new CustomEvent('resetSelectingQty');window.dispatchEvent(evt);},250);}}function handleLocationChange(){// Placeholder: Replace with actual map/location picker logic\nsetShowMap(true);}function handleMapSelect(lat,lng){setOrder(_objectSpread(_objectSpread({},order),{},{location:{lat,lng},address:\"Lat: \".concat(lat,\", Lng: \").concat(lng)}));setShowMap(false);}// Viking art background image (unsplash, semi-transparent overlay)\nconst vikingBg='https://images.unsplash.com/photo-1506744038136-462fa3a6a7f0?auto=format&fit=crop&w=1200&q=80';const[orders,setOrders]=useState([]);function handleOrderComplete(){if(cart.length>0){setOrders(prevOrders=>[...prevOrders,{items:cart,date:new Date(),status:'Placed'}]);setCart([]);setPage('orders');}else{setPage('orders');}}// Fetch menu and offers from backend for client app\nconst[clientMenu,setClientMenu]=useState([]);const[clientOffers,setClientOffers]=useState([]);const[loadingMenu,setLoadingMenu]=useState(false);const[loadingOffers,setLoadingOffers]=useState(false);const[menuError,setMenuError]=useState('');const[offersError,setOffersError]=useState('');const[hotelConfig,setHotelConfig]=useState({utensils:[],condiments:[]});React.useEffect(()=>{setLoadingMenu(true);setMenuError('');fetch('/api/admin/menu').then(async res=>{if(res.ok)return res.json();let text;try{text=await res.text();}catch(_unused0){}throw new Error(text||'Failed to load menu');}).then(data=>setClientMenu(Array.isArray(data)?data:[])).catch(err=>setMenuError(err.message)).finally(()=>setLoadingMenu(false));},[]);React.useEffect(()=>{setLoadingOffers(true);setOffersError('');fetch('/api/hotel/offers').then(async res=>{if(res.ok)return res.json();let text;try{text=await res.text();}catch(_unused1){}throw new Error(text||'Failed to load offers');}).then(data=>setClientOffers(Array.isArray(data)?data:[])).catch(err=>setOffersError(err.message)).finally(()=>setLoadingOffers(false));},[]);React.useEffect(()=>{fetch('/api/hotel/config').then(res=>res.ok?res.json():Promise.resolve({utensils:[],condiments:[]})).then(cfg=>setHotelConfig({utensils:Array.isArray(cfg.utensils)?cfg.utensils:[],condiments:Array.isArray(cfg.condiments)?cfg.condiments:[]})).catch(()=>setHotelConfig({utensils:[],condiments:[]}));},[]);// Gate: render SignInPage, but keep hooks above unconditional to preserve order\nif(!user){return/*#__PURE__*/_jsx(SignInPage,{onSignIn:handleSignIn,onSignUp:handleSignUp,onResetPin:handleResetPin});}function MenuWrapper(_ref7){let{selectedCategory,setSelectedCategory,handleOrder}=_ref7;// Map backend menu items into client categories\nconst foods=clientMenu.filter(i=>(i.category||'Foods')==='Foods');const byType={breakfast:foods.filter(i=>(i.type||'Breakfast')==='Breakfast'),brunch:foods.filter(i=>(i.type||'Breakfast')==='Brunch'),lunch:foods.filter(i=>(i.type||'Breakfast')==='Lunch'),dinner:foods.filter(i=>(i.type||'Breakfast')==='Dinner'),supper:foods.filter(i=>(i.type||'Breakfast')==='Supper'),specials:foods.filter(i=>(i.type||'')==='Specials')};// Map fields to the shape MenuPage expects\nconst mapItem=i=>({id:i._id,name:i.name,desc:i.description,price:i.price,img:i.image,rating:i.rating||undefined,ingredients:Array.isArray(i.ingredients)?i.ingredients:[],offerActive:!!i.offerActive,offerPercent:Number(i.offerPercent||0)});const menu=(byType[selectedCategory]||[]).map(mapItem);if(loadingMenu)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"});if(menuError)return/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson'},children:menuError});return/*#__PURE__*/_jsx(MenuPage,{menu:menu,handleOrder:handleOrder,selectedCategory:selectedCategory,setSelectedCategory:setSelectedCategory});}function OffersWrapper(){if(loadingOffers)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"});if(offersError)return/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson'},children:offersError});// Show any menu item with an active offer\nconst mapItem=i=>({id:i._id,name:i.name,desc:i.description,price:i.price,img:i.image,offerPercent:Number(i.offerPercent||0)});const offerItems=clientMenu.filter(i=>!!i.offerActive&&Number(i.offerPercent||0)>0).map(mapItem);return/*#__PURE__*/_jsx(OffersPage,{items:offerItems});}return/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:'Inter, Arial, sans-serif',minHeight:'100vh',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',zIndex:0,backgroundImage:\"url(\".concat(vikingBg,\")\"),backgroundSize:'cover',backgroundPosition:'center',opacity:0.35,filter:'blur(2px)'}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',zIndex:1,height:'100vh',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{position:'fixed',top:0,left:0,width:'100vw',maxWidth:'100vw',background:'rgba(26,34,54,0.98)',color:'#fff',padding:'1.2rem 1.2rem',display:'flex',alignItems:'center',justifyContent:'space-between',boxShadow:'0 2px 16px #0003',zIndex:10,borderRadius:0,fontSize:'1.2rem',flexWrap:'wrap',boxSizing:'border-box',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:24,letterSpacing:0.5,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif',flexShrink:0},children:\"Floki's\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'auto',display:'flex',alignItems:'center',gap:18,marginRight:'0.5cm'},children:[/*#__PURE__*/_jsxs(\"nav\",{style:{display:'flex',flexWrap:'wrap',justifyContent:'flex-end',gap:18,fontSize:18,flexShrink:1,minWidth:0},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('menu'),style:{background:page==='menu'?'#ffb300':'transparent',color:page==='menu'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Menu\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('offers'),style:{background:page==='offers'?'#ffb300':'transparent',color:page==='offers'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Offers\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPage('cart'),style:{background:page==='cart'?'#ffb300':'transparent',color:page==='cart'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:[\"Cart\",cart.length>0?\" (\".concat(cart.length,\")\"):'']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('track'),style:{background:page==='track'?'#ffb300':'transparent',color:page==='track'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Track\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('profile'),style:{background:'transparent',border:'none',cursor:'pointer',padding:0,display:'flex',alignItems:'center',justifyContent:'center',height:44,marginRight:'0.5cm'},\"aria-label\":\"Profile\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 32 32\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"16\",cy:\"16\",r:\"16\",fill:page==='profile'?'#ffb300':'#e0e0e0'}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"16\",cy:\"12\",rx:\"6\",ry:\"6\",fill:page==='profile'?'#222':'#888'}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"20\",width:\"16\",height:\"6\",rx:\"3\",fill:page==='profile'?'#222':'#888'})]})}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#fff',fontWeight:600,fontSize:17,marginRight:12},children:user.name||user.email}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSignOut(true),style:{background:'#e74c3c',color:'#fff',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,fontSize:16,cursor:'pointer',marginLeft:8},children:\"Log Out\"})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:{maxWidth:900,width:'95vw',margin:'6.5rem auto 0 auto',background:'rgba(255,255,255,0.92)',borderRadius:18,boxShadow:'0 2px 24px #0002',padding:'2.5rem',backdropFilter:'blur(2px)',height:'calc(100vh - 6.5rem)',overflowY:'auto',boxSizing:'border-box',position:'relative'},children:[cartNotification&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:32,right:32,background:'#ffb300',color:'#222',fontWeight:600,fontSize:18,borderRadius:8,padding:'12px 28px',boxShadow:'0 2px 8px #0002',zIndex:100,opacity:1,transition:'opacity 1s',animation:'fadeoutnotif 2.2s forwards'},children:[cartNotification,/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes fadeoutnotif {\\n                  0% { opacity: 1; }\\n                  80% { opacity: 1; }\\n                  100% { opacity: 0; }\\n                }\\n              \"})]}),page==='menu'&&/*#__PURE__*/_jsx(MenuWrapper,{selectedCategory:selectedCategory,setSelectedCategory:setSelectedCategory,handleOrder:handleOrder}),page==='instructions'&&orderFood&&/*#__PURE__*/_jsx(InstructionsPage,{food:orderFood,onSubmit:handleInstructionsSubmit,config:hotelConfig}),page==='track'&&/*#__PURE__*/_jsx(Track,{trackOrders:trackOrders,setTrackOrders:setTrackOrders,config:hotelConfig}),page==='offers'&&/*#__PURE__*/_jsx(OffersWrapper,{}),page==='cart'&&/*#__PURE__*/_jsx(CartPage,{cart:cart,setCart:setCart,setPage:setPage,config:hotelConfig}),page==='checkout'&&/*#__PURE__*/_jsx(CheckoutPage,{cart:cart,setPage:setPage,checkoutPayment:order.payment,setCheckoutPayment:p=>setOrder(_objectSpread(_objectSpread({},order),{},{payment:p})),setCart:setCart,profile:profile,userEmail:user===null||user===void 0?void 0:user.email,onCheckoutComplete:handleCheckoutComplete}),page==='profile'&&/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:420,margin:'2rem auto',background:'#fff',borderRadius:24,boxShadow:'0 4px 32px #0002',padding:'2.5rem',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Profile\"}),/*#__PURE__*/_jsxs(\"form\",{style:{width:'100%'},onSubmit:e=>{e.preventDefault();if(!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address){setProfileWarning('Please fill all fields before saving.');return;}if(!validateEmail(profile.email)){setProfileWarning('Please enter a valid email address.');return;}setProfileEditing(false);setProfileWarning('');// If email changed, simulate sending confirmation\nif(profile.email!==lastSavedEmail){setEmailConfirmationMsg('A confirmation email has been sent to '+profile.email+'. Please check your inbox to confirm your email address.');setEmailConfirmed(false);setLastSavedEmail(profile.email);}else{setEmailConfirmationMsg('');}},children:[emailConfirmationMsg&&!emailConfirmed&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#1a2236',fontWeight:600,fontSize:16,marginBottom:12,background:'#fffbe6',borderRadius:8,padding:'10px 18px',border:'1px solid #ffe082'},children:[emailConfirmationMsg,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEmailConfirmed(true),style:{marginLeft:12,background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Confirm Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Name\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profile.name,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{name:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.name&&profileEditing?'red':'#ccc',background:!profile.name&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Full Name\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Age\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profile.age,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{age:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.age&&profileEditing?'red':'#ccc',background:!profile.age&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Age\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Sex\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsxs(\"select\",{value:profile.sex,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{sex:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.sex&&profileEditing?'red':'#ccc',background:!profile.sex&&profileEditing?'#fff0f0':'#fff'}),required:true,disabled:!profileEditing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Phone\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:profile.phone,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{phone:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.phone&&profileEditing?'red':'#ccc',background:!profile.phone&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Phone Number\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Email\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:profile.email,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{email:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.email&&profileEditing?'red':'#ccc',background:!profile.email&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Email Address\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Allergies\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"textarea\",{value:profile.allergies,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{allergies:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.allergies&&profileEditing?'red':'#ccc',background:!profile.allergies&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Any allergies?\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Address\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profile.address,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{address:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{flex:1,borderColor:!profile.address&&profileEditing?'red':'#ccc',background:!profile.address&&profileEditing?'#fff0f0':'#fff'}),required:true,disabled:!profileEditing}),profileEditing&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setProfileMapOpen(true),style:{background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'8px 16px',fontWeight:600,cursor:'pointer',fontSize:16},children:\"Location\"})]})]}),profileMapOpen&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.5)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:16,padding:'2.5rem 2rem',maxWidth:480,width:'auto',boxShadow:'0 4px 32px #0003',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:24,fontWeight:700,color:'#1a2236',marginBottom:12},children:\"Select Location\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:18,width:'100%',maxWidth:400,height:300},children:[/*#__PURE__*/_jsx(\"iframe\",{title:\"Google Map\",width:\"100%\",height:\"300\",style:{borderRadius:8,border:'none'},src:\"https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=Kisii,Kenya\",allowFullScreen:true}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:15,marginTop:8},children:\"Drag map and click 'Set Location' to save.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfileMapOpen(false),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'10px 28px',fontWeight:600,cursor:'pointer',fontSize:17},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Simulate setting location, you can integrate with map click event for real coordinates\nsetProfile(_objectSpread(_objectSpread({},profile),{},{address:'Lat: -1.2921, Lng: 36.8219'}));setProfileMapOpen(false);},style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:8,padding:'10px 28px',fontWeight:600,cursor:'pointer',fontSize:17},children:\"Set Location\"})]})]})}),profileEditing?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:12,background:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address?'#ccc':'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address?'not-allowed':'pointer',width:'100%'},disabled:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address,children:\"Save Profile\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setProfileEditing(true),style:{marginTop:12,background:'#ffb300',color:'#222',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPage('menu'),style:{marginTop:12,background:'#e0e0e0',color:'#222',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},children:\"Back to Menu\"})]})]})]})]}),/*#__PURE__*/_jsx(SignOutModal,{open:showSignOut,onClose:()=>setShowSignOut(false),onSignOut:handleSignOut})]});}function InstructionsPage(_ref8){let{food,onSubmit,config}=_ref8;const[utensils,setUtensils]=useState([]);const[condiments,setCondiments]=useState([]);const[notes,setNotes]=useState('');const[deliveryNotes,setDeliveryNotes]=useState('');const[qty,setQty]=useState(food.quantity||1);const availableCondiments=Array.isArray(config===null||config===void 0?void 0:config.condiments)?config.condiments:[];const availableUtensils=Array.isArray(config===null||config===void 0?void 0:config.utensils)?config.utensils:[];const utensilPrices={Spoon:20,Plate:50,Cup:20};function toggleUtensil(ut){setUtensils(utensils.includes(ut)?utensils.filter(u=>u!==ut):[...utensils,ut]);}function addCondiment(cond){setCondiments([...condiments,cond]);}function removeCondiment(idx){setCondiments(condiments.filter((_,i)=>i!==idx));}function handleSubmit(e){e.preventDefault();onSubmit({utensils,condiments,notes,deliveryNotes,qty});}const utensilCost=utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const total=qty*food.price+utensilCost;return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:520,margin:'2rem auto',background:'#fff',borderRadius:24,boxShadow:'0 4px 32px #0002',padding:'2.5rem',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"img\",{src:food.img||'https://via.placeholder.com/180?text=No+Image',alt:food.name,style:{width:180,height:180,objectFit:'cover',borderRadius:16,marginBottom:18,boxShadow:'0 2px 12px #0001'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:30,marginBottom:8,color:'#1a2236',letterSpacing:1},children:food.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:12,fontSize:18},children:food.desc}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ffb300',fontSize:22,marginBottom:6},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f39c12',fontWeight:600,fontSize:17,marginBottom:18},children:[\"Rating: \",food.rating,\" \\u2605\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:'100%'},children:[availableUtensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Utensils Needed:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:18,marginBottom:8,flexWrap:'wrap'},children:availableUtensils.map(ut=>/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:utensils.includes(ut),onChange:()=>toggleUtensil(ut),style:{accentColor:'#ffb300',width:18,height:18}}),\" \",ut,utensilPrices[ut]?/*#__PURE__*/_jsxs(\"span\",{style:{color:'#888',fontSize:14,marginLeft:4},children:[\"+\",utensilPrices[ut],\" Ksh\"]}):null]},ut))}),utensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#1a2236',fontWeight:500,fontSize:15,marginTop:6},children:[\"Utensil cost: \",/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ffb300',fontWeight:700},children:[utensilCost,\" Ksh\"]})]})]}),availableCondiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Condiments:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,flexWrap:'wrap',marginBottom:8},children:availableCondiments.map(cond=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>addCondiment(cond),style:{background:'#f7f7fa',color:'#222',border:'1px solid #ddd',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:16,boxShadow:'0 1px 4px #0001'},children:[cond,\" +\"]},cond))}),/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:12,paddingLeft:18},children:condiments.map((cond,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{color:'#555',fontSize:15,marginBottom:6},children:[cond,\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCondiment(idx),style:{marginLeft:8,background:'#ffb300',color:'#222',border:'none',borderRadius:6,padding:'2px 8px',fontWeight:600,cursor:'pointer',fontSize:14},children:\"Remove\"})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Additional Notes:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:notes,onChange:e=>setNotes(e.target.value),style:{width:'100%',minHeight:60,borderRadius:10,border:'1px solid #ccc',fontSize:16,padding:10,background:'#f7f7fa',marginTop:4},placeholder:\"Any special instructions?\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Delivery Instructions (for courier):\"}),/*#__PURE__*/_jsx(\"textarea\",{value:deliveryNotes,onChange:e=>setDeliveryNotes(e.target.value),style:{width:'100%',minHeight:60,borderRadius:10,border:'1px solid #ccc',fontSize:16,padding:10,background:'#f7f7fa',marginTop:4},placeholder:\"e.g., Call on arrival, gate code, landmarks\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24,display:'flex',alignItems:'center',justifyContent:'center',gap:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:'#1a2236'},children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setQty(qty>1?qty-1:1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,cursor:'pointer',fontSize:20,boxShadow:'0 1px 4px #0001'},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{style:{margin:'0 12px',fontWeight:700,fontSize:20},children:qty}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setQty(qty+1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,cursor:'pointer',fontSize:20,boxShadow:'0 1px 4px #0001'},children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'14px 28px',fontWeight:700,fontSize:18,cursor:'pointer',marginTop:8,boxShadow:'0 2px 8px #0002',width:'100%'},children:\"Add to Cart (\".concat(qty,\") \").concat(total.toLocaleString(),\" Kshs\")})]})]});}function CartPage(_ref9){let{cart,setCart,setPage,config}=_ref9;// Checkout popup state removed. Dedicated page is used.\nconst[editingIdx,setEditingIdx]=useState(null);const[editItem,setEditItem]=useState(null);const[deleteIdx,setDeleteIdx]=useState(null);const utensilPrices={Spoon:20,Plate:50,Cup:20};const availableCondiments=Array.isArray(config===null||config===void 0?void 0:config.condiments)?config.condiments:[];function handleDelete(idx){setDeleteIdx(idx);}function confirmDelete(){setCart(cart.filter((_,i)=>i!==deleteIdx));setDeleteIdx(null);}function cancelDelete(){setDeleteIdx(null);}function handleEdit(idx){setEditingIdx(idx);setEditItem(_objectSpread({},cart[idx]));}function handleEditChange(field,value){setEditItem(_objectSpread(_objectSpread({},editItem),{},{[field]:value}));}function toggleUtensil(ut){setEditItem(_objectSpread(_objectSpread({},editItem),{},{utensils:editItem.utensils.includes(ut)?editItem.utensils.filter(u=>u!==ut):[...editItem.utensils,ut]}));}function addCondiment(cond){setEditItem(_objectSpread(_objectSpread({},editItem),{},{condiments:[...editItem.condiments,cond]}));}function removeCondiment(idx){setEditItem(_objectSpread(_objectSpread({},editItem),{},{condiments:editItem.condiments.filter((_,i)=>i!==idx)}));}function handleSaveEdit(){const utensilCost=editItem.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const total=editItem.qty*editItem.price+utensilCost;setCart(cart.map((item,idx)=>idx===editingIdx?_objectSpread(_objectSpread({},editItem),{},{utensilCost,total}):item));setEditingIdx(null);setEditItem(null);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',marginBottom:18},children:\"Cart\"}),cart.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:18},children:\"Cart is empty.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0},children:cart.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:14,display:'flex',alignItems:'center',background:'#f7f7fa',borderRadius:10,padding:'12px 14px',boxShadow:'0 1px 6px #0001'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:700,fontSize:18,color:'#ffb300',marginRight:16},children:[idx+1,\".\"]}),/*#__PURE__*/_jsx(\"img\",{src:item.img||'https://via.placeholder.com/40?text=No+Image',alt:item.name,style:{width:48,height:48,objectFit:'cover',borderRadius:10,marginRight:16}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:18,color:'#1a2236'},children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#555',fontSize:15},children:[\"Qty: \",item.qty]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ffb300',fontSize:16,marginTop:2},children:[item.total,\" Ksh\"]}),item.utensils&&item.utensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Utensils: \",item.utensils.join(', ')]}),item.condiments&&item.condiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Condiments: \",item.condiments.join(', ')]}),item.notes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Notes: \",item.notes]}),item.deliveryNotes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Delivery: \",item.deliveryNotes]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(idx),style:{marginLeft:12,background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(idx),style:{marginLeft:8,background:'#e74c3c',color:'#fff',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Delete\"})]},idx))}),editingIdx!==null&&editItem&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(26,34,54,0.55)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',backdropFilter:'blur(2px)',overflow:'hidden',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,padding:'2.5rem',maxWidth:420,width:'90vw',boxShadow:'0 8px 32px #1a223633',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto',border:'2px solid #ffb300',animation:'popin 0.25s',overflow:'visible',position:'absolute',top:'50%',left:'calc(50% - 6cm)',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:24,fontWeight:700,color:'#1a2236',marginBottom:18},children:\"Edit Item\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,value:editItem.qty,onChange:e=>handleEditChange('qty',Number(e.target.value)),style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #ccc',fontSize:16,marginTop:6}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Notes:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editItem.notes||'',onChange:e=>handleEditChange('notes',e.target.value),style:{width:'100%',minHeight:60,borderRadius:8,border:'1px solid #ccc',fontSize:16,padding:10,marginTop:6}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Utensils:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,marginTop:6},children:['Spoon','Plate','Cup'].map(ut=>/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:editItem.utensils&&editItem.utensils.includes(ut),onChange:()=>toggleUtensil(ut),style:{accentColor:'#ffb300',width:18,height:18}}),\" \",ut]},ut))})]}),availableCondiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Condiments:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:10,flexWrap:'wrap',marginTop:6},children:availableCondiments.map(cond=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>addCondiment(cond),style:{background:'#f7f7fa',color:'#222',border:'1px solid #ddd',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:16,boxShadow:'0 1px 4px #0001'},children:[cond,\" +\"]},cond))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%',marginTop:18},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveEdit,style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'12px 32px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #0002',transition:'background 0.2s'},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingIdx(null);setEditItem(null);},style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:10,padding:'12px 32px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #0001',transition:'background 0.2s'},children:\"Cancel\"})]})]})}),deleteIdx!==null&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n            body.modal-open {\\n              overflow: hidden !important;\\n            }\\n          \"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(26,34,54,0.55)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',backdropFilter:'blur(2px)',overflow:'hidden',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #fff 80%, #ffb300 100%)',borderRadius:24,padding:'3rem 2.5rem',maxWidth:420,width:'90vw',boxShadow:'0 8px 32px #1a223633',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto',border:'2px solid #ffb300',animation:'popin 0.25s',overflow:'visible',position:'absolute',top:'50%',left:'calc(50% - 6.5cm)',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes popin {\\n                  0% { transform: scale(0.95); opacity: 0.7; }\\n                  100% { transform: scale(1); opacity: 1; }\\n                }\\n              \"}),/*#__PURE__*/_jsx(\"div\",{style:{width:64,height:64,borderRadius:'50%',background:'#ffb300',display:'flex',alignItems:'center',justifyContent:'center',marginBottom:18,boxShadow:'0 2px 8px #ffb30044'},children:/*#__PURE__*/_jsxs(\"svg\",{width:\"36\",height:\"36\",viewBox:\"0 0 36 36\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"18\",cy:\"18\",r:\"18\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 24l12-12M24 24L12 12\",stroke:\"#e74c3c\",strokeWidth:\"3\",strokeLinecap:\"round\"})]})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:26,fontWeight:700,color:'#1a2236',marginBottom:10,letterSpacing:1},children:\"Remove Item?\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:18,color:'#555',marginBottom:22,textAlign:'center',maxWidth:320},children:\"Are you sure you want to remove this item from your cart? This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelDelete,style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:12,padding:'12px 32px',fontWeight:700,cursor:'pointer',fontSize:18,boxShadow:'0 2px 8px #0001',transition:'background 0.2s'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDelete,style:{background:'linear-gradient(90deg, #e74c3c 80%, #ffb300 100%)',color:'#fff',border:'none',borderRadius:12,padding:'12px 32px',fontWeight:700,cursor:'pointer',fontSize:18,boxShadow:'0 2px 8px #e74c3c33',transition:'background 0.2s'},children:\"Delete\"})]})]})})]}),cart.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24,padding:'18px',background:'#f7f7fa',borderRadius:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,marginBottom:12},children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:20,color:'#ffb300'},children:[\"Grand Total: \",cart.reduce((sum,item)=>sum+item.total,0),\" Ksh\"]}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:18,background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'14px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},onClick:()=>setPage('checkout'),children:\"Checkout\"})]})]});}function CheckoutPage(_ref0){let{cart,setPage,checkoutPayment,setCheckoutPayment,onCheckoutComplete,profile,userEmail}=_ref0;const[deliveryType,setDeliveryType]=React.useState('');const[cardDetails,setCardDetails]=React.useState({number:'',name:'',expiry:'',cvv:''});const[processing,setProcessing]=React.useState(false);const[successMsg,setSuccessMsg]=React.useState('');const[errorMsg,setErrorMsg]=React.useState('');const[mpesaStatus,setMpesaStatus]=React.useState('');const[mpesaNumber,setMpesaNumber]=React.useState('');const[mpesaPushed,setMpesaPushed]=React.useState(false);const baseTotal=cart.reduce((sum,item)=>sum+item.total,0);const deliveryFee=deliveryType==='Delivery'?50:0;const grandTotal=baseTotal+deliveryFee;function handleCardInput(e){const{name,value}=e.target;setCardDetails(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}function isValidMpesaNumber(num){return /^(07\\d{8}|011\\d{7})$/.test(num);}async function handleMpesaPush(){setErrorMsg('');setMpesaStatus('Initiating M-Pesa payment...');setProcessing(true);try{let phone=mpesaNumber;if(phone.startsWith('0'))phone='254'+phone.slice(1);const res=await fetch('/api/mpesa/stkpush',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:grandTotal,phone})});const data=await res.json();if(data.error)throw new Error(data.error.message||data.error);setMpesaStatus('STK Push sent. Enter your M-Pesa PIN.');setMpesaPushed(true);setProcessing(false);}catch(err){setErrorMsg('M-Pesa error: '+err.message);setProcessing(false);setMpesaStatus('');}}async function handlePlaceOrder(){setErrorMsg('');if(cart.length===0){setErrorMsg('Cart is empty.');return;}if(!deliveryType){setErrorMsg('Please select Pickup or Delivery.');return;}if(checkoutPayment==='M-Pesa'&&!mpesaPushed){setErrorMsg('Please push M-Pesa first.');return;}setProcessing(true);const payload={items:cart.map(item=>({menuItem:item.id,quantity:item.qty})),clientEmail:(profile===null||profile===void 0?void 0:profile.email)||userEmail||'',clientName:profile!==null&&profile!==void 0&&profile.name&&profile.name.trim()?profile.name.trim():(profile===null||profile===void 0?void 0:profile.email)||userEmail||'',clientPhone:(profile===null||profile===void 0?void 0:profile.phone)||'',deliveryAddress:(profile===null||profile===void 0?void 0:profile.address)||'',deliveryType,status:'pending',total:grandTotal,paymentStatus:checkoutPayment==='Card'?'paid':'pending'};try{const res=await fetch('/api/hotel/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(!res.ok||data.error)throw new Error(data.error||'Failed to place order');setSuccessMsg(\"Order placed! Grand Total: \".concat(grandTotal,\" Ksh\"));setProcessing(false);onCheckoutComplete&&onCheckoutComplete(cart.map(item=>_objectSpread({},item)),deliveryType,grandTotal,data._id);}catch(err){setErrorMsg(err.message);setProcessing(false);}}React.useEffect(()=>{if(successMsg){const t=setTimeout(()=>{setPage('track');},2200);return()=>clearTimeout(t);}},[successMsg,setPage]);return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:600,margin:'4rem auto',background:'#fff',borderRadius:24,boxShadow:'0 6px 32px #0003',padding:'3rem 2.5rem',display:'flex',flexDirection:'column',alignItems:'center',minHeight:420},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:34,marginBottom:24,letterSpacing:1},children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:700,fontSize:20,color:'#1a2236',marginBottom:10},children:[\"Choose Delivery Type \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:deliveryType,onChange:e=>setDeliveryType(e.target.value),style:{width:'100%',padding:'12px',borderRadius:10,border:'1px solid #ccc',fontSize:18,marginTop:8,marginBottom:8},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pickup\",children:\"Pickup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivery\",children:\"Delivery (+50 Ksh)\"})]})]}),successMsg?/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a8f3c',fontWeight:700,fontSize:22,marginBottom:18},children:successMsg}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,marginBottom:10},children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0},children:cart.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:18,display:'flex',alignItems:'center',background:'#f7f7fa',borderRadius:12,padding:'14px 18px',boxShadow:'0 1px 8px #0001'},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img||'https://via.placeholder.com/48?text=No+Image',alt:item.name,style:{width:56,height:56,objectFit:'cover',borderRadius:12,marginRight:18}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:'#1a2236'},children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#555',fontSize:16},children:[\"Qty: \",item.qty]}),item.offerActive&&item.offerPercent>0?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ff5252',fontSize:18,marginTop:2},children:[item.total,\" Ksh\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",(item.price*item.qty).toLocaleString()]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",item.offerPercent,\"%\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ffb300',fontSize:18,marginTop:2},children:[item.total,\" Ksh\"]}),item.deliveryNotes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14,marginTop:4},children:[\"Delivery: \",item.deliveryNotes]})]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22},children:\"Grand Total\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:28,color:'#ffb300',marginTop:8},children:[grandTotal,\" Ksh\"]}),deliveryType==='Delivery'&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:16,marginTop:4},children:\"Includes 50 Ksh delivery fee\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:700,fontSize:20,color:'#1a2236',marginBottom:10},children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:checkoutPayment,onChange:e=>setCheckoutPayment(e.target.value),style:{width:'100%',padding:'12px',borderRadius:10,border:'1px solid #ccc',fontSize:18,marginTop:8,marginBottom:8},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"M-Pesa\",children:\"M-Pesa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Card\",children:\"Card\"})]})]}),checkoutPayment==='M-Pesa'&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24,display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"M-Pesa Number (07XXXXXXXX or 011XXXXXXX)\",value:mpesaNumber,onChange:e=>{setMpesaNumber(e.target.value.replace(/[^0-9]/g,'').slice(0,10));setMpesaPushed(false);},style:{flex:1,padding:12,borderRadius:10,border:'1px solid #ccc',fontSize:18},disabled:processing,maxLength:10}),/*#__PURE__*/_jsx(\"button\",{style:{background:isValidMpesaNumber(mpesaNumber)&&!processing?'#1a2236':'#ccc',color:'#fff',border:'none',borderRadius:10,padding:'12px 18px',fontWeight:700,fontSize:18,cursor:isValidMpesaNumber(mpesaNumber)&&!processing?'pointer':'not-allowed'},onClick:handleMpesaPush,disabled:!isValidMpesaNumber(mpesaNumber)||processing||mpesaPushed,children:\"Push\"})]}),mpesaStatus&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a2236',fontWeight:600,marginBottom:12},children:mpesaStatus}),errorMsg&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#e74c3c',fontWeight:600,marginBottom:12},children:errorMsg}),/*#__PURE__*/_jsx(\"button\",{style:{background:processing||!deliveryType?'#ccc':'#1a2236',color:'#fff',border:'none',borderRadius:12,padding:'16px 32px',fontWeight:700,fontSize:22,cursor:processing||!deliveryType?'not-allowed':'pointer',width:'100%',marginBottom:12,boxShadow:'0 2px 8px #0002'},onClick:handlePlaceOrder,disabled:processing||!deliveryType||checkoutPayment==='M-Pesa'&&!mpesaPushed||checkoutPayment==='Card'&&!isValidCard(cardDetails),children:processing?'Processing...':'Checkout'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('cart'),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:12,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:processing?'not-allowed':'pointer',width:'100%'},disabled:processing,children:\"Back to Cart\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useMemo","SignInModal","_ref","open","onClose","onSignIn","email","setEmail","pin","setPin","_jsx","style","position","top","left","width","height","background","zIndex","display","alignItems","justifyContent","children","_jsxs","borderRadius","boxShadow","padding","minWidth","maxWidth","flexDirection","onClick","right","border","fontSize","color","cursor","fontWeight","marginBottom","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","required","_objectSpread","inputStyle","replace","slice","minLength","maxLength","isValidCard","card","numValid","test","number","nameValid","name","trim","length","expValid","expiry","cvcValid","cvv","SignOutModal","_ref2","onSignOut","textAlign","handleLogout","setUser","setShowSignOut","Track","jsx","jsxs","Fragment","_Fragment","margin","MenuPage","_ref3","menu","handleOrder","selectedCategory","setSelectedCategory","categories","openIngredients","setOpenIngredients","specialsType","setSpecialsType","selectingQty","setSelectingQty","qty","setQty","query","setQuery","useEffect","resetQty","window","addEventListener","removeEventListener","toggleIngredients","id","prev","foods","filter","f","text","concat","desc","toLowerCase","includes","filteredFoods","q","fields","Array","isArray","ingredients","Boolean","some","x","String","gap","flexWrap","map","cat","transition","charAt","toUpperCase","listStyle","gridTemplateColumns","food","minHeight","src","img","alt","objectFit","marginRight","flex","offerActive","offerPercent","Math","round","price","textDecoration","rating","marginTop","quantity","marginLeft","paddingLeft","ing","idx","OffersPage","_ref4","items","SignInPage","_ref5","onSignUp","onResetPin","mode","setMode","firstName","setFirstName","lastName","setLastName","dob","setDob","sex","setSex","phone","setPhone","confirmPin","setConfirmPin","awaitingCode","setAwaitingCode","code","setCode","showPin","setShowPin","isValidEmail","isValidPin","p","isValidPhone","isValidDob","d","y","Date","getFullYear","cy","Number","isFinite","submit","alert","yob","fetch","method","headers","body","JSON","stringify","then","res","_data","ok","json","data","_unused","Error","error","catch","err","message","_data2","_unused2","cardStyle","fontFamily","titleStyle","letterSpacing","fieldStyle","outline","boxSizing","primaryBtn","linkStyle","pinWrapStyle","overflow","pinToggleStyle","transform","lineHeight","pinFieldStyle","paddingRight","max","toISOString","inputMode","pattern","autoComplete","s","viewBox","fill","xmlns","stroke","strokeWidth","strokeLinecap","strokeLinejoin","yobVal","_data3","_unused3","App","showSignIn","setShowSignIn","showSignOut","user","raw","localStorage","getItem","saved","parse","setProfile","_unused4","handleSignIn","Promise","reject","_data$user","_data$user2","_data$user3","nextUser","undefined","setItem","_unused5","handleSignUp","_ref6","nowYear","age","formattedPhone","fullName","_unused6","handleResetPin","handleSignOut","removeItem","_unused7","trackOrders","setTrackOrders","handleCheckoutComplete","orderItems","deliveryType","grandTotal","orderId","paymentMethod","order","payment","total","date","status","canCancel","setCart","setPage","setTimeout","showCheckout","setShowCheckout","emailConfirmed","setEmailConfirmed","emailConfirmationMsg","setEmailConfirmationMsg","validateEmail","lastSavedEmail","setLastSavedEmail","profile","profileWarning","setProfileWarning","profileMapOpen","setProfileMapOpen","profileEditing","setProfileEditing","allergies","address","page","orderFood","setOrderFood","orderPlaced","setOrderPlaced","tracking","setTracking","setOrder","location","lat","lng","showMap","setShowMap","instructions","setInstructions","utensils","condiments","notes","cart","cartNotification","setCartNotification","notify","title","Notification","permission","_unused8","requestPermission","_unused9","handleInstructionsSubmit","instr","utensilPrices","Spoon","Plate","Cup","utensilCost","reduce","sum","ut","unitPrice","deliveryNotes","notif","join","evt","CustomEvent","dispatchEvent","handleOrderSubmit","handleLocationChange","handleMapSelect","vikingBg","orders","setOrders","handleOrderComplete","prevOrders","clientMenu","setClientMenu","clientOffers","setClientOffers","loadingMenu","setLoadingMenu","loadingOffers","setLoadingOffers","menuError","setMenuError","offersError","setOffersError","hotelConfig","setHotelConfig","_unused0","finally","_unused1","resolve","cfg","MenuWrapper","_ref7","i","category","byType","breakfast","brunch","lunch","dinner","supper","specials","mapItem","_id","description","image","OffersWrapper","offerItems","backgroundImage","backgroundSize","backgroundPosition","opacity","flexShrink","whiteSpace","cx","r","rx","ry","backdropFilter","overflowY","bottom","animation","InstructionsPage","config","CartPage","CheckoutPage","checkoutPayment","setCheckoutPayment","userEmail","onCheckoutComplete","borderColor","disabled","allowFullScreen","_ref8","setUtensils","setCondiments","setNotes","setDeliveryNotes","availableCondiments","availableUtensils","toggleUtensil","u","addCondiment","cond","removeCondiment","_","handleSubmit","checked","accentColor","toLocaleString","_ref9","editingIdx","setEditingIdx","editItem","setEditItem","deleteIdx","setDeleteIdx","handleDelete","confirmDelete","cancelDelete","handleEdit","handleEditChange","field","handleSaveEdit","item","pointerEvents","min","_ref0","setDeliveryType","cardDetails","setCardDetails","processing","setProcessing","successMsg","setSuccessMsg","errorMsg","setErrorMsg","mpesaStatus","setMpesaStatus","mpesaNumber","setMpesaNumber","mpesaPushed","setMpesaPushed","baseTotal","deliveryFee","handleCardInput","isValidMpesaNumber","num","handleMpesaPush","startsWith","amount","handlePlaceOrder","payload","menuItem","clientEmail","clientName","clientPhone","deliveryAddress","paymentStatus","t","clearTimeout"],"sources":["C:/Floki/web-client/src/App.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\n\r\n// Sign In Modal\r\nfunction SignInModal({ open, onClose, onSignIn }) {\r\n  const [email, setEmail] = useState('');\r\n  const [pin, setPin] = useState('');\r\n  if (!open) return null;\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: '#0007', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <div style={{ background: '#fff', borderRadius: 24, boxShadow: '0 8px 32px #0003', padding: '2.5rem 2rem', minWidth: 340, maxWidth: 400, width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', position: 'relative' }}>\r\n        <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 24, color: '#888', cursor: 'pointer' }}>&times;</button>\r\n        <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Sign In</h2>\r\n        <form onSubmit={e => { e.preventDefault(); onSignIn(email, pin); }} style={{ width: '100%' }}>\r\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required style={{ ...inputStyle }} />\r\n          <input type=\"number\" placeholder=\"PIN (4-6 digits)\" value={pin} onChange={e => setPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))} required style={{ ...inputStyle }} minLength={4} maxLength={6} />\r\n          <button type=\"submit\" style={{ width: '100%', background: '#1a2236', color: '#fff', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8, boxShadow: '0 2px 8px #1a223633' }}>Sign In</button>\r\n        </form>\r\n        <button onClick={onClose} style={{ width: '100%', background: '#f7f7fa', color: '#222', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer' }}>Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n  function isValidCard(card) {\r\n    // Card number: 16 digits, expiry: MM/YY, CVC: 3 or 4 digits\r\n    const numValid = /^\\d{16}$/.test(card.number);\r\n    const nameValid = card.name.trim().length > 0;\r\n    const expValid = /^(0[1-9]|1[0-2])\\/(\\d{2})$/.test(card.expiry);\r\n    const cvcValid = /^\\d{3,4}$/.test(card.cvv);\r\n    return numValid && nameValid && expValid && cvcValid;\r\n  }\r\n\r\n\r\n// Sign Out Modal\r\nfunction SignOutModal({ open, onClose, onSignOut }) {\r\n  if (!open) return null;\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: '#0007', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <div style={{ background: '#fff', borderRadius: 24, boxShadow: '0 8px 32px #0003', padding: '2.5rem 2rem', minWidth: 340, maxWidth: 400, width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', position: 'relative' }}>\r\n        <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 24, color: '#888', cursor: 'pointer' }}>&times;</button>\r\n        <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Sign Out</h2>\r\n        <div style={{ color: '#555', fontSize: 17, marginBottom: 24, textAlign: 'center' }}>Are you sure you want to sign out?</div>\r\n        <button\r\n          style={{ width: '100%', background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8, boxShadow: '0 2px 8px #e74c3c33' }}\r\n          onClick={onSignOut}\r\n        >Sign Out</button>\r\n        <button\r\n          style={{ width: '100%', background: '#f7f7fa', color: '#222', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8 }}\r\n          onClick={onClose}\r\n        >Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Remove the old logout button and add a floating one at the bottom right\r\nfunction handleLogout() {\r\n  setUser(null);\r\n  setShowSignOut(false);\r\n}\r\n\r\nimport Track from './Track';\r\n// Placeholder MENU and OFFERS removed; data is loaded from backend\r\n\r\nconst inputStyle = {\r\n  display: 'block',\r\n  margin: '8px 0',\r\n  padding: '8px',\r\n  borderRadius: 6,\r\n  border: '1px solid #ccc',\r\n  width: '100%',\r\n  fontSize: 16,\r\n};\r\n\r\nfunction MenuPage({ menu, handleOrder, selectedCategory, setSelectedCategory }) {\r\n  const categories = ['breakfast', 'brunch', 'lunch', 'dinner', 'supper', 'specials'];\r\n  const [openIngredients, setOpenIngredients] = useState({});\r\n  const [specialsType, setSpecialsType] = useState('all');\r\n  const [selectingQty, setSelectingQty] = useState(null); // food.id\r\n  const [qty, setQty] = useState(1);\r\n  const [query, setQuery] = useState('');\r\n  React.useEffect(() => {\r\n    function resetQty() {\r\n      setSelectingQty(null);\r\n      setQty(1);\r\n    }\r\n    window.addEventListener('resetSelectingQty', resetQty);\r\n    return () => window.removeEventListener('resetSelectingQty', resetQty);\r\n  }, []);\r\n  function toggleIngredients(id) {\r\n    setOpenIngredients(prev => ({ ...prev, [id]: !prev[id] }));\r\n  }\r\n  let foods = menu || [];\r\n  // For specials, apply an optional sub-filter using simple heuristics\r\n  if (selectedCategory === 'specials') {\r\n    foods = (menu || []).filter(f => {\r\n      if (specialsType === 'all') return true;\r\n      const text = `${f.name || ''} ${f.desc || ''}`.toLowerCase();\r\n      if (specialsType === 'chef') return text.includes('chef');\r\n      if (specialsType === 'day') return text.includes('day');\r\n      if (specialsType === 'vegan') return text.includes('vegan');\r\n      if (specialsType === 'vegetarian') return text.includes('vegetarian') || text.includes('vegeterian');\r\n      return true;\r\n    });\r\n  }\r\n  const filteredFoods = (foods || []).filter(f => {\r\n    const q = query.trim().toLowerCase();\r\n    if (!q) return true;\r\n    const fields = [f.name, f.desc].concat(Array.isArray(f.ingredients) ? f.ingredients : []);\r\n    return fields.filter(Boolean).some(x => String(x).toLowerCase().includes(q));\r\n  });\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236' }}>Menu</h2>\r\n      <div style={{ display: 'flex', gap: 12, alignItems: 'center', marginBottom: 12 }}>\r\n        <input\r\n          type=\"search\"\r\n          placeholder=\"Search dishes\"\r\n          value={query}\r\n          onChange={e => setQuery(e.target.value)}\r\n          style={{ padding: '8px 12px', borderRadius: 8, border: '1px solid #e1e4ee', minWidth: 240 }}\r\n        />\r\n      </div>\r\n      <div style={{ marginBottom: 24, display: 'flex', gap: 12, justifyContent: 'center', flexWrap: 'wrap' }}>\r\n      {categories.map(cat => (\r\n        <button\r\n          key={cat}\r\n          onClick={() => setSelectedCategory(cat)}\r\n          style={{\r\n            background: selectedCategory === cat ? '#ffb300' : '#f7f7fa',\r\n            color: selectedCategory === cat ? '#222' : '#555',\r\n            border: 'none',\r\n            borderRadius: 6,\r\n            padding: '8px 18px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n            fontSize: 16,\r\n            transition: 'background 0.2s',\r\n            minWidth: 120,\r\n          }}\r\n        >\r\n          {cat.charAt(0).toUpperCase() + cat.slice(1)}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    {selectedCategory === 'specials' && (\r\n      <div style={{ marginBottom: 24, display: 'flex', gap: 12, justifyContent: 'center', flexWrap: 'wrap' }}>\r\n        {['all', 'chef', 'day', 'vegan', 'vegetarian'].map(type => (\r\n          <button\r\n            key={type}\r\n            onClick={() => setSpecialsType(type)}\r\n            style={{\r\n              background: specialsType === type ? '#ffb300' : '#f7f7fa',\r\n              color: specialsType === type ? '#222' : '#555',\r\n              border: 'none',\r\n              borderRadius: 6,\r\n              padding: '8px 18px',\r\n              fontWeight: 600,\r\n              cursor: 'pointer',\r\n              fontSize: 16,\r\n              transition: 'background 0.2s',\r\n              minWidth: 120,\r\n            }}\r\n          >\r\n            {type === 'all' ? 'All' : type === 'chef' ? \"Chef's Special\" : type === 'day' ? \"Day's Special\" : type.charAt(0).toUpperCase() + type.slice(1)}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    )}\r\n    <ul style={{\r\n      listStyle: 'none',\r\n      padding: 0,\r\n      margin: 0,\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\r\n      gap: 32,\r\n      width: '100%',\r\n    }}>\r\n      {filteredFoods.map(food => (\r\n        <li key={food.id} style={{\r\n          background: '#f7f7fa',\r\n          borderRadius: 12,\r\n          padding: 20,\r\n          boxShadow: '0 1px 8px #0001',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          minHeight: 120,\r\n          flexDirection: 'column',\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', width: '100%' }}>\r\n            <img src={food.img} alt={food.name} style={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 10, marginRight: 20 }} />\r\n            <div style={{ flex: 1 }}>\r\n              <div style={{ fontWeight: 700, fontSize: 20 }}>{food.name}</div>\r\n              <div style={{ color: '#555', marginBottom: 6 }}>{food.desc}</div>\r\n              {food.offerActive && food.offerPercent > 0 ? (\r\n                <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                  <div style={{ fontWeight: 600, color: '#ff5252', fontSize: 17 }}>Ksh {Math.round(food.price * (1 - food.offerPercent / 100))}</div>\r\n                  <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {food.price}</div>\r\n                  <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{food.offerPercent}%</span>\r\n                </div>\r\n              ) : (\r\n                <div style={{ fontWeight: 600, color: '#ffb300', fontSize: 17 }}>Ksh {food.price}</div>\r\n              )}\r\n              <div style={{ margin: '6px 0' }}>\r\n                <span style={{ color: '#f39c12', fontWeight: 600 }}>Rating: {food.rating} </span>\r\n              </div>\r\n              {selectingQty === food.id ? (\r\n                <div style={{ display: 'flex', alignItems: 'center', marginTop: 8 }}>\r\n                  <button onClick={() => setQty(qty > 1 ? qty - 1 : 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 18 }}>-</button>\r\n                  <span style={{ margin: '0 12px', fontWeight: 700, fontSize: 18 }}>{qty}</span>\r\n                  <button onClick={() => setQty(qty + 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 18 }}>+</button>\r\n                  <button onClick={() => handleOrder({ ...food, quantity: qty })} style={{ marginLeft: 18, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Order</button>\r\n                </div>\r\n              ) : (\r\n                <button onClick={() => { setSelectingQty(food.id); setQty(1); }} style={{ marginTop: 8, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Order</button>\r\n              )}\r\n              <button onClick={() => toggleIngredients(food.id)} style={{ marginTop: 8, background: openIngredients[food.id] ? '#ffb300' : '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer' }}>See Ingredients</button>\r\n            </div>\r\n          </div>\r\n          {openIngredients[food.id] && (\r\n            <div style={{ marginTop: 12, width: '100%' }}>\r\n              <div style={{ fontWeight: 600, color: '#1a2236', marginBottom: 6 }}>Ingredients:</div>\r\n              <ul style={{ paddingLeft: 18, margin: 0 }}>\r\n                {food.ingredients.map((ing, idx) => (\r\n                  <li key={idx} style={{ color: '#555', fontSize: 15 }}>{ing}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </li>\r\n      ))}\r\n      </ul>\r\n      {filteredFoods.length === 0 && (\r\n        <div style={{ textAlign: 'center', color: '#6a708a', marginTop: 12 }}>No items match your search.</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction OffersPage({ items }) {\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236' }}>Offers</h2>\r\n      <ul style={{\r\n        listStyle: 'none', padding: 0, margin: 0,\r\n        display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))', gap: 24\r\n      }}>\r\n        {items.map(food => (\r\n          <li key={food.id} style={{ background: '#f7f7fa', borderRadius: 12, padding: 16, boxShadow: '0 1px 8px #0001' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              {food.img && <img src={food.img} alt={food.name} style={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 10, marginRight: 20 }} />}\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 18 }}>{food.name}</div>\r\n                {food.desc && <div style={{ color: '#555', marginBottom: 6 }}>{food.desc}</div>}\r\n                <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                  <div style={{ fontWeight: 600, color: '#ff5252', fontSize: 17 }}>Ksh {Math.round(food.price * (1 - food.offerPercent / 100))}</div>\r\n                  <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {food.price}</div>\r\n                  <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{food.offerPercent}%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {items.length === 0 && <div style={{ color: '#6a708a' }}>No active offers.</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Dedicated Sign In Page (gate to the app)\r\nfunction SignInPage({ onSignIn, onSignUp, onResetPin }) {\r\n  const [mode, setMode] = useState('signin'); // 'signin' | 'signup' | 'reset'\r\n  const [firstName, setFirstName] = useState('');\r\n  const [lastName, setLastName] = useState('');\r\n  const [dob, setDob] = useState('');\r\n  const [sex, setSex] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [pin, setPin] = useState('');\r\n  const [confirmPin, setConfirmPin] = useState('');\r\n  const [awaitingCode, setAwaitingCode] = useState(false);\r\n  const [code, setCode] = useState('');\r\n  const [showPin, setShowPin] = useState(false);\r\n  const isValidEmail = e => /^\\S+@\\S+\\.\\S+$/.test(e);\r\n  const isValidPin = p => /^\\d{4,6}$/.test(p);\r\n  const isValidPhone = p => /^(07\\d{8}|011\\d{7})$/.test(p);\r\n  const isValidDob = d => {\r\n    const y = new Date(d).getFullYear();\r\n    const cy = new Date().getFullYear();\r\n    return Number.isFinite(y) && y >= 1900 && y <= cy;\r\n  };\r\n\r\n  function submit(e) {\r\n    e.preventDefault();\r\n    if (mode === 'signin') {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!isValidPin(pin)) { alert('Enter a 4-6 digit PIN.'); return; }\r\n      onSignIn(email, pin);\r\n    } else if (mode === 'signup' && !awaitingCode) {\r\n      if (!firstName.trim()) { alert('Please enter your first name.'); return; }\r\n      if (!lastName.trim()) { alert('Please enter your last name.'); return; }\r\n      if (!isValidDob(dob)) { alert('Please select a valid date of birth.'); return; }\r\n      if (!sex) { alert('Please select your sex.'); return; }\r\n      if (!isValidPhone(phone)) { alert('Enter phone as 07XXXXXXXX or 011XXXXXXX.'); return; }\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!isValidPin(pin)) { alert('Enter a 4-6 digit PIN.'); return; }\r\n      if (pin !== confirmPin) { alert('PINs do not match.'); return; }\r\n      const yob = new Date(dob).getFullYear();\r\n      // Init registration, send confirmation code\r\n      fetch('/api/auth/register-init', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ firstName: firstName.trim(), lastName: lastName.trim(), yob, sex, phone, email, pin })\r\n      })\r\n        .then(async res => {\r\n          if (res.ok) return res.json();\r\n          let data; try { data = await res.json(); } catch {}\r\n          throw new Error(data?.error || 'Failed to send confirmation code');\r\n        })\r\n        .then(() => { setAwaitingCode(true); })\r\n        .catch(err => alert(err.message));\r\n    } else if (mode === 'signup' && awaitingCode) {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!code || code.length !== 6) { alert('Enter the 6-digit confirmation code.'); return; }\r\n      fetch('/api/auth/register-verify', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, code })\r\n      })\r\n        .then(async res => {\r\n          if (res.ok) return res.json();\r\n          let data; try { data = await res.json(); } catch {}\r\n          throw new Error(data?.error || 'Failed to verify code');\r\n        })\r\n        .then(() => {\r\n          const yob = new Date(dob).getFullYear();\r\n          onSignUp({ firstName: firstName.trim(), lastName: lastName.trim(), yob, sex, phone, email, pin });\r\n        })\r\n        .catch(err => alert(err.message));\r\n    } else {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      onResetPin(email);\r\n    }\r\n  }\r\n\r\n  const cardStyle = {\r\n    background: '#fff',\r\n    borderRadius: 16,\r\n    boxShadow: '0 12px 30px rgba(0,0,0,0.10)',\r\n    border: '1px solid #e6e8eb',\r\n    padding: '2rem 1.75rem',\r\n    width: '92vw',\r\n    maxWidth: 520,\r\n    fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif'\r\n  };\r\n  const titleStyle = {\r\n    fontSize: 26,\r\n    fontWeight: 700,\r\n    color: '#0f172a',\r\n    margin: '0 0 16px 0',\r\n    letterSpacing: 0.2,\r\n  };\r\n  const fieldStyle = {\r\n    width: '100%',\r\n    border: '1px solid #ddd',\r\n    borderRadius: 10,\r\n    padding: '12px 14px',\r\n    fontSize: 16,\r\n    outline: 'none',\r\n    margin: '10px 0',\r\n    background: '#f7f7fa',\r\n    boxSizing: 'border-box',\r\n    display: 'block',\r\n    maxWidth: '100%'\r\n  };\r\n  const primaryBtn = {\r\n    width: '100%',\r\n    background: '#ffb300',\r\n    color: '#222',\r\n    border: 'none',\r\n    borderRadius: 12,\r\n    padding: '12px 16px',\r\n    fontWeight: 700,\r\n    fontSize: 18,\r\n    cursor: 'pointer',\r\n    boxShadow: '0 2px 8px #1a223633',\r\n    marginTop: 12\r\n  };\r\n  const linkStyle = {\r\n    color: '#ffb300',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    padding: 0,\r\n    margin: 0,\r\n    cursor: 'pointer',\r\n    fontSize: 14,\r\n    textDecoration: 'underline'\r\n  };\r\n  const pinWrapStyle = {\r\n    position: 'relative',\r\n    width: '100%',\r\n    overflow: 'hidden'\r\n  };\r\n  const pinToggleStyle = {\r\n    position: 'absolute',\r\n    right: 12,\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    color: '#ffb300',\r\n    cursor: 'pointer',\r\n    padding: 0,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 24,\r\n    height: 24,\r\n    lineHeight: 0\r\n  };\r\n  const pinFieldStyle = {\r\n    ...fieldStyle,\r\n    paddingRight: '48px'\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      width: '100vw',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      flexDirection: 'column',\r\n      gap: 16,\r\n      background: '#f7f7fa',\r\n      position: 'relative'\r\n    }}>\r\n      <div style={{ color: '#1a2236', fontWeight: 800, fontSize: 30, letterSpacing: 0.5, fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif', textAlign: 'center' }}>Floki's</div>\r\n      <div style={cardStyle}>\r\n        <div style={titleStyle}>{mode === 'signin' ? 'Login' : mode === 'signup' ? 'Register' : 'Reset PIN'}</div>\r\n        <form onSubmit={submit}>\r\n          {mode === 'signup' && !awaitingCode && (\r\n            <>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12 }}>\r\n                <input type=\"text\" placeholder=\"First Name\" value={firstName} onChange={e => setFirstName(e.target.value)} style={fieldStyle} required />\r\n                <input type=\"text\" placeholder=\"Last Name\" value={lastName} onChange={e => setLastName(e.target.value)} style={fieldStyle} required />\r\n              </div>\r\n              <input type=\"date\" placeholder=\"Date of Birth\" value={dob} onChange={e => setDob(e.target.value)} style={fieldStyle} required max={new Date().toISOString().slice(0,10)} />\r\n              <select value={sex} onChange={e => setSex(e.target.value)} style={fieldStyle} required>\r\n                <option value=\"\">Sex</option>\r\n                <option value=\"Male\">Male</option>\r\n                <option value=\"Female\">Female</option>\r\n                <option value=\"Other\">Other</option>\r\n              </select>\r\n              <input\r\n                type=\"tel\"\r\n                inputMode=\"tel\"\r\n                placeholder=\"Tel (07XXXXXXXX or 011XXXXXXX)\"\r\n                value={phone}\r\n                onChange={e => setPhone(e.target.value.replace(/[^0-9]/g, '').slice(0,10))}\r\n                style={fieldStyle}\r\n                required\r\n                maxLength={10}\r\n              />\r\n            </>\r\n          )}\r\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} style={fieldStyle} required />\r\n          {mode !== 'reset' && (\r\n            <div style={pinWrapStyle}>\r\n              <input\r\n                type={showPin ? 'text' : 'password'}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder={mode==='signin' ? 'PIN' : 'Choose PIN'}\r\n                value={pin}\r\n                onChange={e => setPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                required\r\n                style={pinFieldStyle}\r\n                autoComplete=\"one-time-code\"\r\n              />\r\n              <button type=\"button\" aria-label=\"Toggle PIN visibility\" onClick={() => setShowPin(s => !s)} style={pinToggleStyle}>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  {showPin ? (\r\n                    <path d=\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\" stroke=\"#ffb300\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  ) : (\r\n                    <path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\" fill=\"#ffb300\"/>\r\n                  )}\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n          {mode === 'signup' && !awaitingCode && (\r\n            <div style={pinWrapStyle}>\r\n              <input\r\n                type={showPin ? 'text' : 'password'}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder=\"Confirm PIN\"\r\n                value={confirmPin}\r\n                onChange={e => setConfirmPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                required\r\n                style={pinFieldStyle}\r\n                autoComplete=\"one-time-code\"\r\n              />\r\n              <button type=\"button\" aria-label=\"Toggle PIN visibility\" onClick={() => setShowPin(s => !s)} style={pinToggleStyle}>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  {showPin ? (\r\n                    <path d=\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\" stroke=\"#ffb300\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  ) : (\r\n                    <path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\" fill=\"#ffb300\"/>\r\n                  )}\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n          {mode === 'signup' && awaitingCode && (\r\n            <>\r\n              <div style={pinWrapStyle}>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  placeholder=\"Enter Confirmation Code\"\r\n                  value={code}\r\n                  onChange={e => setCode(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                  style={fieldStyle}\r\n                  required\r\n                  maxLength={6}\r\n                />\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div style={{ color: '#6b7280', fontSize: 14 }}>A confirmation code was sent to your email.</div>\r\n                <button\r\n                  type=\"button\"\r\n                  style={linkStyle}\r\n                  onClick={() => {\r\n                    const yobVal = new Date(dob).getFullYear();\r\n                    fetch('/api/auth/register-init', {\r\n                      method: 'POST',\r\n                      headers: { 'Content-Type': 'application/json' },\r\n                      body: JSON.stringify({ firstName: firstName.trim(), lastName: lastName.trim(), yob: yobVal, sex, phone, email, pin })\r\n                    })\r\n                      .then(async res => {\r\n                        if (res.ok) return res.json();\r\n                        let data; try { data = await res.json(); } catch {}\r\n                        throw new Error(data?.error || 'Failed to resend code');\r\n                      })\r\n                      .then(() => alert('Code resent'))\r\n                      .catch(err => alert(err.message));\r\n                  }}\r\n                >Resend Code</button>\r\n              </div>\r\n            </>\r\n          )}\r\n          <button type=\"submit\" style={primaryBtn}>\r\n            {mode === 'signin' ? 'Log In' : mode === 'signup' ? (awaitingCode ? 'Verify Code' : 'Send Code') : 'Send Reset Link'}\r\n          </button>\r\n        </form>\r\n\r\n        {mode === 'signup' && awaitingCode && null}\r\n\r\n        <div style={{ marginTop: 12, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          {mode === 'signin' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Don't have an account?</span>\r\n              <button type=\"button\" onClick={() => setMode('signup')} style={linkStyle}>Register</button>\r\n            </>\r\n          )}\r\n          {mode === 'signup' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Already have an account?</span>\r\n              <button type=\"button\" onClick={() => setMode('signin')} style={linkStyle}>Sign In</button>\r\n            </>\r\n          )}\r\n          {mode === 'reset' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Remember your PIN?</span>\r\n              <button type=\"button\" onClick={() => setMode('signin')} style={linkStyle}>Sign In</button>\r\n            </>\r\n          )}\r\n        </div>\r\n        {mode === 'signin' && (\r\n          <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n            <button type=\"button\" onClick={() => setMode('reset')} style={linkStyle}>Forgot PIN?</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  // Auth modal states\r\n  const [showSignIn, setShowSignIn] = useState(false); // no longer auto-opened; kept for future use if needed\r\n  const [showSignOut, setShowSignOut] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Persist user session across refreshes\r\n  React.useEffect(() => {\r\n    try {\r\n      const raw = typeof localStorage !== 'undefined' ? localStorage.getItem('clientUser') : null;\r\n      if (raw) {\r\n        const saved = JSON.parse(raw);\r\n        if (saved && saved.email) {\r\n          setUser(saved);\r\n          setProfile(prev => ({\r\n            ...prev,\r\n            name: saved.name || prev.name,\r\n            email: saved.email,\r\n            phone: saved.phone || prev.phone,\r\n          }));\r\n        }\r\n      }\r\n    } catch {}\r\n  }, []);\r\n\r\n  function handleSignIn(email, pin) {\r\n    if (!email || !/^\\S+@\\S+\\.\\S+$/.test(email)) {\r\n      alert('Please enter a valid email.');\r\n      return;\r\n    }\r\n    if (!pin || !/^\\d{4,6}$/.test(pin)) {\r\n      alert('Please enter a 4-6 digit PIN.');\r\n      return;\r\n    }\r\n    fetch('/api/auth/login', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email, pin })\r\n    })\r\n      .then(res => res.ok ? res.json() : res.json().then(d => Promise.reject(new Error(d.error || 'Login failed'))))\r\n      .then(data => {\r\n        // Persist name and phone from backend when available\r\n        const nextUser = {\r\n          email: data.user?.email || email,\r\n          name: data.user?.name || undefined,\r\n          phone: data.user?.phone || undefined,\r\n        };\r\n        setUser(nextUser);\r\n        try { if (typeof localStorage !== 'undefined') localStorage.setItem('clientUser', JSON.stringify(nextUser)); } catch {}\r\n        // Keep profile in sync for downstream usage\r\n        setProfile(prev => ({\r\n          ...prev,\r\n          name: nextUser.name || prev.name,\r\n          email: nextUser.email,\r\n          phone: nextUser.phone || prev.phone,\r\n        }));\r\n        setShowSignIn(false);\r\n      })\r\n      .catch(err => alert(err.message));\r\n  }\r\n  function handleSignUp({ firstName, lastName, yob, sex, phone, email, pin }) {\r\n    if (!email || !pin || pin.length < 4 || pin.length > 6) {\r\n      alert('Please enter a valid email and 4-6 digit PIN.');\r\n      return;\r\n    }\r\n    const nowYear = new Date().getFullYear();\r\n    const age = String(nowYear - Number(yob));\r\n    let formattedPhone = phone;\r\n    if (/^(07\\d{8}|011\\d{7})$/.test(phone)) {\r\n      formattedPhone = '+254' + phone.slice(1);\r\n    }\r\n    // Finalize locally: profile prefill and sign-in (backend persistence already done on verify)\r\n    const fullName = `${firstName} ${lastName}`.trim();\r\n    setProfile(prev => ({\r\n      ...prev,\r\n      name: fullName,\r\n      age,\r\n      sex,\r\n      phone: formattedPhone,\r\n      email,\r\n    }));\r\n    // Reflect name in the signed-in state immediately and persist\r\n    const nextUser = { email, name: fullName, phone: formattedPhone };\r\n    setUser(nextUser);\r\n    try { if (typeof localStorage !== 'undefined') localStorage.setItem('clientUser', JSON.stringify(nextUser)); } catch {}\r\n  }\r\n  function handleResetPin(email) {\r\n    if (!/^\\S+@\\S+\\.\\S+$/.test(email)) {\r\n      alert('Please enter a valid email.');\r\n      return;\r\n    }\r\n    fetch('/api/auth/reset-pin', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(new Error('Failed to send reset email')))\r\n      .then(() => alert('Reset instructions have been sent to ' + email))\r\n      .catch(err => alert(err.message));\r\n  }\r\n  function handleSignOut() {\r\n    setUser(null);\r\n    setShowSignOut(false);\r\n    try { if (typeof localStorage !== 'undefined') localStorage.removeItem('clientUser'); } catch {}\r\n    // Prompt sign-in again after signing out\r\n    setShowSignIn(true);\r\n  }\r\n\r\n  const [trackOrders, setTrackOrders] = useState([\r\n  ]);\r\n\r\n  function handleCheckoutComplete(orderItems, deliveryType, grandTotal, orderId) {\r\n    const paymentMethod = order.payment || 'Cash';\r\n    setTrackOrders(prev => [\r\n      ...prev,\r\n      {\r\n        id: orderId,\r\n        items: orderItems,\r\n        deliveryType,\r\n        total: grandTotal,\r\n        date: new Date(),\r\n        status: 'Pending',\r\n        paymentMethod,\r\n        canCancel: true\r\n      }\r\n    ]);\r\n    setCart([]);\r\n    setPage('track');\r\n    // Set timeout to disable cancel after 1 minute\r\n    setTimeout(() => {\r\n      setTrackOrders(prev => prev.map((order, idx) => {\r\n        if (idx === prev.length - 1) {\r\n          return { ...order, canCancel: false };\r\n        }\r\n        return order;\r\n      }));\r\n    }, 60000);\r\n  }\r\n  const [showCheckout, setShowCheckout] = useState(false);\r\n  const [emailConfirmed, setEmailConfirmed] = useState(false);\r\n  const [emailConfirmationMsg, setEmailConfirmationMsg] = useState('');\r\n  const validateEmail = email => /^\\S+@\\S+\\.\\S+$/.test(email);\r\n  const [lastSavedEmail, setLastSavedEmail] = useState('');\r\n  React.useEffect(() => {\r\n    setLastSavedEmail(profile.email);\r\n  }, []);\r\n  // Remove auto-open modal sign-in; gating is handled via SignInPage\r\n  const [profileWarning, setProfileWarning] = useState('');\r\n  const [profileMapOpen, setProfileMapOpen] = useState(false);\r\n  const [profileEditing, setProfileEditing] = useState(true);\r\n  // Placeholder: Replace with actual user account info from auth/profile\r\n  const [profile, setProfile] = useState({\r\n    name: '',\r\n    age: '',\r\n    sex: '',\r\n    phone: '',\r\n    email: '',\r\n    allergies: '',\r\n    address: '',\r\n  });\r\n  const [page, setPage] = useState('menu');\r\n  const [orderFood, setOrderFood] = useState(null);\r\n  const [orderPlaced, setOrderPlaced] = useState(false);\r\n  const [tracking, setTracking] = useState(false);\r\n  const [order, setOrder] = useState({ name: profile.name, phone: profile.phone, address: profile.address, payment: 'Cash', location: { lat: null, lng: null } });\r\n  const [selectedCategory, setSelectedCategory] = useState('breakfast');\r\n  const [showMap, setShowMap] = useState(false);\r\n\r\n  const [instructions, setInstructions] = useState({ utensils: [], condiments: [], notes: '' });\r\n  const [cart, setCart] = useState([]);\r\n  const [cartNotification, setCartNotification] = useState('');\r\n  // System notification helper\r\n  function notify(title, body) {\r\n    try {\r\n      if (typeof window === 'undefined' || !('Notification' in window)) return;\r\n      if (Notification.permission === 'granted') {\r\n        new Notification(title, { body });\r\n      }\r\n    } catch {}\r\n  }\r\n  React.useEffect(() => {\r\n    try {\r\n      if (typeof window !== 'undefined' && 'Notification' in window && Notification.permission === 'default') {\r\n        Notification.requestPermission().catch(()=>{});\r\n      }\r\n    } catch {}\r\n  }, []);\r\n  function handleOrder(food) {\r\n    if (!user) {\r\n      // Gate prevents reaching here if not signed-in\r\n      return;\r\n    }\r\n    setOrderFood(food);\r\n    setPage('instructions');\r\n  }\r\n  function handleInstructionsSubmit(instr) {\r\n    // Immediately add item to cart and return to menu\r\n    const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n    const utensilCost = instr.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const qty = instr.qty || 1;\r\n    const unitPrice = orderFood.offerActive && orderFood.offerPercent > 0 ? Math.round(orderFood.price * (1 - orderFood.offerPercent / 100)) : orderFood.price;\r\n    const total = qty * unitPrice + utensilCost;\r\n    setCart([...cart, {\r\n      id: orderFood.id,\r\n      name: orderFood.name,\r\n      qty,\r\n      price: unitPrice,\r\n      offerActive: !!orderFood.offerActive,\r\n      offerPercent: Number(orderFood.offerPercent || 0),\r\n      utensils: instr.utensils,\r\n      condiments: instr.condiments,\r\n      notes: instr.notes,\r\n      deliveryNotes: instr.deliveryNotes,\r\n      utensilCost,\r\n      total,\r\n      img: orderFood.img,\r\n    }]);\r\n    // Compose notification listing what was added\r\n    let notif = `${qty} x ${orderFood.name}`;\r\n    if (instr.utensils.length) notif += `, Utensils: ${instr.utensils.join(', ')}`;\r\n    if (instr.condiments.length) notif += `, Condiments: ${instr.condiments.join(', ')}`;\r\n    if (instr.notes) notif += `, Notes: ${instr.notes}`;\r\n    if (instr.deliveryNotes) notif += `, Delivery: ${instr.deliveryNotes}`;\r\n    notify('Added to cart', notif);\r\n    setCartNotification(`${notif} added to cart.`);\r\n    setTimeout(() => setCartNotification(''), 2200);\r\n    setPage('menu');\r\n    setOrderFood(null);\r\n    setInstructions({ utensils: [], condiments: [], notes: '' });\r\n    // Reset MenuPage selectingQty state if needed\r\n    if (typeof window !== 'undefined') {\r\n      setTimeout(() => {\r\n        const evt = new CustomEvent('resetSelectingQty');\r\n        window.dispatchEvent(evt);\r\n      }, 250);\r\n    }\r\n  }\r\n  function handleOrderSubmit(e) {\r\n    e.preventDefault();\r\n    // Add item to cart and skip name/location module\r\n    const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n    const utensilCost = instructions.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const qty = orderFood.qty || instructions.qty || 1;\r\n    const unitPrice = orderFood.offerActive && orderFood.offerPercent > 0 ? Math.round(orderFood.price * (1 - orderFood.offerPercent / 100)) : orderFood.price;\r\n    const total = qty * unitPrice + utensilCost;\r\n    setCart([...cart, {\r\n      id: orderFood.id,\r\n      name: orderFood.name,\r\n      qty,\r\n      price: unitPrice,\r\n      offerActive: !!orderFood.offerActive,\r\n      offerPercent: Number(orderFood.offerPercent || 0),\r\n      utensils: instructions.utensils,\r\n      condiments: instructions.condiments,\r\n      notes: instructions.notes,\r\n      deliveryNotes: instructions.deliveryNotes,\r\n      utensilCost,\r\n      total,\r\n      img: orderFood.img,\r\n    }]);\r\n    // Compose notification listing what was added\r\n    let notif = `${qty} x ${orderFood.name}`;\r\n    if (instructions.utensils.length) notif += `, Utensils: ${instructions.utensils.join(', ')}`;\r\n    if (instructions.condiments.length) notif += `, Condiments: ${instructions.condiments.join(', ')}`;\r\n    if (instructions.notes) notif += `, Notes: ${instructions.notes}`;\r\n    if (instructions.deliveryNotes) notif += `, Delivery: ${instructions.deliveryNotes}`;\r\n    setCartNotification(`${notif} added to cart.`);\r\n    setTimeout(() => setCartNotification(''), 2200);\r\n    setPage('menu');\r\n    setOrderFood(null);\r\n    setInstructions({ utensils: [], condiments: [], notes: '' });\r\n    // Reset MenuPage selectingQty state if needed\r\n    if (typeof window !== 'undefined') {\r\n      setTimeout(() => {\r\n        const evt = new CustomEvent('resetSelectingQty');\r\n        window.dispatchEvent(evt);\r\n      }, 250);\r\n    }\r\n  }\r\n  function handleLocationChange() {\r\n    // Placeholder: Replace with actual map/location picker logic\r\n    setShowMap(true);\r\n  }\r\n  function handleMapSelect(lat, lng) {\r\n    setOrder({ ...order, location: { lat, lng }, address: `Lat: ${lat}, Lng: ${lng}` });\r\n    setShowMap(false);\r\n  }\r\n\r\n  // Viking art background image (unsplash, semi-transparent overlay)\r\n  const vikingBg = 'https://images.unsplash.com/photo-1506744038136-462fa3a6a7f0?auto=format&fit=crop&w=1200&q=80';\r\n  const [orders, setOrders] = useState([\r\n  ]);\r\n  function handleOrderComplete() {\r\n    if (cart.length > 0) {\r\n      setOrders(prevOrders => [...prevOrders, { items: cart, date: new Date(), status: 'Placed' }]);\r\n      setCart([]);\r\n      setPage('orders');\r\n    } else {\r\n      setPage('orders');\r\n    }\r\n  }\r\n  // Fetch menu and offers from backend for client app\r\n  const [clientMenu, setClientMenu] = useState([]);\r\n  const [clientOffers, setClientOffers] = useState([]);\r\n  const [loadingMenu, setLoadingMenu] = useState(false);\r\n  const [loadingOffers, setLoadingOffers] = useState(false);\r\n  const [menuError, setMenuError] = useState('');\r\n  const [offersError, setOffersError] = useState('');\r\n  const [hotelConfig, setHotelConfig] = useState({ utensils: [], condiments: [] });\r\n  React.useEffect(() => {\r\n    setLoadingMenu(true);\r\n    setMenuError('');\r\n    fetch('/api/admin/menu')\r\n      .then(async res => {\r\n        if (res.ok) return res.json();\r\n        let text; try { text = await res.text(); } catch {}\r\n        throw new Error(text || 'Failed to load menu');\r\n      })\r\n      .then(data => setClientMenu(Array.isArray(data) ? data : []))\r\n      .catch(err => setMenuError(err.message))\r\n      .finally(() => setLoadingMenu(false));\r\n  }, []);\r\n  React.useEffect(() => {\r\n    setLoadingOffers(true);\r\n    setOffersError('');\r\n    fetch('/api/hotel/offers')\r\n      .then(async res => {\r\n        if (res.ok) return res.json();\r\n        let text; try { text = await res.text(); } catch {}\r\n        throw new Error(text || 'Failed to load offers');\r\n      })\r\n      .then(data => setClientOffers(Array.isArray(data) ? data : []))\r\n      .catch(err => setOffersError(err.message))\r\n      .finally(() => setLoadingOffers(false));\r\n  }, []);\r\n  React.useEffect(() => {\r\n    fetch('/api/hotel/config')\r\n      .then(res => res.ok ? res.json() : Promise.resolve({ utensils: [], condiments: [] }))\r\n      .then(cfg => setHotelConfig({ utensils: Array.isArray(cfg.utensils) ? cfg.utensils : [], condiments: Array.isArray(cfg.condiments) ? cfg.condiments : [] }))\r\n      .catch(() => setHotelConfig({ utensils: [], condiments: [] }));\r\n  }, []);\r\n\r\n  // Gate: render SignInPage, but keep hooks above unconditional to preserve order\r\n  if (!user) {\r\n    return <SignInPage onSignIn={handleSignIn} onSignUp={handleSignUp} onResetPin={handleResetPin} />;\r\n  }\r\n\r\n  function MenuWrapper({ selectedCategory, setSelectedCategory, handleOrder }) {\r\n    // Map backend menu items into client categories\r\n    const foods = clientMenu.filter(i => (i.category || 'Foods') === 'Foods');\r\n    const byType = {\r\n      breakfast: foods.filter(i => (i.type || 'Breakfast') === 'Breakfast'),\r\n      brunch: foods.filter(i => (i.type || 'Breakfast') === 'Brunch'),\r\n      lunch: foods.filter(i => (i.type || 'Breakfast') === 'Lunch'),\r\n      dinner: foods.filter(i => (i.type || 'Breakfast') === 'Dinner'),\r\n      supper: foods.filter(i => (i.type || 'Breakfast') === 'Supper'),\r\n      specials: foods.filter(i => (i.type || '') === 'Specials'),\r\n    };\r\n    // Map fields to the shape MenuPage expects\r\n    const mapItem = i => ({ id: i._id, name: i.name, desc: i.description, price: i.price, img: i.image, rating: i.rating || undefined, ingredients: Array.isArray(i.ingredients) ? i.ingredients : [], offerActive: !!i.offerActive, offerPercent: Number(i.offerPercent || 0) });\r\n    const menu = (byType[selectedCategory] || []).map(mapItem);\r\n    if (loadingMenu) return <div>Loading</div>;\r\n    if (menuError) return <div style={{ color: 'crimson' }}>{menuError}</div>;\r\n    return (\r\n      <MenuPage\r\n        menu={menu}\r\n        handleOrder={handleOrder}\r\n        selectedCategory={selectedCategory}\r\n        setSelectedCategory={setSelectedCategory}\r\n      />\r\n    );\r\n  }\r\n\r\n  function OffersWrapper() {\r\n    if (loadingOffers) return <div>Loading</div>;\r\n    if (offersError) return <div style={{ color: 'crimson' }}>{offersError}</div>;\r\n    // Show any menu item with an active offer\r\n    const mapItem = i => ({ id: i._id, name: i.name, desc: i.description, price: i.price, img: i.image, offerPercent: Number(i.offerPercent || 0) });\r\n    const offerItems = clientMenu\r\n      .filter(i => !!i.offerActive && Number(i.offerPercent || 0) > 0)\r\n      .map(mapItem);\r\n    return <OffersPage items={offerItems} />;\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      fontFamily: 'Inter, Arial, sans-serif',\r\n      minHeight: '100vh',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n    }}>\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zIndex: 0,\r\n        backgroundImage: `url(${vikingBg})`,\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n        opacity: 0.35,\r\n        filter: 'blur(2px)',\r\n      }} />\r\n      <div style={{ position: 'relative', zIndex: 1, height: '100vh', overflow: 'hidden' }}>\r\n        <header style={{ position: 'fixed', top: 0, left: 0, width: '100vw', maxWidth: '100vw', background: 'rgba(26,34,54,0.98)', color: '#fff', padding: '1.2rem 1.2rem', display: 'flex', alignItems: 'center', justifyContent: 'space-between', boxShadow: '0 2px 16px #0003', zIndex: 10, borderRadius: 0, fontSize: '1.2rem', flexWrap: 'wrap', boxSizing: 'border-box', overflow: 'hidden' }}>\r\n          <span style={{ fontWeight: 700, fontSize: 24, letterSpacing: 0.5, fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif', flexShrink: 0 }}>Floki's</span>\r\n          <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: 18, marginRight: '0.5cm' }}>\r\n            <nav style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'flex-end', gap: 18, fontSize: 18, flexShrink: 1, minWidth: 0 }}>\r\n              <button onClick={() => setPage('menu')} style={{ background: page === 'menu' ? '#ffb300' : 'transparent', color: page === 'menu' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Menu</button>\r\n              <button onClick={() => setPage('offers')} style={{ background: page === 'offers' ? '#ffb300' : 'transparent', color: page === 'offers' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Offers</button>\r\n              <button onClick={() => setPage('cart')} style={{ background: page === 'cart' ? '#ffb300' : 'transparent', color: page === 'cart' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>\r\n                Cart{cart.length > 0 ? ` (${cart.length})` : ''}\r\n              </button>\r\n              <button onClick={() => setPage('track')} style={{ background: page === 'track' ? '#ffb300' : 'transparent', color: page === 'track' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Track</button>\r\n            </nav>\r\n            <button onClick={() => setPage('profile')} style={{ background: 'transparent', border: 'none', cursor: 'pointer', padding: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', height: 44, marginRight: '0.5cm' }} aria-label=\"Profile\">\r\n              <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <circle cx=\"16\" cy=\"16\" r=\"16\" fill={page === 'profile' ? '#ffb300' : '#e0e0e0'} />\r\n                <ellipse cx=\"16\" cy=\"12\" rx=\"6\" ry=\"6\" fill={page === 'profile' ? '#222' : '#888'} />\r\n                <rect x=\"8\" y=\"20\" width=\"16\" height=\"6\" rx=\"3\" fill={page === 'profile' ? '#222' : '#888'} />\r\n              </svg>\r\n            </button>\r\n            {user && (\r\n              <>\r\n                <span style={{ color: '#fff', fontWeight: 600, fontSize: 17, marginRight: 12 }}>{user.name || user.email}</span>\r\n                <button onClick={() => setShowSignOut(true)} style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 16, cursor: 'pointer', marginLeft: 8 }}>Log Out</button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </header>\r\n        <main style={{ maxWidth: 900, width: '95vw', margin: '6.5rem auto 0 auto', background: 'rgba(255,255,255,0.92)', borderRadius: 18, boxShadow: '0 2px 24px #0002', padding: '2.5rem', backdropFilter: 'blur(2px)', height: 'calc(100vh - 6.5rem)', overflowY: 'auto', boxSizing: 'border-box', position: 'relative' }}>\r\n          {cartNotification && (\r\n            <div\r\n              style={{\r\n                position: 'fixed',\r\n                bottom: 32,\r\n                right: 32,\r\n                background: '#ffb300',\r\n                color: '#222',\r\n                fontWeight: 600,\r\n                fontSize: 18,\r\n                borderRadius: 8,\r\n                padding: '12px 28px',\r\n                boxShadow: '0 2px 8px #0002',\r\n                zIndex: 100,\r\n                opacity: 1,\r\n                transition: 'opacity 1s',\r\n                animation: 'fadeoutnotif 2.2s forwards',\r\n              }}\r\n            >\r\n              {cartNotification}\r\n              <style>{`\r\n                @keyframes fadeoutnotif {\r\n                  0% { opacity: 1; }\r\n                  80% { opacity: 1; }\r\n                  100% { opacity: 0; }\r\n                }\r\n              `}</style>\r\n            </div>\r\n          )}\r\n          {page === 'menu' && (\r\n            <MenuWrapper\r\n              selectedCategory={selectedCategory}\r\n              setSelectedCategory={setSelectedCategory}\r\n              handleOrder={handleOrder}\r\n            />\r\n          )}\r\n          {page === 'instructions' && orderFood && <InstructionsPage food={orderFood} onSubmit={handleInstructionsSubmit} config={hotelConfig} />}\r\n          {/* OrderPage and name/location/payment module fully removed. Only allow adding to cart from instructions page. */}\r\n          {page === 'track' && (\r\n            <Track trackOrders={trackOrders} setTrackOrders={setTrackOrders} config={hotelConfig} />\r\n          )}\r\n          {page === 'offers' && <OffersWrapper />}\r\n          {page === 'cart' && (\r\n            <CartPage cart={cart} setCart={setCart} setPage={setPage} config={hotelConfig} />\r\n          )}\r\n          {page === 'checkout' && (\r\n            <CheckoutPage\r\n              cart={cart}\r\n              setPage={setPage}\r\n              checkoutPayment={order.payment}\r\n              setCheckoutPayment={p => setOrder({ ...order, payment: p })}\r\n              setCart={setCart}\r\n              profile={profile}\r\n              userEmail={user?.email}\r\n              onCheckoutComplete={handleCheckoutComplete}\r\n            />\r\n          )}\r\n          {page === 'profile' && (\r\n            <div style={{ maxWidth: 420, margin: '2rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 4px 32px #0002', padding: '2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n              <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Profile</h2>\r\n              <form style={{ width: '100%' }} onSubmit={e => {\r\n                e.preventDefault();\r\n                if (!profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address) {\r\n                  setProfileWarning('Please fill all fields before saving.');\r\n                  return;\r\n                }\r\n                if (!validateEmail(profile.email)) {\r\n                  setProfileWarning('Please enter a valid email address.');\r\n                  return;\r\n                }\r\n                setProfileEditing(false);\r\n                setProfileWarning('');\r\n                // If email changed, simulate sending confirmation\r\n                if (profile.email !== lastSavedEmail) {\r\n                  setEmailConfirmationMsg('A confirmation email has been sent to ' + profile.email + '. Please check your inbox to confirm your email address.');\r\n                  setEmailConfirmed(false);\r\n                  setLastSavedEmail(profile.email);\r\n                } else {\r\n                  setEmailConfirmationMsg('');\r\n                }\r\n              }}>\r\n                                {/* Checkout popup removed. Checkout is now a dedicated page. */}\r\n                                {emailConfirmationMsg && !emailConfirmed && (\r\n                                  <div style={{ color: '#1a2236', fontWeight: 600, fontSize: 16, marginBottom: 12, background: '#fffbe6', borderRadius: 8, padding: '10px 18px', border: '1px solid #ffe082' }}>\r\n                                    {emailConfirmationMsg}\r\n                                    <button\r\n                                      type=\"button\"\r\n                                      onClick={() => setEmailConfirmed(true)}\r\n                                      style={{ marginLeft: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}\r\n                                    >\r\n                                      Confirm Email\r\n                                    </button>\r\n                                  </div>\r\n                                )}\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Name<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"text\" value={profile.name} onChange={e => setProfile({ ...profile, name: e.target.value })} style={{ ...inputStyle, borderColor: !profile.name && profileEditing ? 'red' : '#ccc', background: !profile.name && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Full Name\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Age<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"number\" value={profile.age} onChange={e => setProfile({ ...profile, age: e.target.value })} style={{ ...inputStyle, borderColor: !profile.age && profileEditing ? 'red' : '#ccc', background: !profile.age && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Age\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Sex<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <select value={profile.sex} onChange={e => setProfile({ ...profile, sex: e.target.value })} style={{ ...inputStyle, borderColor: !profile.sex && profileEditing ? 'red' : '#ccc', background: !profile.sex && profileEditing ? '#fff0f0' : '#fff' }} required disabled={!profileEditing}>\r\n                    <option value=\"\">Select</option>\r\n                    <option value=\"Male\">Male</option>\r\n                    <option value=\"Female\">Female</option>\r\n                    <option value=\"Other\">Other</option>\r\n                  </select>\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Phone<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"tel\" value={profile.phone} onChange={e => setProfile({ ...profile, phone: e.target.value })} style={{ ...inputStyle, borderColor: !profile.phone && profileEditing ? 'red' : '#ccc', background: !profile.phone && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Phone Number\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Email<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"email\" value={profile.email} onChange={e => setProfile({ ...profile, email: e.target.value })} style={{ ...inputStyle, borderColor: !profile.email && profileEditing ? 'red' : '#ccc', background: !profile.email && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Email Address\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Allergies<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <textarea value={profile.allergies} onChange={e => setProfile({ ...profile, allergies: e.target.value })} style={{ ...inputStyle, borderColor: !profile.allergies && profileEditing ? 'red' : '#ccc', background: !profile.allergies && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Any allergies?\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Address<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    <input type=\"text\" value={profile.address} onChange={e => setProfile({ ...profile, address: e.target.value })} style={{ ...inputStyle, flex: 1, borderColor: !profile.address && profileEditing ? 'red' : '#ccc', background: !profile.address && profileEditing ? '#fff0f0' : '#fff' }} required disabled={!profileEditing} />\r\n                    {profileEditing && (\r\n                      <button type=\"button\" onClick={() => setProfileMapOpen(true)} style={{ background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '8px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16 }}>Location</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                          {profileMapOpen && (\r\n                            <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                              <div style={{ background: '#fff', borderRadius: 16, padding: '2.5rem 2rem', maxWidth: 480, width: 'auto', boxShadow: '0 4px 32px #0003', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', margin: 'auto' }}>\r\n                                <h3 style={{ marginTop: 0, fontSize: 24, fontWeight: 700, color: '#1a2236', marginBottom: 12 }}>Select Location</h3>\r\n                                <div style={{ marginBottom: 18, width: '100%', maxWidth: 400, height: 300 }}>\r\n                                  {/* Google Maps Embed API interactive map */}\r\n                                  <iframe\r\n                                    title=\"Google Map\"\r\n                                    width=\"100%\"\r\n                                    height=\"300\"\r\n                                    style={{ borderRadius: 8, border: 'none' }}\r\n                                    src=\"https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=Kisii,Kenya\"\r\n                                    allowFullScreen\r\n                                  ></iframe>\r\n                                  <div style={{ color: '#888', fontSize: 15, marginTop: 8 }}>Drag map and click 'Set Location' to save.</div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%' }}>\r\n                                  <button onClick={() => setProfileMapOpen(false)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '10px 28px', fontWeight: 600, cursor: 'pointer', fontSize: 17 }}>Cancel</button>\r\n                                  <button onClick={() => {\r\n                                    // Simulate setting location, you can integrate with map click event for real coordinates\r\n                                    setProfile({ ...profile, address: 'Lat: -1.2921, Lng: 36.8219' });\r\n                                    setProfileMapOpen(false);\r\n                                  }} style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 8, padding: '10px 28px', fontWeight: 600, cursor: 'pointer', fontSize: 17 }}>Set Location</button>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                {profileEditing ? (\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ marginTop: 12, background: !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address ? '#ccc' : '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address ? 'not-allowed' : 'pointer', width: '100%' }}\r\n                    disabled={\r\n                      !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address\r\n                    }\r\n                  >\r\n                    Save Profile\r\n                  </button>\r\n                ) : (\r\n                  <button type=\"button\" onClick={() => setProfileEditing(true)} style={{ marginTop: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}>Edit Profile</button>\r\n                )}\r\n                <button type=\"button\" onClick={() => setPage('menu')} style={{ marginTop: 12, background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}>Back to Menu</button>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n      {/* Auth Modals */}\r\n      <SignOutModal open={showSignOut} onClose={() => setShowSignOut(false)} onSignOut={handleSignOut} />\r\n      {/* Floating Log Out button removed per request */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InstructionsPage({ food, onSubmit, config }) {\r\n  const [utensils, setUtensils] = useState([]);\r\n  const [condiments, setCondiments] = useState([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [deliveryNotes, setDeliveryNotes] = useState('');\r\n  const [qty, setQty] = useState(food.quantity || 1);\r\n  const availableCondiments = Array.isArray(config?.condiments) ? config.condiments : [];\r\n  const availableUtensils = Array.isArray(config?.utensils) ? config.utensils : [];\r\n  const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n  \r\n  function toggleUtensil(ut) {\r\n    setUtensils(utensils.includes(ut) ? utensils.filter(u => u !== ut) : [...utensils, ut]);\r\n  }\r\n  \r\n  function addCondiment(cond) {\r\n    setCondiments([...condiments, cond]);\r\n  }\r\n  \r\n  function removeCondiment(idx) {\r\n    setCondiments(condiments.filter((_, i) => i !== idx));\r\n  }\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit({ utensils, condiments, notes, deliveryNotes, qty });\r\n  }\r\n  \r\n  const utensilCost = utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n  const total = (qty * food.price) + utensilCost;\r\n  \r\n  return (\r\n    <div style={{ maxWidth: 520, margin: '2rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 4px 32px #0002', padding: '2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n      <img src={food.img || 'https://via.placeholder.com/180?text=No+Image'} alt={food.name} style={{ width: 180, height: 180, objectFit: 'cover', borderRadius: 16, marginBottom: 18, boxShadow: '0 2px 12px #0001' }} />\r\n      <div style={{ fontWeight: 700, fontSize: 30, marginBottom: 8, color: '#1a2236', letterSpacing: 1 }}>{food.name}</div>\r\n      <div style={{ color: '#555', marginBottom: 12, fontSize: 18 }}>{food.desc}</div>\r\n      <div style={{ fontWeight: 600, color: '#ffb300', fontSize: 22, marginBottom: 6 }}>Ksh {food.price}</div>\r\n      <span style={{ color: '#f39c12', fontWeight: 600, fontSize: 17, marginBottom: 18 }}>Rating: {food.rating} </span>\r\n      <form onSubmit={handleSubmit} style={{ width: '100%' }}>\r\n        {availableUtensils.length > 0 && (\r\n          <div style={{ marginBottom: 24 }}>\r\n            <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Utensils Needed:</div>\r\n            <div style={{ display: 'flex', gap: 18, marginBottom: 8, flexWrap: 'wrap' }}>\r\n              {availableUtensils.map(ut => (\r\n                <label key={ut} style={{ fontWeight: 500, display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                  <input type=\"checkbox\" checked={utensils.includes(ut)} onChange={() => toggleUtensil(ut)} style={{ accentColor: '#ffb300', width: 18, height: 18 }} /> {ut}\r\n                  {utensilPrices[ut] ? (\r\n                    <span style={{ color: '#888', fontSize: 14, marginLeft: 4 }}>+{utensilPrices[ut]} Ksh</span>\r\n                  ) : null}\r\n                </label>\r\n              ))}\r\n            </div>\r\n            {utensils.length > 0 && (\r\n              <div style={{ color: '#1a2236', fontWeight: 500, fontSize: 15, marginTop: 6 }}>\r\n                Utensil cost: <span style={{ color: '#ffb300', fontWeight: 700 }}>{utensilCost} Ksh</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {availableCondiments.length > 0 && (\r\n          <div style={{ marginBottom: 24 }}>\r\n            <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Condiments:</div>\r\n            <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap', marginBottom: 8 }}>\r\n              {availableCondiments.map(cond => (\r\n                <button type=\"button\" key={cond} onClick={() => addCondiment(cond)} style={{ background: '#f7f7fa', color: '#222', border: '1px solid #ddd', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16, boxShadow: '0 1px 4px #0001' }}>{cond} +</button>\r\n              ))}\r\n            </div>\r\n            <ul style={{ marginTop: 12, paddingLeft: 18 }}>\r\n              {condiments.map((cond, idx) => (\r\n                <li key={idx} style={{ color: '#555', fontSize: 15, marginBottom: 6 }}>\r\n                  {cond} <button type=\"button\" onClick={() => removeCondiment(idx)} style={{ marginLeft: 8, background: '#ffb300', color: '#222', border: 'none', borderRadius: 6, padding: '2px 8px', fontWeight: 600, cursor: 'pointer', fontSize: 14 }}>Remove</button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n        <div style={{ marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Additional Notes:</div>\r\n          <textarea value={notes} onChange={e => setNotes(e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 10, border: '1px solid #ccc', fontSize: 16, padding: 10, background: '#f7f7fa', marginTop: 4 }} placeholder=\"Any special instructions?\" />\r\n        </div>\r\n        <div style={{ marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Delivery Instructions (for courier):</div>\r\n          <textarea value={deliveryNotes} onChange={e => setDeliveryNotes(e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 10, border: '1px solid #ccc', fontSize: 16, padding: 10, background: '#f7f7fa', marginTop: 4 }} placeholder=\"e.g., Call on arrival, gate code, landmarks\" />\r\n        </div>\r\n        <div style={{ marginBottom: 24, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 12 }}>\r\n          <div style={{ fontWeight: 600, color: '#1a2236' }}>Quantity:</div>\r\n          <button type=\"button\" onClick={() => setQty(qty > 1 ? qty - 1 : 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, cursor: 'pointer', fontSize: 20, boxShadow: '0 1px 4px #0001' }}>-</button>\r\n          <span style={{ margin: '0 12px', fontWeight: 700, fontSize: 20 }}>{qty}</span>\r\n          <button type=\"button\" onClick={() => setQty(qty + 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, cursor: 'pointer', fontSize: 20, boxShadow: '0 1px 4px #0001' }}>+</button>\r\n        </div>\r\n        <button type=\"submit\" style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginTop: 8, boxShadow: '0 2px 8px #0002', width: '100%' }}>\r\n          {`Add to Cart (${qty}) ${total.toLocaleString()} Kshs`}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CartPage({ cart, setCart, setPage, config }) {\r\n    // Checkout popup state removed. Dedicated page is used.\r\n  const [editingIdx, setEditingIdx] = useState(null);\r\n  const [editItem, setEditItem] = useState(null);\r\n  const [deleteIdx, setDeleteIdx] = useState(null);\r\n  const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n  const availableCondiments = Array.isArray(config?.condiments) ? config.condiments : [];\r\n  function handleDelete(idx) {\r\n    setDeleteIdx(idx);\r\n  }\r\n  function confirmDelete() {\r\n    setCart(cart.filter((_, i) => i !== deleteIdx));\r\n    setDeleteIdx(null);\r\n  }\r\n  function cancelDelete() {\r\n    setDeleteIdx(null);\r\n  }\r\n  function handleEdit(idx) {\r\n    setEditingIdx(idx);\r\n    setEditItem({ ...cart[idx] });\r\n  }\r\n  function handleEditChange(field, value) {\r\n    setEditItem({ ...editItem, [field]: value });\r\n  }\r\n  function toggleUtensil(ut) {\r\n    setEditItem({ ...editItem, utensils: editItem.utensils.includes(ut) ? editItem.utensils.filter(u => u !== ut) : [...editItem.utensils, ut] });\r\n  }\r\n  function addCondiment(cond) {\r\n    setEditItem({ ...editItem, condiments: [...editItem.condiments, cond] });\r\n  }\r\n  function removeCondiment(idx) {\r\n    setEditItem({ ...editItem, condiments: editItem.condiments.filter((_, i) => i !== idx) });\r\n  }\r\n  function handleSaveEdit() {\r\n    const utensilCost = editItem.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const total = editItem.qty * editItem.price + utensilCost;\r\n    setCart(cart.map((item, idx) => idx === editingIdx ? { ...editItem, utensilCost, total } : item));\r\n    setEditingIdx(null);\r\n    setEditItem(null);\r\n  }\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236', marginBottom: 18 }}>Cart</h2>\r\n      {cart.length === 0 ? (\r\n        <div style={{ color: '#888', fontSize: 18 }}>Cart is empty.</div>\r\n      ) : (\r\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n          {cart.map((item, idx) => (\r\n            <li key={idx} style={{ marginBottom: 14, display: 'flex', alignItems: 'center', background: '#f7f7fa', borderRadius: 10, padding: '12px 14px', boxShadow: '0 1px 6px #0001' }}>\r\n              <span style={{ fontWeight: 700, fontSize: 18, color: '#ffb300', marginRight: 16 }}>{idx + 1}.</span>\r\n              <img src={item.img || 'https://via.placeholder.com/40?text=No+Image'} alt={item.name} style={{ width: 48, height: 48, objectFit: 'cover', borderRadius: 10, marginRight: 16 }} />\r\n              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 18, color: '#1a2236' }}>{item.name}</div>\r\n                <div style={{ color: '#555', fontSize: 15 }}>Qty: {item.qty}</div>\r\n                <div style={{ fontWeight: 700, color: '#ffb300', fontSize: 16, marginTop: 2 }}>{item.total} Ksh</div>\r\n                {item.utensils && item.utensils.length > 0 && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Utensils: {item.utensils.join(', ')}</div>\r\n                )}\r\n                {item.condiments && item.condiments.length > 0 && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Condiments: {item.condiments.join(', ')}</div>\r\n                )}\r\n                {item.notes && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Notes: {item.notes}</div>\r\n                )}\r\n                {item.deliveryNotes && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Delivery: {item.deliveryNotes}</div>\r\n                )}\r\n              </div>\r\n              <button onClick={() => handleEdit(idx)} style={{ marginLeft: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}>Edit</button>\r\n              <button onClick={() => handleDelete(idx)} style={{ marginLeft: 8, background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}>Delete</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {editingIdx !== null && editItem && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100vw',\r\n          height: '100vh',\r\n          background: 'rgba(26,34,54,0.55)',\r\n          zIndex: 1000,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          backdropFilter: 'blur(2px)',\r\n          overflow: 'hidden',\r\n          pointerEvents: 'auto',\r\n        }}>\r\n          <div style={{\r\n            background: '#fff',\r\n            borderRadius: 24,\r\n            padding: '2.5rem',\r\n            maxWidth: 420,\r\n            width: '90vw',\r\n            boxShadow: '0 8px 32px #1a223633',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            margin: 'auto',\r\n            border: '2px solid #ffb300',\r\n            animation: 'popin 0.25s',\r\n            overflow: 'visible',\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: 'calc(50% - 6cm)',\r\n            transform: 'translate(-50%, -50%)',\r\n          }}>\r\n            <h3 style={{ marginTop: 0, fontSize: 24, fontWeight: 700, color: '#1a2236', marginBottom: 18 }}>Edit Item</h3>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Quantity:</label>\r\n              <input type=\"number\" min={1} value={editItem.qty} onChange={e => handleEditChange('qty', Number(e.target.value))} style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #ccc', fontSize: 16, marginTop: 6 }} />\r\n            </div>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Notes:</label>\r\n              <textarea value={editItem.notes || ''} onChange={e => handleEditChange('notes', e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 8, border: '1px solid #ccc', fontSize: 16, padding: 10, marginTop: 6 }} />\r\n            </div>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Utensils:</label>\r\n              <div style={{ display: 'flex', gap: 12, marginTop: 6 }}>\r\n                {['Spoon', 'Plate', 'Cup'].map(ut => (\r\n                  <label key={ut} style={{ fontWeight: 500, display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                    <input type=\"checkbox\" checked={editItem.utensils && editItem.utensils.includes(ut)} onChange={() => toggleUtensil(ut)} style={{ accentColor: '#ffb300', width: 18, height: 18 }} /> {ut}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            {availableCondiments.length > 0 && (\r\n              <div style={{ width: '100%', marginBottom: 16 }}>\r\n                <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Condiments:</label>\r\n                <div style={{ display: 'flex', gap: 10, flexWrap: 'wrap', marginTop: 6 }}>\r\n                  {availableCondiments.map(cond => (\r\n                    <button type=\"button\" key={cond} onClick={() => addCondiment(cond)} style={{ background: '#f7f7fa', color: '#222', border: '1px solid #ddd', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16, boxShadow: '0 1px 4px #0001' }}>{cond} +</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%', marginTop: 18 }}>\r\n              <button onClick={handleSaveEdit} style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 32px', fontWeight: 700, fontSize: 18, cursor: 'pointer', boxShadow: '0 2px 8px #0002', transition: 'background 0.2s' }}>Save</button>\r\n              <button onClick={() => { setEditingIdx(null); setEditItem(null); }} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 10, padding: '12px 32px', fontWeight: 700, fontSize: 18, cursor: 'pointer', boxShadow: '0 2px 8px #0001', transition: 'background 0.2s' }}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {deleteIdx !== null && (\r\n        <>\r\n          <style>{`\r\n            body.modal-open {\r\n              overflow: hidden !important;\r\n            }\r\n          `}</style>\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            background: 'rgba(26,34,54,0.55)',\r\n            zIndex: 1000,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            backdropFilter: 'blur(2px)',\r\n            overflow: 'hidden',\r\n            pointerEvents: 'auto',\r\n          }}>\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, #fff 80%, #ffb300 100%)',\r\n              borderRadius: 24,\r\n              padding: '3rem 2.5rem',\r\n              maxWidth: 420,\r\n              width: '90vw',\r\n              boxShadow: '0 8px 32px #1a223633',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              margin: 'auto',\r\n              border: '2px solid #ffb300',\r\n              animation: 'popin 0.25s',\r\n              overflow: 'visible',\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: 'calc(50% - 6.5cm)',\r\n              transform: 'translate(-50%, -50%)',\r\n            }}>\r\n              <style>{`\r\n                @keyframes popin {\r\n                  0% { transform: scale(0.95); opacity: 0.7; }\r\n                  100% { transform: scale(1); opacity: 1; }\r\n                }\r\n              `}</style>\r\n              <div style={{\r\n                width: 64,\r\n                height: 64,\r\n                borderRadius: '50%',\r\n                background: '#ffb300',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                marginBottom: 18,\r\n                boxShadow: '0 2px 8px #ffb30044',\r\n              }}>\r\n                <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <circle cx=\"18\" cy=\"18\" r=\"18\" fill=\"#fff\" />\r\n                  <path d=\"M12 24l12-12M24 24L12 12\" stroke=\"#e74c3c\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n                </svg>\r\n              </div>\r\n              <h3 style={{ marginTop: 0, fontSize: 26, fontWeight: 700, color: '#1a2236', marginBottom: 10, letterSpacing: 1 }}>Remove Item?</h3>\r\n              <p style={{ fontSize: 18, color: '#555', marginBottom: 22, textAlign: 'center', maxWidth: 320 }}>Are you sure you want to remove this item from your cart? This action cannot be undone.</p>\r\n              <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%' }}>\r\n                <button onClick={cancelDelete} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 12, padding: '12px 32px', fontWeight: 700, cursor: 'pointer', fontSize: 18, boxShadow: '0 2px 8px #0001', transition: 'background 0.2s' }}>Cancel</button>\r\n                <button onClick={confirmDelete} style={{ background: 'linear-gradient(90deg, #e74c3c 80%, #ffb300 100%)', color: '#fff', border: 'none', borderRadius: 12, padding: '12px 32px', fontWeight: 700, cursor: 'pointer', fontSize: 18, boxShadow: '0 2px 8px #e74c3c33', transition: 'background 0.2s' }}>Delete</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n      {cart.length > 0 && (\r\n        <div style={{ marginTop: 24, padding: '18px', background: '#f7f7fa', borderRadius: 12 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22, marginBottom: 12 }}>Order Summary</div>\r\n          <div style={{ fontWeight: 700, fontSize: 20, color: '#ffb300' }}>Grand Total: {cart.reduce((sum, item) => sum + item.total, 0)} Ksh</div>\r\n          <button\r\n            style={{ marginTop: 18, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}\r\n            onClick={() => setPage('checkout')}\r\n          >Checkout</button>\r\n        </div>\r\n      )}\r\n      {/* Checkout popup/modal removed. Checkout is now a dedicated page. */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CheckoutPage({ cart, setPage, checkoutPayment, setCheckoutPayment, onCheckoutComplete, profile, userEmail }) {\r\n  const [deliveryType, setDeliveryType] = React.useState('');\r\n  const [cardDetails, setCardDetails] = React.useState({ number: '', name: '', expiry: '', cvv: '' });\r\n  const [processing, setProcessing] = React.useState(false);\r\n  const [successMsg, setSuccessMsg] = React.useState('');\r\n  const [errorMsg, setErrorMsg] = React.useState('');\r\n  const [mpesaStatus, setMpesaStatus] = React.useState('');\r\n  const [mpesaNumber, setMpesaNumber] = React.useState('');\r\n  const [mpesaPushed, setMpesaPushed] = React.useState(false);\r\n\r\n  const baseTotal = cart.reduce((sum, item) => sum + item.total, 0);\r\n  const deliveryFee = deliveryType === 'Delivery' ? 50 : 0;\r\n  const grandTotal = baseTotal + deliveryFee;\r\n\r\n  function handleCardInput(e) {\r\n    const { name, value } = e.target;\r\n    setCardDetails(prev => ({ ...prev, [name]: value }));\r\n  }\r\n\r\n  function isValidMpesaNumber(num) {\r\n    return (/^(07\\d{8}|011\\d{7})$/).test(num);\r\n  }\r\n\r\n  async function handleMpesaPush() {\r\n    setErrorMsg('');\r\n    setMpesaStatus('Initiating M-Pesa payment...');\r\n    setProcessing(true);\r\n    try {\r\n      let phone = mpesaNumber;\r\n      if (phone.startsWith('0')) phone = '254' + phone.slice(1);\r\n      const res = await fetch('/api/mpesa/stkpush', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ amount: grandTotal, phone }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.error) throw new Error(data.error.message || data.error);\r\n      setMpesaStatus('STK Push sent. Enter your M-Pesa PIN.');\r\n      setMpesaPushed(true);\r\n      setProcessing(false);\r\n    } catch (err) {\r\n      setErrorMsg('M-Pesa error: ' + err.message);\r\n      setProcessing(false);\r\n      setMpesaStatus('');\r\n    }\r\n  }\r\n\r\n  async function handlePlaceOrder() {\r\n    setErrorMsg('');\r\n    if (cart.length === 0) { setErrorMsg('Cart is empty.'); return; }\r\n    if (!deliveryType) { setErrorMsg('Please select Pickup or Delivery.'); return; }\r\n    if (checkoutPayment === 'M-Pesa' && !mpesaPushed) { setErrorMsg('Please push M-Pesa first.'); return; }\r\n    setProcessing(true);\r\n\r\n    const payload = {\r\n      items: cart.map(item => ({ menuItem: item.id, quantity: item.qty })),\r\n      clientEmail: (profile?.email || userEmail || ''),\r\n      clientName: (profile?.name && profile.name.trim()) ? profile.name.trim() : (profile?.email || userEmail || ''),\r\n      clientPhone: profile?.phone || '',\r\n      deliveryAddress: profile?.address || '',\r\n      deliveryType,\r\n      status: 'pending',\r\n      total: grandTotal,\r\n      paymentStatus: checkoutPayment === 'Card' ? 'paid' : 'pending'\r\n    };\r\n\r\n    try {\r\n      const res = await fetch('/api/hotel/orders', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok || data.error) throw new Error(data.error || 'Failed to place order');\r\n      setSuccessMsg(`Order placed! Grand Total: ${grandTotal} Ksh`);\r\n      setProcessing(false);\r\n      onCheckoutComplete && onCheckoutComplete(\r\n        cart.map(item => ({ ...item })),\r\n        deliveryType,\r\n        grandTotal,\r\n        data._id\r\n      );\r\n    } catch (err) {\r\n      setErrorMsg(err.message);\r\n      setProcessing(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (successMsg) {\r\n      const t = setTimeout(() => { setPage('track'); }, 2200);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [successMsg, setPage]);\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '4rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 6px 32px #0003', padding: '3rem 2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center', minHeight: 420 }}>\r\n      <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 34, marginBottom: 24, letterSpacing: 1 }}>Checkout</h2>\r\n      {/* Delivery/Pickup selection mandatory */}\r\n      <div style={{ width: '100%', marginBottom: 24 }}>\r\n        <label style={{ fontWeight: 700, fontSize: 20, color: '#1a2236', marginBottom: 10 }}>Choose Delivery Type <span style={{ color: 'red' }}>*</span></label>\r\n        <select value={deliveryType} onChange={e => setDeliveryType(e.target.value)} style={{ width: '100%', padding: '12px', borderRadius: 10, border: '1px solid #ccc', fontSize: 18, marginTop: 8, marginBottom: 8 }} required>\r\n          <option value=\"\">Select</option>\r\n          <option value=\"Pickup\">Pickup</option>\r\n          <option value=\"Delivery\">Delivery (+50 Ksh)</option>\r\n        </select>\r\n      </div>\r\n      {successMsg ? (\r\n        <div style={{ color: '#1a8f3c', fontWeight: 700, fontSize: 22, marginBottom: 18 }}>{successMsg}</div>\r\n      ) : <>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22, marginBottom: 10 }}>Order Items</div>\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n            {cart.map((item, idx) => (\r\n              <li key={idx} style={{ marginBottom: 18, display: 'flex', alignItems: 'center', background: '#f7f7fa', borderRadius: 12, padding: '14px 18px', boxShadow: '0 1px 8px #0001' }}>\r\n                <img src={item.img || 'https://via.placeholder.com/48?text=No+Image'} alt={item.name} style={{ width: 56, height: 56, objectFit: 'cover', borderRadius: 12, marginRight: 18 }} />\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ fontWeight: 700, fontSize: 20, color: '#1a2236' }}>{item.name}</div>\r\n                  <div style={{ color: '#555', fontSize: 16 }}>Qty: {item.qty}</div>\r\n                  {item.offerActive && item.offerPercent > 0 ? (\r\n                    <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                      <div style={{ fontWeight: 700, color: '#ff5252', fontSize: 18, marginTop: 2 }}>{item.total} Ksh</div>\r\n                      <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {(item.price * item.qty).toLocaleString()}</div>\r\n                      <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{item.offerPercent}%</span>\r\n                    </div>\r\n                  ) : (\r\n                    <div style={{ fontWeight: 700, color: '#ffb300', fontSize: 18, marginTop: 2 }}>{item.total} Ksh</div>\r\n                  )}\r\n                  {item.deliveryNotes && (\r\n                    <div style={{ color: '#888', fontSize: 14, marginTop: 4 }}>Delivery: {item.deliveryNotes}</div>\r\n                  )}\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22 }}>Grand Total</div>\r\n          <div style={{ fontWeight: 700, fontSize: 28, color: '#ffb300', marginTop: 8 }}>{grandTotal} Ksh</div>\r\n          {deliveryType === 'Delivery' && (\r\n            <div style={{ color: '#888', fontSize: 16, marginTop: 4 }}>Includes 50 Ksh delivery fee</div>\r\n          )}\r\n        </div>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <label style={{ fontWeight: 700, fontSize: 20, color: '#1a2236', marginBottom: 10 }}>Payment Method</label>\r\n          <select value={checkoutPayment} onChange={e => setCheckoutPayment(e.target.value)} style={{ width: '100%', padding: '12px', borderRadius: 10, border: '1px solid #ccc', fontSize: 18, marginTop: 8, marginBottom: 8 }}>\r\n            <option value=\"Cash\">Cash</option>\r\n            <option value=\"M-Pesa\">M-Pesa</option>\r\n            <option value=\"Card\">Card</option>\r\n          </select>\r\n        </div>\r\n        {checkoutPayment === 'M-Pesa' && (\r\n          <div style={{ width: '100%', marginBottom: 24, display: 'flex', alignItems: 'center', gap: 12 }}>\r\n            <input\r\n              type=\"tel\"\r\n              placeholder=\"M-Pesa Number (07XXXXXXXX or 011XXXXXXX)\"\r\n              value={mpesaNumber}\r\n              onChange={e => {\r\n                setMpesaNumber(e.target.value.replace(/[^0-9]/g, '').slice(0, 10));\r\n                setMpesaPushed(false);\r\n              }}\r\n              style={{ flex: 1, padding: 12, borderRadius: 10, border: '1px solid #ccc', fontSize: 18 }}\r\n              disabled={processing}\r\n              maxLength={10}\r\n            />\r\n            <button\r\n              style={{ background: isValidMpesaNumber(mpesaNumber) && !processing ? '#1a2236' : '#ccc', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 18px', fontWeight: 700, fontSize: 18, cursor: isValidMpesaNumber(mpesaNumber) && !processing ? 'pointer' : 'not-allowed' }}\r\n              onClick={handleMpesaPush}\r\n              disabled={!isValidMpesaNumber(mpesaNumber) || processing || mpesaPushed}\r\n            >Push</button>\r\n          </div>\r\n        )}\r\n        {mpesaStatus && <div style={{ color: '#1a2236', fontWeight: 600, marginBottom: 12 }}>{mpesaStatus}</div>}\r\n        {errorMsg && <div style={{ color: '#e74c3c', fontWeight: 600, marginBottom: 12 }}>{errorMsg}</div>}\r\n        <button\r\n          style={{ background: processing || !deliveryType ? '#ccc' : '#1a2236', color: '#fff', border: 'none', borderRadius: 12, padding: '16px 32px', fontWeight: 700, fontSize: 22, cursor: processing || !deliveryType ? 'not-allowed' : 'pointer', width: '100%', marginBottom: 12, boxShadow: '0 2px 8px #0002' }}\r\n          onClick={handlePlaceOrder}\r\n          disabled={processing || !deliveryType || (checkoutPayment === 'M-Pesa' && !mpesaPushed) || (checkoutPayment === 'Card' && !isValidCard(cardDetails))}\r\n        >{processing ? 'Processing...' : 'Checkout'}</button>\r\n        <button onClick={() => setPage('cart')} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 12, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: processing ? 'not-allowed' : 'pointer', width: '100%' }} disabled={processing}>Back to Cart</button>\r\n      </>}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}