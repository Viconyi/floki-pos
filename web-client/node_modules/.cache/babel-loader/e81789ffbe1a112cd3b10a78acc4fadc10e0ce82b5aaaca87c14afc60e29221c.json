{"ast":null,"code":"import _objectSpread from\"C:/Floki/web-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// --- Past Orders and Ratings ---\nfunction PastOrdersPage(_ref){let{orders,onRate}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236'},children:\"Past Orders\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{style:{background:'#f7f7fa',borderRadius:12,margin:'16px 0',padding:18,boxShadow:'0 1px 8px #0001'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:18},children:[\"Order #\",order._id]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Status: \",order.status]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: Ksh \",order.total]}),/*#__PURE__*/_jsx(\"div\",{children:\"Items:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{paddingLeft:18},children:order.items.map((item,idx)=>{var _item$menuItem;return/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:6},children:[((_item$menuItem=item.menuItem)===null||_item$menuItem===void 0?void 0:_item$menuItem.name)||'Item',\" x\",item.quantity,/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:12,background:'#ffb300',color:'#222',border:'none',borderRadius:6,padding:'4px 12px',fontWeight:600,cursor:'pointer'},onClick:()=>onRate(order,item),children:\"Rate Now\"})]},idx);})})]},order._id))}),orders.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6a708a'},children:\"No past orders found.\"})]});}import React,{useState,useMemo}from'react';// Sign In Modal\nfunction SignInModal(_ref2){let{open,onClose,onSignIn}=_ref2;const[email,setEmail]=useState('');const[pin,setPin]=useState('');if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#0007',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,boxShadow:'0 8px 32px #0003',padding:'2.5rem 2rem',minWidth:340,maxWidth:400,width:'100%',display:'flex',flexDirection:'column',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',top:18,right:18,background:'none',border:'none',fontSize:24,color:'#888',cursor:'pointer'},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();onSignIn(email,pin);},style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:_objectSpread({},inputStyle)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"PIN (4-6 digits)\",value:pin,onChange:e=>setPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:_objectSpread({},inputStyle),minLength:4,maxLength:6}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'100%',background:'#1a2236',color:'#fff',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8,boxShadow:'0 2px 8px #1a223633'},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{width:'100%',background:'#f7f7fa',color:'#222',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer'},children:\"Cancel\"})]})});}function isValidCard(card){// Card number: 16 digits, expiry: MM/YY, CVC: 3 or 4 digits\nconst numValid=/^\\d{16}$/.test(card.number);const nameValid=card.name.trim().length>0;const expValid=/^(0[1-9]|1[0-2])\\/(\\d{2})$/.test(card.expiry);const cvcValid=/^\\d{3,4}$/.test(card.cvv);return numValid&&nameValid&&expValid&&cvcValid;}// Sign Out Modal\nfunction SignOutModal(_ref3){let{open,onClose,onSignOut}=_ref3;if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#0007',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,boxShadow:'0 8px 32px #0003',padding:'2.5rem 2rem',minWidth:340,maxWidth:400,width:'100%',display:'flex',flexDirection:'column',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',top:18,right:18,background:'none',border:'none',fontSize:24,color:'#888',cursor:'pointer'},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Sign Out\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',fontSize:17,marginBottom:24,textAlign:'center'},children:\"Are you sure you want to sign out?\"}),/*#__PURE__*/_jsx(\"button\",{style:{width:'100%',background:'#e74c3c',color:'#fff',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8,boxShadow:'0 2px 8px #e74c3c33'},onClick:onSignOut,children:\"Sign Out\"}),/*#__PURE__*/_jsx(\"button\",{style:{width:'100%',background:'#f7f7fa',color:'#222',border:'none',borderRadius:12,padding:'14px',fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8},onClick:onClose,children:\"Cancel\"})]})});}// Remove the old logout button and add a floating one at the bottom right\nfunction handleLogout(){setUser(null);setShowSignOut(false);}import Track from'./Track';// The reorder event listener must be inside the App component to use hooks\n// Placeholder MENU and OFFERS removed; data is loaded from backend\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const inputStyle={display:'block',margin:'8px 0',padding:'8px',borderRadius:6,border:'1px solid #ccc',width:'100%',fontSize:16};function MenuPage(_ref4){let{menu,handleOrder,selectedCategory,setSelectedCategory}=_ref4;const categories=['breakfast','brunch','lunch','dinner','supper','specials'];const[openIngredients,setOpenIngredients]=useState({});const[specialsType,setSpecialsType]=useState('all');const[selectingQty,setSelectingQty]=useState(null);// food.id\nconst[qty,setQty]=useState(1);const[query,setQuery]=useState('');React.useEffect(()=>{function resetQty(){setSelectingQty(null);setQty(1);}window.addEventListener('resetSelectingQty',resetQty);return()=>window.removeEventListener('resetSelectingQty',resetQty);},[]);function toggleIngredients(id){setOpenIngredients(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:!prev[id]}));}let foods=menu||[];// For specials, apply an optional sub-filter using simple heuristics\nif(selectedCategory==='specials'){foods=(menu||[]).filter(f=>{if(specialsType==='all')return true;const text=\"\".concat(f.name||'',\" \").concat(f.desc||'').toLowerCase();if(specialsType==='chef')return text.includes('chef');if(specialsType==='day')return text.includes('day');if(specialsType==='vegan')return text.includes('vegan');if(specialsType==='vegetarian')return text.includes('vegetarian')||text.includes('vegeterian');return true;});}const filteredFoods=(foods||[]).filter(f=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[f.name,f.desc].concat(Array.isArray(f.ingredients)?f.ingredients:[]);return fields.filter(Boolean).some(x=>String(x).toLowerCase().includes(q));});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236'},children:\"Menu\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,alignItems:'center',marginBottom:12},children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Search dishes\\u2026\",value:query,onChange:e=>setQuery(e.target.value),style:{padding:'8px 12px',borderRadius:8,border:'1px solid #e1e4ee',minWidth:240}})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24,display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'},children:categories.map(cat=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCategory(cat),style:{background:selectedCategory===cat?'#ffb300':'#f7f7fa',color:selectedCategory===cat?'#222':'#555',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer',fontSize:16,transition:'background 0.2s',minWidth:120},children:cat.charAt(0).toUpperCase()+cat.slice(1)},cat))}),selectedCategory==='specials'&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24,display:'flex',gap:12,justifyContent:'center',flexWrap:'wrap'},children:['all','chef','day','vegan','vegetarian'].map(type=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpecialsType(type),style:{background:specialsType===type?'#ffb300':'#f7f7fa',color:specialsType===type?'#222':'#555',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer',fontSize:16,transition:'background 0.2s',minWidth:120},children:type==='all'?'All':type==='chef'?\"Chef's Special\":type==='day'?\"Day's Special\":type.charAt(0).toUpperCase()+type.slice(1)},type))}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:32,width:'100%'},children:filteredFoods.map(food=>/*#__PURE__*/_jsxs(\"li\",{style:{background:'#f7f7fa',borderRadius:12,padding:20,boxShadow:'0 1px 8px #0001',display:'flex',alignItems:'center',minHeight:120,flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"img\",{src:food.img,alt:food.name,style:{width:90,height:90,objectFit:'cover',borderRadius:10,marginRight:20}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20},children:food.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:6},children:food.desc}),food.offerActive&&food.offerPercent>0?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ff5252',fontSize:17},children:[\"Ksh \",Math.round(food.price*(1-food.offerPercent/100))]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",food.offerPercent,\"%\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ffb300',fontSize:17},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'6px 0'},children:typeof food.averageRating==='number'&&food.ratingCount>0?/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f39c12',fontWeight:600},children:[\"Avg Rating: \",food.averageRating.toFixed(1),\" \\u2605 (\",food.ratingCount,\")\"]}):/*#__PURE__*/_jsx(\"span\",{style:{color:'#888',fontWeight:500},children:\"No ratings yet\"})}),selectingQty===food.id?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginTop:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQty(qty>1?qty-1:1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:18},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{style:{margin:'0 12px',fontWeight:700,fontSize:18},children:qty}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQty(qty+1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:18},children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOrder(_objectSpread(_objectSpread({},food),{},{quantity:qty})),style:{marginLeft:18,background:'#1a2236',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Order\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectingQty(food.id);setQty(1);},style:{marginTop:8,background:'#1a2236',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Order\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleIngredients(food.id),style:{marginTop:8,background:openIngredients[food.id]?'#ffb300':'#e0e0e0',color:'#222',border:'none',borderRadius:6,padding:'6px 16px',fontWeight:600,cursor:'pointer'},children:\"See Ingredients\"})]})]}),openIngredients[food.id]&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:'#1a2236',marginBottom:6},children:\"Ingredients:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{paddingLeft:18,margin:0},children:food.ingredients.map((ing,idx)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'#555',fontSize:15},children:ing},idx))})]})]},food.id))}),filteredFoods.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',color:'#6a708a',marginTop:12},children:\"No items match your search.\"})]});}function OffersPage(_ref5){let{items}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236'},children:\"Offers\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:24},children:items.map(food=>/*#__PURE__*/_jsx(\"li\",{style:{background:'#f7f7fa',borderRadius:12,padding:16,boxShadow:'0 1px 8px #0001'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[food.img&&/*#__PURE__*/_jsx(\"img\",{src:food.img,alt:food.name,style:{width:90,height:90,objectFit:'cover',borderRadius:10,marginRight:20}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:18},children:food.name}),food.desc&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:6},children:food.desc}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ff5252',fontSize:17},children:[\"Ksh \",Math.round(food.price*(1-food.offerPercent/100))]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",food.offerPercent,\"%\"]})]})]})]})},food.id))}),items.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6a708a'},children:\"No active offers.\"})]});}// Dedicated Sign In Page (gate to the app)\nfunction SignInPage(_ref6){let{onSignIn,onSignUp,onResetPin}=_ref6;const[mode,setMode]=useState('signin');// 'signin' | 'signup' | 'reset'\nconst[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[dob,setDob]=useState('');const[sex,setSex]=useState('');const[phone,setPhone]=useState('');const[email,setEmail]=useState('');const[pin,setPin]=useState('');const[confirmPin,setConfirmPin]=useState('');const[awaitingCode,setAwaitingCode]=useState(false);const[code,setCode]=useState('');const[showPin,setShowPin]=useState(false);const isValidEmail=e=>/^\\S+@\\S+\\.\\S+$/.test(e);const isValidPin=p=>/^\\d{4,6}$/.test(p);const isValidPhone=p=>/^(07\\d{8}|011\\d{7})$/.test(p);const isValidDob=d=>{const y=new Date(d).getFullYear();const cy=new Date().getFullYear();return Number.isFinite(y)&&y>=1900&&y<=cy;};function submit(e){e.preventDefault();if(mode==='signin'){if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!isValidPin(pin)){alert('Enter a 4-6 digit PIN.');return;}onSignIn(email,pin);}else if(mode==='signup'&&!awaitingCode){if(!firstName.trim()){alert('Please enter your first name.');return;}if(!lastName.trim()){alert('Please enter your last name.');return;}if(!isValidDob(dob)){alert('Please select a valid date of birth.');return;}if(!sex){alert('Please select your sex.');return;}if(!isValidPhone(phone)){alert('Enter phone as 07XXXXXXXX or 011XXXXXXX.');return;}if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!isValidPin(pin)){alert('Enter a 4-6 digit PIN.');return;}if(pin!==confirmPin){alert('PINs do not match.');return;}const yob=new Date(dob).getFullYear();// Init registration, send confirmation code\nfetch('/api/auth/register-init',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName:firstName.trim(),lastName:lastName.trim(),yob,sex,phone,email,pin})}).then(async res=>{var _data;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused){}throw new Error(((_data=data)===null||_data===void 0?void 0:_data.error)||'Failed to send confirmation code');}).then(()=>{setAwaitingCode(true);}).catch(err=>alert(err.message));}else if(mode==='signup'&&awaitingCode){if(!isValidEmail(email)){alert('Please enter a valid email.');return;}if(!code||code.length!==6){alert('Enter the 6-digit confirmation code.');return;}fetch('/api/auth/register-verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,code})}).then(async res=>{var _data2;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused2){}throw new Error(((_data2=data)===null||_data2===void 0?void 0:_data2.error)||'Failed to verify code');}).then(()=>{const yob=new Date(dob).getFullYear();onSignUp({firstName:firstName.trim(),lastName:lastName.trim(),yob,sex,phone,email,pin});}).catch(err=>alert(err.message));}else{if(!isValidEmail(email)){alert('Please enter a valid email.');return;}onResetPin(email);}}const cardStyle={background:'#fff',borderRadius:16,boxShadow:'0 12px 30px rgba(0,0,0,0.10)',border:'1px solid #e6e8eb',padding:'2rem 1.75rem',width:'92vw',maxWidth:520,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif'};const titleStyle={fontSize:26,fontWeight:700,color:'#0f172a',margin:'0 0 16px 0',letterSpacing:0.2};const fieldStyle={width:'100%',border:'1px solid #ddd',borderRadius:10,padding:'12px 14px',fontSize:16,outline:'none',margin:'10px 0',background:'#f7f7fa',boxSizing:'border-box',display:'block',maxWidth:'100%'};const primaryBtn={width:'100%',background:'#ffb300',color:'#222',border:'none',borderRadius:12,padding:'12px 16px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #1a223633',marginTop:12};const linkStyle={color:'#ffb300',background:'transparent',border:'none',padding:0,margin:0,cursor:'pointer',fontSize:14,textDecoration:'underline'};const pinWrapStyle={position:'relative',width:'100%',overflow:'hidden'};const pinToggleStyle={position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'transparent',border:'none',color:'#ffb300',cursor:'pointer',padding:0,display:'flex',alignItems:'center',justifyContent:'center',width:24,height:24,lineHeight:0};const pinFieldStyle=_objectSpread(_objectSpread({},fieldStyle),{},{paddingRight:'48px'});return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',width:'100vw',display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',gap:16,background:'#f7f7fa',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a2236',fontWeight:800,fontSize:30,letterSpacing:0.5,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif',textAlign:'center'},children:\"Floki's\"}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"div\",{style:titleStyle,children:mode==='signin'?'Login':mode==='signup'?'Register':'Reset PIN'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[mode==='signup'&&!awaitingCode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First Name\",value:firstName,onChange:e=>setFirstName(e.target.value),style:fieldStyle,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last Name\",value:lastName,onChange:e=>setLastName(e.target.value),style:fieldStyle,required:true})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Date of Birth\",value:dob,onChange:e=>setDob(e.target.value),style:fieldStyle,required:true,max:new Date().toISOString().slice(0,10)}),/*#__PURE__*/_jsxs(\"select\",{value:sex,onChange:e=>setSex(e.target.value),style:fieldStyle,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sex\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",inputMode:\"tel\",placeholder:\"Tel (07XXXXXXXX or 011XXXXXXX)\",value:phone,onChange:e=>setPhone(e.target.value.replace(/[^0-9]/g,'').slice(0,10)),style:fieldStyle,required:true,maxLength:10})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:fieldStyle,required:true}),mode!=='reset'&&/*#__PURE__*/_jsxs(\"div\",{style:pinWrapStyle,children:[/*#__PURE__*/_jsx(\"input\",{type:showPin?'text':'password',inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:mode==='signin'?'PIN':'Choose PIN',value:pin,onChange:e=>setPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:pinFieldStyle,autoComplete:\"one-time-code\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"Toggle PIN visibility\",onClick:()=>setShowPin(s=>!s),style:pinToggleStyle,children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:showPin?/*#__PURE__*/_jsx(\"path\",{d:\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\",stroke:\"#ffb300\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}):/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\",fill:\"#ffb300\"})})})]}),mode==='signup'&&!awaitingCode&&/*#__PURE__*/_jsxs(\"div\",{style:pinWrapStyle,children:[/*#__PURE__*/_jsx(\"input\",{type:showPin?'text':'password',inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:\"Confirm PIN\",value:confirmPin,onChange:e=>setConfirmPin(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),required:true,style:pinFieldStyle,autoComplete:\"one-time-code\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"Toggle PIN visibility\",onClick:()=>setShowPin(s=>!s),style:pinToggleStyle,children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:showPin?/*#__PURE__*/_jsx(\"path\",{d:\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\",stroke:\"#ffb300\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}):/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\",fill:\"#ffb300\"})})})]}),mode==='signup'&&awaitingCode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:pinWrapStyle,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",pattern:\"[0-9]*\",placeholder:\"Enter Confirmation Code\",value:code,onChange:e=>setCode(e.target.value.replace(/[^0-9]/g,'').slice(0,6)),style:fieldStyle,required:true,maxLength:6})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:14},children:\"A confirmation code was sent to your email.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:linkStyle,onClick:()=>{const yobVal=new Date(dob).getFullYear();fetch('/api/auth/register-init',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName:firstName.trim(),lastName:lastName.trim(),yob:yobVal,sex,phone,email,pin})}).then(async res=>{var _data3;if(res.ok)return res.json();let data;try{data=await res.json();}catch(_unused3){}throw new Error(((_data3=data)===null||_data3===void 0?void 0:_data3.error)||'Failed to resend code');}).then(()=>alert('Code resent')).catch(err=>alert(err.message));},children:\"Resend Code\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:primaryBtn,children:mode==='signin'?'Log In':mode==='signup'?awaitingCode?'Verify Code':'Send Code':'Send Reset Link'})]}),mode==='signup'&&awaitingCode&&null,/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[mode==='signin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signup'),style:linkStyle,children:\"Register\"})]}),mode==='signup'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Already have an account?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signin'),style:linkStyle,children:\"Sign In\"})]}),mode==='reset'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:14},children:\"Remember your PIN?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('signin'),style:linkStyle,children:\"Sign In\"})]})]}),mode==='signin'&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,textAlign:'right'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMode('reset'),style:linkStyle,children:\"Forgot PIN?\"})})]})]});}function App(){// Auth modal states\nconst[showSignIn,setShowSignIn]=useState(false);// no longer auto-opened; kept for future use if needed\nconst[showSignOut,setShowSignOut]=useState(false);const[user,setUser]=useState(null);// Persist user session across refreshes\nReact.useEffect(()=>{try{const raw=typeof localStorage!=='undefined'?localStorage.getItem('clientUser'):null;if(raw){const saved=JSON.parse(raw);if(saved&&saved.email){setUser(saved);setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:saved.name||prev.name,email:saved.email,phone:saved.phone||prev.phone}));}}}catch(_unused4){}},[]);function handleSignIn(email,pin){if(!email||!/^\\S+@\\S+\\.\\S+$/.test(email)){alert('Please enter a valid email.');return;}if(!pin||!/^\\d{4,6}$/.test(pin)){alert('Please enter a 4-6 digit PIN.');return;}fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,pin})}).then(res=>res.ok?res.json():res.json().then(d=>Promise.reject(new Error(d.error||'Login failed')))).then(data=>{var _data$user,_data$user2,_data$user3;// Persist name and phone from backend when available\nconst nextUser={email:((_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.email)||email,name:((_data$user2=data.user)===null||_data$user2===void 0?void 0:_data$user2.name)||undefined,phone:((_data$user3=data.user)===null||_data$user3===void 0?void 0:_data$user3.phone)||undefined};setUser(nextUser);try{if(typeof localStorage!=='undefined')localStorage.setItem('clientUser',JSON.stringify(nextUser));}catch(_unused5){}// Keep profile in sync for downstream usage\nsetProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:nextUser.name||prev.name,email:nextUser.email,phone:nextUser.phone||prev.phone}));setShowSignIn(false);}).catch(err=>alert(err.message));}function handleSignUp(_ref7){let{firstName,lastName,yob,sex,phone,email,pin}=_ref7;if(!email||!pin||pin.length<4||pin.length>6){alert('Please enter a valid email and 4-6 digit PIN.');return;}const nowYear=new Date().getFullYear();const age=String(nowYear-Number(yob));let formattedPhone=phone;if(/^(07\\d{8}|011\\d{7})$/.test(phone)){formattedPhone='+254'+phone.slice(1);}// Finalize locally: profile prefill and sign-in (backend persistence already done on verify)\nconst fullName=\"\".concat(firstName,\" \").concat(lastName).trim();setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{name:fullName,age,sex,phone:formattedPhone,email}));// Reflect name in the signed-in state immediately and persist\nconst nextUser={email,name:fullName,phone:formattedPhone};setUser(nextUser);try{if(typeof localStorage!=='undefined')localStorage.setItem('clientUser',JSON.stringify(nextUser));}catch(_unused6){}}function handleResetPin(email){if(!/^\\S+@\\S+\\.\\S+$/.test(email)){alert('Please enter a valid email.');return;}fetch('/api/auth/reset-pin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})}).then(res=>res.ok?res.json():Promise.reject(new Error('Failed to send reset email'))).then(()=>alert('Reset instructions have been sent to '+email)).catch(err=>alert(err.message));}function handleSignOut(){setUser(null);setShowSignOut(false);try{if(typeof localStorage!=='undefined')localStorage.removeItem('clientUser');}catch(_unused7){}// Prompt sign-in again after signing out\nsetShowSignIn(true);}const[trackOrders,setTrackOrders]=useState([]);function handleCheckoutComplete(orderItems,deliveryType,grandTotal,orderId){const paymentMethod=order.payment||'Cash';setTrackOrders(prev=>[...prev,{id:orderId,items:orderItems,deliveryType,total:grandTotal,date:new Date(),status:'Pending',paymentMethod,canCancel:true}]);setCart([]);setPage('track');// Set timeout to disable cancel after 1 minute\nsetTimeout(()=>{setTrackOrders(prev=>prev.map((order,idx)=>{if(idx===prev.length-1){return _objectSpread(_objectSpread({},order),{},{canCancel:false});}return order;}));},60000);}const[showCheckout,setShowCheckout]=useState(false);const[emailConfirmed,setEmailConfirmed]=useState(false);const[emailConfirmationMsg,setEmailConfirmationMsg]=useState('');const validateEmail=email=>/^\\S+@\\S+\\.\\S+$/.test(email);const[lastSavedEmail,setLastSavedEmail]=useState('');React.useEffect(()=>{setLastSavedEmail(profile.email);},[]);// Remove auto-open modal sign-in; gating is handled via SignInPage\nconst[profileWarning,setProfileWarning]=useState('');const[profileMapOpen,setProfileMapOpen]=useState(false);const[profileEditing,setProfileEditing]=useState(true);// Placeholder: Replace with actual user account info from auth/profile\nconst[profile,setProfile]=useState({name:'',age:'',sex:'',phone:'',email:'',allergies:'',address:''});const[page,setPage]=useState('menu');const[orderFood,setOrderFood]=useState(null);const[orderPlaced,setOrderPlaced]=useState(false);const[tracking,setTracking]=useState(false);const[order,setOrder]=useState({name:profile.name,phone:profile.phone,address:profile.address,payment:'Cash',location:{lat:null,lng:null}});const[selectedCategory,setSelectedCategory]=useState('breakfast');const[showMap,setShowMap]=useState(false);const[instructions,setInstructions]=useState({utensils:[],condiments:[],notes:''});const[cart,setCart]=useState([]);const[cartNotification,setCartNotification]=useState('');// System notification helper\nfunction notify(title,body){try{if(typeof window==='undefined'||!('Notification'in window))return;if(Notification.permission==='granted'){new Notification(title,{body});}}catch(_unused8){}}React.useEffect(()=>{try{if(typeof window!=='undefined'&&'Notification'in window&&Notification.permission==='default'){Notification.requestPermission().catch(()=>{});}}catch(_unused9){}},[]);function handleOrder(food){if(!user){// Gate prevents reaching here if not signed-in\nreturn;}setOrderFood(food);setPage('instructions');}function handleInstructionsSubmit(instr){// Immediately add item to cart and return to menu\nconst utensilPrices={Spoon:20,Plate:50,Cup:20};const utensilCost=instr.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const qty=instr.qty||1;const unitPrice=orderFood.offerActive&&orderFood.offerPercent>0?Math.round(orderFood.price*(1-orderFood.offerPercent/100)):orderFood.price;const total=qty*unitPrice+utensilCost;setCart([...cart,{id:orderFood.id,name:orderFood.name,qty,price:unitPrice,offerActive:!!orderFood.offerActive,offerPercent:Number(orderFood.offerPercent||0),utensils:instr.utensils,condiments:instr.condiments,notes:instr.notes,deliveryNotes:instr.deliveryNotes,utensilCost,total,img:orderFood.img}]);// Compose notification listing what was added\nlet notif=\"\".concat(qty,\" x \").concat(orderFood.name);if(instr.utensils.length)notif+=\", Utensils: \".concat(instr.utensils.join(', '));if(instr.condiments.length)notif+=\", Condiments: \".concat(instr.condiments.join(', '));if(instr.notes)notif+=\", Notes: \".concat(instr.notes);if(instr.deliveryNotes)notif+=\", Delivery: \".concat(instr.deliveryNotes);notify('Added to cart',notif);setCartNotification(\"\".concat(notif,\" added to cart.\"));setTimeout(()=>setCartNotification(''),2200);setPage('menu');setOrderFood(null);setInstructions({utensils:[],condiments:[],notes:''});// Reset MenuPage selectingQty state if needed\nif(typeof window!=='undefined'){setTimeout(()=>{const evt=new CustomEvent('resetSelectingQty');window.dispatchEvent(evt);},250);}}function handleOrderSubmit(e){e.preventDefault();// Add item to cart and skip name/location module\nconst utensilPrices={Spoon:20,Plate:50,Cup:20};const utensilCost=instructions.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const qty=orderFood.qty||instructions.qty||1;const unitPrice=orderFood.offerActive&&orderFood.offerPercent>0?Math.round(orderFood.price*(1-orderFood.offerPercent/100)):orderFood.price;const total=qty*unitPrice+utensilCost;setCart([...cart,{id:orderFood.id,name:orderFood.name,qty,price:unitPrice,offerActive:!!orderFood.offerActive,offerPercent:Number(orderFood.offerPercent||0),utensils:instructions.utensils,condiments:instructions.condiments,notes:instructions.notes,deliveryNotes:instructions.deliveryNotes,utensilCost,total,img:orderFood.img}]);// Compose notification listing what was added\nlet notif=\"\".concat(qty,\" x \").concat(orderFood.name);if(instructions.utensils.length)notif+=\", Utensils: \".concat(instructions.utensils.join(', '));if(instructions.condiments.length)notif+=\", Condiments: \".concat(instructions.condiments.join(', '));if(instructions.notes)notif+=\", Notes: \".concat(instructions.notes);if(instructions.deliveryNotes)notif+=\", Delivery: \".concat(instructions.deliveryNotes);setCartNotification(\"\".concat(notif,\" added to cart.\"));setTimeout(()=>setCartNotification(''),2200);setPage('menu');setOrderFood(null);setInstructions({utensils:[],condiments:[],notes:''});// Reset MenuPage selectingQty state if needed\nif(typeof window!=='undefined'){setTimeout(()=>{const evt=new CustomEvent('resetSelectingQty');window.dispatchEvent(evt);},250);}}function handleLocationChange(){// Placeholder: Replace with actual map/location picker logic\nsetShowMap(true);}function handleMapSelect(lat,lng){setOrder(_objectSpread(_objectSpread({},order),{},{location:{lat,lng},address:\"Lat: \".concat(lat,\", Lng: \").concat(lng)}));setShowMap(false);}// Viking art background image (unsplash, semi-transparent overlay)\nconst vikingBg='https://images.unsplash.com/photo-1506744038136-462fa3a6a7f0?auto=format&fit=crop&w=1200&q=80';const[orders,setOrders]=useState([]);function handleOrderComplete(){if(cart.length>0){setOrders(prevOrders=>[...prevOrders,{items:cart,date:new Date(),status:'Placed'}]);setCart([]);setPage('orders');}else{setPage('orders');}}// Fetch menu and offers from backend for client app\nconst[clientMenu,setClientMenu]=useState([]);const[clientOffers,setClientOffers]=useState([]);const[loadingMenu,setLoadingMenu]=useState(false);const[loadingOffers,setLoadingOffers]=useState(false);const[menuError,setMenuError]=useState('');const[offersError,setOffersError]=useState('');const[hotelConfig,setHotelConfig]=useState({utensils:[],condiments:[]});React.useEffect(()=>{setLoadingMenu(true);setMenuError('');fetch('/api/admin/menu').then(async res=>{if(res.ok)return res.json();let text;try{text=await res.text();}catch(_unused0){}throw new Error(text||'Failed to load menu');}).then(data=>setClientMenu(Array.isArray(data)?data:[])).catch(err=>setMenuError(err.message)).finally(()=>setLoadingMenu(false));},[]);React.useEffect(()=>{setLoadingOffers(true);setOffersError('');fetch('/api/hotel/offers').then(async res=>{if(res.ok)return res.json();let text;try{text=await res.text();}catch(_unused1){}throw new Error(text||'Failed to load offers');}).then(data=>setClientOffers(Array.isArray(data)?data:[])).catch(err=>setOffersError(err.message)).finally(()=>setLoadingOffers(false));},[]);React.useEffect(()=>{fetch('/api/hotel/config').then(res=>res.ok?res.json():Promise.resolve({utensils:[],condiments:[]})).then(cfg=>setHotelConfig({utensils:Array.isArray(cfg.utensils)?cfg.utensils:[],condiments:Array.isArray(cfg.condiments)?cfg.condiments:[]})).catch(()=>setHotelConfig({utensils:[],condiments:[]}));},[]);// Gate: render SignInPage, but keep hooks above unconditional to preserve order\nif(!user){return/*#__PURE__*/_jsx(SignInPage,{onSignIn:handleSignIn,onSignUp:handleSignUp,onResetPin:handleResetPin});}function MenuWrapper(_ref8){let{selectedCategory,setSelectedCategory,handleOrder}=_ref8;// Map backend menu items into client categories\nconst foods=clientMenu.filter(i=>(i.category||'Foods')==='Foods');const byType={breakfast:foods.filter(i=>(i.type||'Breakfast')==='Breakfast'),brunch:foods.filter(i=>(i.type||'Breakfast')==='Brunch'),lunch:foods.filter(i=>(i.type||'Breakfast')==='Lunch'),dinner:foods.filter(i=>(i.type||'Breakfast')==='Dinner'),supper:foods.filter(i=>(i.type||'Breakfast')==='Supper'),specials:foods.filter(i=>(i.type||'')==='Specials')};// Map fields to the shape MenuPage expects, including averageRating and ratingCount\nconst mapItem=i=>({id:i._id,name:i.name,desc:i.description,price:i.price,img:i.image,rating:i.rating||undefined,averageRating:typeof i.averageRating==='number'?i.averageRating:typeof i.avgRating==='number'?i.avgRating:undefined,ratingCount:typeof i.ratingCount==='number'?i.ratingCount:undefined,ingredients:Array.isArray(i.ingredients)?i.ingredients:[],offerActive:!!i.offerActive,offerPercent:Number(i.offerPercent||0)});const menu=(byType[selectedCategory]||[]).map(mapItem);if(loadingMenu)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"});if(menuError)return/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson'},children:menuError});return/*#__PURE__*/_jsx(MenuPage,{menu:menu,handleOrder:handleOrder,selectedCategory:selectedCategory,setSelectedCategory:setSelectedCategory});}function OffersWrapper(){if(loadingOffers)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"});if(offersError)return/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson'},children:offersError});// Show any menu item with an active offer\nconst mapItem=i=>({id:i._id,name:i.name,desc:i.description,price:i.price,img:i.image,offerPercent:Number(i.offerPercent||0)});const offerItems=clientMenu.filter(i=>!!i.offerActive&&Number(i.offerPercent||0)>0).map(mapItem);return/*#__PURE__*/_jsx(OffersPage,{items:offerItems});}return/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:'Inter, Arial, sans-serif',minHeight:'100vh',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',zIndex:0,backgroundImage:\"url(\".concat(vikingBg,\")\"),backgroundSize:'cover',backgroundPosition:'center',opacity:0.35,filter:'blur(2px)'}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',zIndex:1,height:'100vh',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{position:'fixed',top:0,left:0,width:'100vw',maxWidth:'100vw',background:'rgba(26,34,54,0.98)',color:'#fff',padding:'1.2rem 1.2rem',display:'flex',alignItems:'center',justifyContent:'space-between',boxShadow:'0 2px 16px #0003',zIndex:10,borderRadius:0,fontSize:'1.2rem',flexWrap:'wrap',boxSizing:'border-box',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:24,letterSpacing:0.5,fontFamily:'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif',flexShrink:0},children:\"Floki's\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'auto',display:'flex',alignItems:'center',gap:18,marginRight:'0.5cm'},children:[/*#__PURE__*/_jsxs(\"nav\",{style:{display:'flex',flexWrap:'wrap',justifyContent:'flex-end',gap:18,fontSize:18,flexShrink:1,minWidth:0},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('menu'),style:{background:page==='menu'?'#ffb300':'transparent',color:page==='menu'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Menu\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('offers'),style:{background:page==='offers'?'#ffb300':'transparent',color:page==='offers'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Offers\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPage('cart'),style:{background:page==='cart'?'#ffb300':'transparent',color:page==='cart'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:[\"Cart\",cart.length>0?\" (\".concat(cart.length,\")\"):'']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('track'),style:{background:page==='track'?'#ffb300':'transparent',color:page==='track'?'#222':'#fff',border:'none',fontWeight:600,cursor:'pointer',fontSize:18,padding:'8px 14px',borderRadius:8,transition:'background 0.2s',whiteSpace:'nowrap',minWidth:0},children:\"Track\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('profile'),style:{background:'transparent',border:'none',cursor:'pointer',padding:0,display:'flex',alignItems:'center',justifyContent:'center',height:44,marginRight:'0.5cm'},\"aria-label\":\"Profile\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 32 32\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"16\",cy:\"16\",r:\"16\",fill:page==='profile'?'#ffb300':'#e0e0e0'}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"16\",cy:\"12\",rx:\"6\",ry:\"6\",fill:page==='profile'?'#222':'#888'}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"20\",width:\"16\",height:\"6\",rx:\"3\",fill:page==='profile'?'#222':'#888'})]})}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#fff',fontWeight:600,fontSize:17,marginRight:12},children:user.name||user.email}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSignOut(true),style:{background:'#e74c3c',color:'#fff',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,fontSize:16,cursor:'pointer',marginLeft:8},children:\"Log Out\"})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:{maxWidth:900,width:'95vw',margin:'6.5rem auto 0 auto',background:'rgba(255,255,255,0.92)',borderRadius:18,boxShadow:'0 2px 24px #0002',padding:'2.5rem',backdropFilter:'blur(2px)',height:'calc(100vh - 6.5rem)',overflowY:'auto',boxSizing:'border-box',position:'relative'},children:[cartNotification&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:32,right:32,background:'#ffb300',color:'#222',fontWeight:600,fontSize:18,borderRadius:8,padding:'12px 28px',boxShadow:'0 2px 8px #0002',zIndex:100,opacity:1,transition:'opacity 1s',animation:'fadeoutnotif 2.2s forwards'},children:[cartNotification,/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes fadeoutnotif {\\n                  0% { opacity: 1; }\\n                  80% { opacity: 1; }\\n                  100% { opacity: 0; }\\n                }\\n              \"})]}),page==='menu'&&/*#__PURE__*/_jsx(MenuWrapper,{selectedCategory:selectedCategory,setSelectedCategory:setSelectedCategory,handleOrder:handleOrder}),page==='instructions'&&orderFood&&/*#__PURE__*/_jsx(InstructionsPage,{food:orderFood,onSubmit:handleInstructionsSubmit,config:hotelConfig}),page==='track'&&/*#__PURE__*/_jsx(Track,{trackOrders:trackOrders,setTrackOrders:setTrackOrders,config:hotelConfig}),page==='offers'&&/*#__PURE__*/_jsx(OffersWrapper,{}),page==='cart'&&/*#__PURE__*/_jsx(CartPage,{cart:cart,setCart:setCart,setPage:setPage,config:hotelConfig}),page==='checkout'&&/*#__PURE__*/_jsx(CheckoutPage,{cart:cart,setPage:setPage,checkoutPayment:order.payment,setCheckoutPayment:p=>setOrder(_objectSpread(_objectSpread({},order),{},{payment:p})),setCart:setCart,profile:profile,userEmail:user===null||user===void 0?void 0:user.email,onCheckoutComplete:handleCheckoutComplete}),page==='profile'&&/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:420,margin:'2rem auto',background:'#fff',borderRadius:24,boxShadow:'0 4px 32px #0002',padding:'2.5rem',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:28,marginBottom:18},children:\"Profile\"}),/*#__PURE__*/_jsxs(\"form\",{style:{width:'100%'},onSubmit:e=>{e.preventDefault();if(!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address){setProfileWarning('Please fill all fields before saving.');return;}if(!validateEmail(profile.email)){setProfileWarning('Please enter a valid email address.');return;}setProfileEditing(false);setProfileWarning('');// If email changed, simulate sending confirmation\nif(profile.email!==lastSavedEmail){setEmailConfirmationMsg('A confirmation email has been sent to '+profile.email+'. Please check your inbox to confirm your email address.');setEmailConfirmed(false);setLastSavedEmail(profile.email);}else{setEmailConfirmationMsg('');}},children:[emailConfirmationMsg&&!emailConfirmed&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#1a2236',fontWeight:600,fontSize:16,marginBottom:12,background:'#fffbe6',borderRadius:8,padding:'10px 18px',border:'1px solid #ffe082'},children:[emailConfirmationMsg,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEmailConfirmed(true),style:{marginLeft:12,background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Confirm Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Name\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profile.name,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{name:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.name&&profileEditing?'red':'#ccc',background:!profile.name&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Full Name\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Age\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profile.age,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{age:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.age&&profileEditing?'red':'#ccc',background:!profile.age&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Age\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Sex\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsxs(\"select\",{value:profile.sex,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{sex:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.sex&&profileEditing?'red':'#ccc',background:!profile.sex&&profileEditing?'#fff0f0':'#fff'}),required:true,disabled:!profileEditing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Phone\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:profile.phone,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{phone:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.phone&&profileEditing?'red':'#ccc',background:!profile.phone&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Phone Number\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Email\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:profile.email,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{email:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.email&&profileEditing?'red':'#ccc',background:!profile.email&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Email Address\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Allergies\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsx(\"textarea\",{value:profile.allergies,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{allergies:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{borderColor:!profile.allergies&&profileEditing?'red':'#ccc',background:!profile.allergies&&profileEditing?'#fff0f0':'#fff'}),placeholder:\"Any allergies?\",required:true,disabled:!profileEditing})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:[\"Address\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\" *\"}),\":\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profile.address,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{address:e.target.value})),style:_objectSpread(_objectSpread({},inputStyle),{},{flex:1,borderColor:!profile.address&&profileEditing?'red':'#ccc',background:!profile.address&&profileEditing?'#fff0f0':'#fff'}),required:true,disabled:!profileEditing}),profileEditing&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setProfileMapOpen(true),style:{background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'8px 16px',fontWeight:600,cursor:'pointer',fontSize:16},children:\"Location\"})]})]}),profileMapOpen&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.5)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:16,padding:'2.5rem 2rem',maxWidth:480,width:'auto',boxShadow:'0 4px 32px #0003',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:24,fontWeight:700,color:'#1a2236',marginBottom:12},children:\"Select Location\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:18,width:'100%',maxWidth:400,height:300},children:[/*#__PURE__*/_jsx(\"iframe\",{title:\"Google Map\",width:\"100%\",height:\"300\",style:{borderRadius:8,border:'none'},src:\"https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=Kisii,Kenya\",allowFullScreen:true}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:15,marginTop:8},children:\"Drag map and click 'Set Location' to save.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfileMapOpen(false),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'10px 28px',fontWeight:600,cursor:'pointer',fontSize:17},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Simulate setting location, you can integrate with map click event for real coordinates\nsetProfile(_objectSpread(_objectSpread({},profile),{},{address:'Lat: -1.2921, Lng: 36.8219'}));setProfileMapOpen(false);},style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:8,padding:'10px 28px',fontWeight:600,cursor:'pointer',fontSize:17},children:\"Set Location\"})]})]})}),profileEditing?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:12,background:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address?'#ccc':'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address?'not-allowed':'pointer',width:'100%'},disabled:!profile.name||!profile.age||!profile.sex||!profile.phone||!profile.email||!profile.allergies||!profile.address,children:\"Save Profile\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setProfileEditing(true),style:{marginTop:12,background:'#ffb300',color:'#222',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPage('menu'),style:{marginTop:12,background:'#e0e0e0',color:'#222',border:'none',borderRadius:10,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},children:\"Back to Menu\"})]})]})]})]}),/*#__PURE__*/_jsx(SignOutModal,{open:showSignOut,onClose:()=>setShowSignOut(false),onSignOut:handleSignOut})]});}function InstructionsPage(_ref9){let{food,onSubmit,config}=_ref9;const[utensils,setUtensils]=useState([]);const[condiments,setCondiments]=useState([]);const[notes,setNotes]=useState('');const[deliveryNotes,setDeliveryNotes]=useState('');const[qty,setQty]=useState(food.quantity||1);const availableCondiments=Array.isArray(config===null||config===void 0?void 0:config.condiments)?config.condiments:[];const availableUtensils=Array.isArray(config===null||config===void 0?void 0:config.utensils)?config.utensils:[];const utensilPrices={Spoon:20,Plate:50,Cup:20};function toggleUtensil(ut){setUtensils(utensils.includes(ut)?utensils.filter(u=>u!==ut):[...utensils,ut]);}function addCondiment(cond){setCondiments([...condiments,cond]);}function removeCondiment(idx){setCondiments(condiments.filter((_,i)=>i!==idx));}function handleSubmit(e){e.preventDefault();onSubmit({utensils,condiments,notes,deliveryNotes,qty});}const utensilCost=utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const total=qty*food.price+utensilCost;return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:520,margin:'2rem auto',background:'#fff',borderRadius:24,boxShadow:'0 4px 32px #0002',padding:'2.5rem',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"img\",{src:food.img||'https://via.placeholder.com/180?text=No+Image',alt:food.name,style:{width:180,height:180,objectFit:'cover',borderRadius:16,marginBottom:18,boxShadow:'0 2px 12px #0001'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:30,marginBottom:8,color:'#1a2236',letterSpacing:1},children:food.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:12,fontSize:18},children:food.desc}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ffb300',fontSize:22,marginBottom:6},children:[\"Ksh \",food.price]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f39c12',fontWeight:600,fontSize:17,marginBottom:18},children:[\"Rating: \",food.rating,\" \\u2605\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:'100%'},children:[availableUtensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Utensils Needed:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:18,marginBottom:8,flexWrap:'wrap'},children:availableUtensils.map(ut=>/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:utensils.includes(ut),onChange:()=>toggleUtensil(ut),style:{accentColor:'#ffb300',width:18,height:18}}),\" \",ut,utensilPrices[ut]?/*#__PURE__*/_jsxs(\"span\",{style:{color:'#888',fontSize:14,marginLeft:4},children:[\"+\",utensilPrices[ut],\" Ksh\"]}):null]},ut))}),utensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#1a2236',fontWeight:500,fontSize:15,marginTop:6},children:[\"Utensil cost: \",/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ffb300',fontWeight:700},children:[utensilCost,\" Ksh\"]})]})]}),availableCondiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Condiments:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,flexWrap:'wrap',marginBottom:8},children:availableCondiments.map(cond=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>addCondiment(cond),style:{background:'#f7f7fa',color:'#222',border:'1px solid #ddd',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:16,boxShadow:'0 1px 4px #0001'},children:[cond,\" +\"]},cond))}),/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:12,paddingLeft:18},children:condiments.map((cond,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{color:'#555',fontSize:15,marginBottom:6},children:[cond,\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCondiment(idx),style:{marginLeft:8,background:'#ffb300',color:'#222',border:'none',borderRadius:6,padding:'2px 8px',fontWeight:600,cursor:'pointer',fontSize:14},children:\"Remove\"})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Additional Notes:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:notes,onChange:e=>setNotes(e.target.value),style:{width:'100%',minHeight:60,borderRadius:10,border:'1px solid #ccc',fontSize:16,padding:10,background:'#f7f7fa',marginTop:4},placeholder:\"Any special instructions?\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8,color:'#1a2236'},children:\"Delivery Instructions (for courier):\"}),/*#__PURE__*/_jsx(\"textarea\",{value:deliveryNotes,onChange:e=>setDeliveryNotes(e.target.value),style:{width:'100%',minHeight:60,borderRadius:10,border:'1px solid #ccc',fontSize:16,padding:10,background:'#f7f7fa',marginTop:4},placeholder:\"e.g., Call on arrival, gate code, landmarks\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24,display:'flex',alignItems:'center',justifyContent:'center',gap:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:'#1a2236'},children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setQty(qty>1?qty-1:1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,cursor:'pointer',fontSize:20,boxShadow:'0 1px 4px #0001'},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{style:{margin:'0 12px',fontWeight:700,fontSize:20},children:qty}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setQty(qty+1),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:8,padding:'8px 18px',fontWeight:700,cursor:'pointer',fontSize:20,boxShadow:'0 1px 4px #0001'},children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'14px 28px',fontWeight:700,fontSize:18,cursor:'pointer',marginTop:8,boxShadow:'0 2px 8px #0002',width:'100%'},children:\"Add to Cart (\".concat(qty,\") \").concat(total.toLocaleString(),\" Kshs\")})]})]});}function CartPage(_ref0){let{cart,setCart,setPage,config}=_ref0;// Checkout popup state removed. Dedicated page is used.\nconst[editingIdx,setEditingIdx]=useState(null);const[editItem,setEditItem]=useState(null);const[deleteIdx,setDeleteIdx]=useState(null);const utensilPrices={Spoon:20,Plate:50,Cup:20};const availableCondiments=Array.isArray(config===null||config===void 0?void 0:config.condiments)?config.condiments:[];function handleDelete(idx){setDeleteIdx(idx);}function confirmDelete(){setCart(cart.filter((_,i)=>i!==deleteIdx));setDeleteIdx(null);}function cancelDelete(){setDeleteIdx(null);}function handleEdit(idx){setEditingIdx(idx);setEditItem(_objectSpread({},cart[idx]));}function handleEditChange(field,value){setEditItem(_objectSpread(_objectSpread({},editItem),{},{[field]:value}));}function toggleUtensil(ut){setEditItem(_objectSpread(_objectSpread({},editItem),{},{utensils:editItem.utensils.includes(ut)?editItem.utensils.filter(u=>u!==ut):[...editItem.utensils,ut]}));}function addCondiment(cond){setEditItem(_objectSpread(_objectSpread({},editItem),{},{condiments:[...editItem.condiments,cond]}));}function removeCondiment(idx){setEditItem(_objectSpread(_objectSpread({},editItem),{},{condiments:editItem.condiments.filter((_,i)=>i!==idx)}));}function handleSaveEdit(){const utensilCost=editItem.utensils.reduce((sum,ut)=>sum+(utensilPrices[ut]||0),0);const total=editItem.qty*editItem.price+utensilCost;setCart(cart.map((item,idx)=>idx===editingIdx?_objectSpread(_objectSpread({},editItem),{},{utensilCost,total}):item));setEditingIdx(null);setEditItem(null);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',marginBottom:18},children:\"Cart\"}),cart.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:18},children:\"Cart is empty.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0},children:cart.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:14,display:'flex',alignItems:'center',background:'#f7f7fa',borderRadius:10,padding:'12px 14px',boxShadow:'0 1px 6px #0001'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:700,fontSize:18,color:'#ffb300',marginRight:16},children:[idx+1,\".\"]}),/*#__PURE__*/_jsx(\"img\",{src:item.img||'https://via.placeholder.com/40?text=No+Image',alt:item.name,style:{width:48,height:48,objectFit:'cover',borderRadius:10,marginRight:16}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:18,color:'#1a2236'},children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#555',fontSize:15},children:[\"Qty: \",item.qty]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ffb300',fontSize:16,marginTop:2},children:[item.total,\" Ksh\"]}),item.utensils&&item.utensils.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Utensils: \",item.utensils.join(', ')]}),item.condiments&&item.condiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Condiments: \",item.condiments.join(', ')]}),item.notes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Notes: \",item.notes]}),item.deliveryNotes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14},children:[\"Delivery: \",item.deliveryNotes]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(idx),style:{marginLeft:12,background:'#ffb300',color:'#222',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(idx),style:{marginLeft:8,background:'#e74c3c',color:'#fff',border:'none',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:15},children:\"Delete\"})]},idx))}),editingIdx!==null&&editItem&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(26,34,54,0.55)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',backdropFilter:'blur(2px)',overflow:'hidden',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:24,padding:'2.5rem',maxWidth:420,width:'90vw',boxShadow:'0 8px 32px #1a223633',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto',border:'2px solid #ffb300',animation:'popin 0.25s',overflow:'visible',position:'absolute',top:'50%',left:'calc(50% - 6cm)',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:24,fontWeight:700,color:'#1a2236',marginBottom:18},children:\"Edit Item\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,value:editItem.qty,onChange:e=>handleEditChange('qty',Number(e.target.value)),style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #ccc',fontSize:16,marginTop:6}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Notes:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editItem.notes||'',onChange:e=>handleEditChange('notes',e.target.value),style:{width:'100%',minHeight:60,borderRadius:8,border:'1px solid #ccc',fontSize:16,padding:10,marginTop:6}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Utensils:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:12,marginTop:6},children:['Spoon','Plate','Cup'].map(ut=>/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:500,display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:editItem.utensils&&editItem.utensils.includes(ut),onChange:()=>toggleUtensil(ut),style:{accentColor:'#ffb300',width:18,height:18}}),\" \",ut]},ut))})]}),availableCondiments.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600,color:'#1a2236',fontSize:18},children:\"Condiments:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:10,flexWrap:'wrap',marginTop:6},children:availableCondiments.map(cond=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>addCondiment(cond),style:{background:'#f7f7fa',color:'#222',border:'1px solid #ddd',borderRadius:8,padding:'6px 16px',fontWeight:600,cursor:'pointer',fontSize:16,boxShadow:'0 1px 4px #0001'},children:[cond,\" +\"]},cond))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%',marginTop:18},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveEdit,style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'12px 32px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #0002',transition:'background 0.2s'},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingIdx(null);setEditItem(null);},style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:10,padding:'12px 32px',fontWeight:700,fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px #0001',transition:'background 0.2s'},children:\"Cancel\"})]})]})}),deleteIdx!==null&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n            body.modal-open {\\n              overflow: hidden !important;\\n            }\\n          \"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(26,34,54,0.55)',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',backdropFilter:'blur(2px)',overflow:'hidden',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #fff 80%, #ffb300 100%)',borderRadius:24,padding:'3rem 2.5rem',maxWidth:420,width:'90vw',boxShadow:'0 8px 32px #1a223633',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',margin:'auto',border:'2px solid #ffb300',animation:'popin 0.25s',overflow:'visible',position:'absolute',top:'50%',left:'calc(50% - 6.5cm)',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes popin {\\n                  0% { transform: scale(0.95); opacity: 0.7; }\\n                  100% { transform: scale(1); opacity: 1; }\\n                }\\n              \"}),/*#__PURE__*/_jsx(\"div\",{style:{width:64,height:64,borderRadius:'50%',background:'#ffb300',display:'flex',alignItems:'center',justifyContent:'center',marginBottom:18,boxShadow:'0 2px 8px #ffb30044'},children:/*#__PURE__*/_jsxs(\"svg\",{width:\"36\",height:\"36\",viewBox:\"0 0 36 36\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"18\",cy:\"18\",r:\"18\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 24l12-12M24 24L12 12\",stroke:\"#e74c3c\",strokeWidth:\"3\",strokeLinecap:\"round\"})]})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,fontSize:26,fontWeight:700,color:'#1a2236',marginBottom:10,letterSpacing:1},children:\"Remove Item?\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:18,color:'#555',marginBottom:22,textAlign:'center',maxWidth:320},children:\"Are you sure you want to remove this item from your cart? This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,justifyContent:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelDelete,style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:12,padding:'12px 32px',fontWeight:700,cursor:'pointer',fontSize:18,boxShadow:'0 2px 8px #0001',transition:'background 0.2s'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDelete,style:{background:'linear-gradient(90deg, #e74c3c 80%, #ffb300 100%)',color:'#fff',border:'none',borderRadius:12,padding:'12px 32px',fontWeight:700,cursor:'pointer',fontSize:18,boxShadow:'0 2px 8px #e74c3c33',transition:'background 0.2s'},children:\"Delete\"})]})]})})]}),cart.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24,padding:'18px',background:'#f7f7fa',borderRadius:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,marginBottom:12},children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:20,color:'#ffb300'},children:[\"Grand Total: \",cart.reduce((sum,item)=>sum+item.total,0),\" Ksh\"]}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:18,background:'#1a2236',color:'#fff',border:'none',borderRadius:10,padding:'14px 28px',fontWeight:700,fontSize:18,cursor:'pointer',width:'100%'},onClick:()=>setPage('checkout'),children:\"Checkout\"})]})]});}function CheckoutPage(_ref1){let{cart,setPage,checkoutPayment,setCheckoutPayment,onCheckoutComplete,profile,userEmail}=_ref1;const[deliveryType,setDeliveryType]=React.useState('');const[cardDetails,setCardDetails]=React.useState({number:'',name:'',expiry:'',cvv:''});const[processing,setProcessing]=React.useState(false);const[successMsg,setSuccessMsg]=React.useState('');const[errorMsg,setErrorMsg]=React.useState('');const[mpesaStatus,setMpesaStatus]=React.useState('');const[mpesaNumber,setMpesaNumber]=React.useState('');const[mpesaPushed,setMpesaPushed]=React.useState(false);const baseTotal=cart.reduce((sum,item)=>sum+item.total,0);const deliveryFee=deliveryType==='Delivery'?50:0;const grandTotal=baseTotal+deliveryFee;function handleCardInput(e){const{name,value}=e.target;setCardDetails(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}function isValidMpesaNumber(num){return /^(07\\d{8}|011\\d{7})$/.test(num);}async function handleMpesaPush(){setErrorMsg('');setMpesaStatus('Initiating M-Pesa payment...');setProcessing(true);try{let phone=mpesaNumber;if(phone.startsWith('0'))phone='254'+phone.slice(1);const res=await fetch('/api/mpesa/stkpush',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:grandTotal,phone})});const data=await res.json();if(data.error)throw new Error(data.error.message||data.error);setMpesaStatus('STK Push sent. Enter your M-Pesa PIN.');setMpesaPushed(true);setProcessing(false);}catch(err){setErrorMsg('M-Pesa error: '+err.message);setProcessing(false);setMpesaStatus('');}}async function handlePlaceOrder(){setErrorMsg('');if(cart.length===0){setErrorMsg('Cart is empty.');return;}if(!deliveryType){setErrorMsg('Please select Pickup or Delivery.');return;}if(checkoutPayment==='M-Pesa'&&!mpesaPushed){setErrorMsg('Please push M-Pesa first.');return;}setProcessing(true);const payload={items:cart.map(item=>({menuItem:item.id,quantity:item.qty})),clientEmail:(profile===null||profile===void 0?void 0:profile.email)||userEmail||'',clientName:profile!==null&&profile!==void 0&&profile.name&&profile.name.trim()?profile.name.trim():(profile===null||profile===void 0?void 0:profile.email)||userEmail||'',clientPhone:(profile===null||profile===void 0?void 0:profile.phone)||'',deliveryAddress:(profile===null||profile===void 0?void 0:profile.address)||'',deliveryType,status:'pending',total:grandTotal,paymentStatus:checkoutPayment==='Card'?'paid':'pending'};try{const res=await fetch('/api/hotel/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(!res.ok||data.error)throw new Error(data.error||'Failed to place order');setSuccessMsg(\"Order placed! Grand Total: \".concat(grandTotal,\" Ksh\"));setProcessing(false);onCheckoutComplete&&onCheckoutComplete(cart.map(item=>_objectSpread({},item)),deliveryType,grandTotal,data._id);}catch(err){setErrorMsg(err.message);setProcessing(false);}}React.useEffect(()=>{if(successMsg){const t=setTimeout(()=>{setPage('track');},2200);return()=>clearTimeout(t);}},[successMsg,setPage]);return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:600,margin:'4rem auto',background:'#fff',borderRadius:24,boxShadow:'0 6px 32px #0003',padding:'3rem 2.5rem',display:'flex',flexDirection:'column',alignItems:'center',minHeight:420},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',fontWeight:700,fontSize:34,marginBottom:24,letterSpacing:1},children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:700,fontSize:20,color:'#1a2236',marginBottom:10},children:[\"Choose Delivery Type \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:deliveryType,onChange:e=>setDeliveryType(e.target.value),style:{width:'100%',padding:'12px',borderRadius:10,border:'1px solid #ccc',fontSize:18,marginTop:8,marginBottom:8},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pickup\",children:\"Pickup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivery\",children:\"Delivery (+50 Ksh)\"})]})]}),successMsg?/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a8f3c',fontWeight:700,fontSize:22,marginBottom:18},children:successMsg}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,marginBottom:10},children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0},children:cart.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:18,display:'flex',alignItems:'center',background:'#f7f7fa',borderRadius:12,padding:'14px 18px',boxShadow:'0 1px 8px #0001'},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img||'https://via.placeholder.com/48?text=No+Image',alt:item.name,style:{width:56,height:56,objectFit:'cover',borderRadius:12,marginRight:18}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:'#1a2236'},children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#555',fontSize:16},children:[\"Qty: \",item.qty]}),item.offerActive&&item.offerPercent>0?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'baseline',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ff5252',fontSize:18,marginTop:2},children:[item.total,\" Ksh\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',textDecoration:'line-through'},children:[\"Ksh \",(item.price*item.qty).toLocaleString()]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffb300',color:'#222',borderRadius:6,padding:'2px 8px',fontWeight:700,fontSize:12},children:[\"-\",item.offerPercent,\"%\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#ffb300',fontSize:18,marginTop:2},children:[item.total,\" Ksh\"]}),item.deliveryNotes&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:14,marginTop:4},children:[\"Delivery: \",item.deliveryNotes]})]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22},children:\"Grand Total\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:28,color:'#ffb300',marginTop:8},children:[grandTotal,\" Ksh\"]}),deliveryType==='Delivery'&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:16,marginTop:4},children:\"Includes 50 Ksh delivery fee\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:700,fontSize:20,color:'#1a2236',marginBottom:10},children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:checkoutPayment,onChange:e=>setCheckoutPayment(e.target.value),style:{width:'100%',padding:'12px',borderRadius:10,border:'1px solid #ccc',fontSize:18,marginTop:8,marginBottom:8},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"M-Pesa\",children:\"M-Pesa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Card\",children:\"Card\"})]})]}),checkoutPayment==='M-Pesa'&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:24,display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"M-Pesa Number (07XXXXXXXX or 011XXXXXXX)\",value:mpesaNumber,onChange:e=>{setMpesaNumber(e.target.value.replace(/[^0-9]/g,'').slice(0,10));setMpesaPushed(false);},style:{flex:1,padding:12,borderRadius:10,border:'1px solid #ccc',fontSize:18},disabled:processing,maxLength:10}),/*#__PURE__*/_jsx(\"button\",{style:{background:isValidMpesaNumber(mpesaNumber)&&!processing?'#1a2236':'#ccc',color:'#fff',border:'none',borderRadius:10,padding:'12px 18px',fontWeight:700,fontSize:18,cursor:isValidMpesaNumber(mpesaNumber)&&!processing?'pointer':'not-allowed'},onClick:handleMpesaPush,disabled:!isValidMpesaNumber(mpesaNumber)||processing||mpesaPushed,children:\"Push\"})]}),mpesaStatus&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a2236',fontWeight:600,marginBottom:12},children:mpesaStatus}),errorMsg&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#e74c3c',fontWeight:600,marginBottom:12},children:errorMsg}),/*#__PURE__*/_jsx(\"button\",{style:{background:processing||!deliveryType?'#ccc':'#1a2236',color:'#fff',border:'none',borderRadius:12,padding:'16px 32px',fontWeight:700,fontSize:22,cursor:processing||!deliveryType?'not-allowed':'pointer',width:'100%',marginBottom:12,boxShadow:'0 2px 8px #0002'},onClick:handlePlaceOrder,disabled:processing||!deliveryType||checkoutPayment==='M-Pesa'&&!mpesaPushed||checkoutPayment==='Card'&&!isValidCard(cardDetails),children:processing?'Processing...':'Checkout'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('cart'),style:{background:'#e0e0e0',color:'#222',border:'none',borderRadius:12,padding:'12px 28px',fontWeight:700,fontSize:18,cursor:processing?'not-allowed':'pointer',width:'100%'},disabled:processing,children:\"Back to Cart\"})]})]});}export default App;","map":{"version":3,"names":["PastOrdersPage","_ref","orders","onRate","_jsxs","children","_jsx","style","color","listStyle","padding","map","order","background","borderRadius","margin","boxShadow","fontWeight","fontSize","_id","status","total","paddingLeft","items","item","idx","_item$menuItem","marginBottom","menuItem","name","quantity","marginLeft","border","cursor","onClick","length","React","useState","useMemo","SignInModal","_ref2","open","onClose","onSignIn","email","setEmail","pin","setPin","position","top","left","width","height","zIndex","display","alignItems","justifyContent","minWidth","maxWidth","flexDirection","right","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","required","_objectSpread","inputStyle","replace","slice","minLength","maxLength","isValidCard","card","numValid","test","number","nameValid","trim","expValid","expiry","cvcValid","cvv","SignOutModal","_ref3","onSignOut","textAlign","handleLogout","setUser","setShowSignOut","Track","jsx","jsxs","Fragment","_Fragment","MenuPage","_ref4","menu","handleOrder","selectedCategory","setSelectedCategory","categories","openIngredients","setOpenIngredients","specialsType","setSpecialsType","selectingQty","setSelectingQty","qty","setQty","query","setQuery","useEffect","resetQty","window","addEventListener","removeEventListener","toggleIngredients","id","prev","foods","filter","f","text","concat","desc","toLowerCase","includes","filteredFoods","q","fields","Array","isArray","ingredients","Boolean","some","x","String","gap","flexWrap","cat","transition","charAt","toUpperCase","gridTemplateColumns","food","minHeight","src","img","alt","objectFit","marginRight","flex","offerActive","offerPercent","Math","round","price","textDecoration","averageRating","ratingCount","toFixed","marginTop","ing","OffersPage","_ref5","SignInPage","_ref6","onSignUp","onResetPin","mode","setMode","firstName","setFirstName","lastName","setLastName","dob","setDob","sex","setSex","phone","setPhone","confirmPin","setConfirmPin","awaitingCode","setAwaitingCode","code","setCode","showPin","setShowPin","isValidEmail","isValidPin","p","isValidPhone","isValidDob","d","y","Date","getFullYear","cy","Number","isFinite","submit","alert","yob","fetch","method","headers","body","JSON","stringify","then","res","_data","ok","json","data","_unused","Error","error","catch","err","message","_data2","_unused2","cardStyle","fontFamily","titleStyle","letterSpacing","fieldStyle","outline","boxSizing","primaryBtn","linkStyle","pinWrapStyle","overflow","pinToggleStyle","transform","lineHeight","pinFieldStyle","paddingRight","max","toISOString","inputMode","pattern","autoComplete","s","viewBox","fill","xmlns","stroke","strokeWidth","strokeLinecap","strokeLinejoin","yobVal","_data3","_unused3","App","showSignIn","setShowSignIn","showSignOut","user","raw","localStorage","getItem","saved","parse","setProfile","_unused4","handleSignIn","Promise","reject","_data$user","_data$user2","_data$user3","nextUser","undefined","setItem","_unused5","handleSignUp","_ref7","nowYear","age","formattedPhone","fullName","_unused6","handleResetPin","handleSignOut","removeItem","_unused7","trackOrders","setTrackOrders","handleCheckoutComplete","orderItems","deliveryType","grandTotal","orderId","paymentMethod","payment","date","canCancel","setCart","setPage","setTimeout","showCheckout","setShowCheckout","emailConfirmed","setEmailConfirmed","emailConfirmationMsg","setEmailConfirmationMsg","validateEmail","lastSavedEmail","setLastSavedEmail","profile","profileWarning","setProfileWarning","profileMapOpen","setProfileMapOpen","profileEditing","setProfileEditing","allergies","address","page","orderFood","setOrderFood","orderPlaced","setOrderPlaced","tracking","setTracking","setOrder","location","lat","lng","showMap","setShowMap","instructions","setInstructions","utensils","condiments","notes","cart","cartNotification","setCartNotification","notify","title","Notification","permission","_unused8","requestPermission","_unused9","handleInstructionsSubmit","instr","utensilPrices","Spoon","Plate","Cup","utensilCost","reduce","sum","ut","unitPrice","deliveryNotes","notif","join","evt","CustomEvent","dispatchEvent","handleOrderSubmit","handleLocationChange","handleMapSelect","vikingBg","setOrders","handleOrderComplete","prevOrders","clientMenu","setClientMenu","clientOffers","setClientOffers","loadingMenu","setLoadingMenu","loadingOffers","setLoadingOffers","menuError","setMenuError","offersError","setOffersError","hotelConfig","setHotelConfig","_unused0","finally","_unused1","resolve","cfg","MenuWrapper","_ref8","i","category","byType","breakfast","brunch","lunch","dinner","supper","specials","mapItem","description","image","rating","avgRating","OffersWrapper","offerItems","backgroundImage","backgroundSize","backgroundPosition","opacity","flexShrink","whiteSpace","cx","r","rx","ry","backdropFilter","overflowY","bottom","animation","InstructionsPage","config","CartPage","CheckoutPage","checkoutPayment","setCheckoutPayment","userEmail","onCheckoutComplete","borderColor","disabled","allowFullScreen","_ref9","setUtensils","setCondiments","setNotes","setDeliveryNotes","availableCondiments","availableUtensils","toggleUtensil","u","addCondiment","cond","removeCondiment","_","handleSubmit","checked","accentColor","toLocaleString","_ref0","editingIdx","setEditingIdx","editItem","setEditItem","deleteIdx","setDeleteIdx","handleDelete","confirmDelete","cancelDelete","handleEdit","handleEditChange","field","handleSaveEdit","pointerEvents","min","_ref1","setDeliveryType","cardDetails","setCardDetails","processing","setProcessing","successMsg","setSuccessMsg","errorMsg","setErrorMsg","mpesaStatus","setMpesaStatus","mpesaNumber","setMpesaNumber","mpesaPushed","setMpesaPushed","baseTotal","deliveryFee","handleCardInput","isValidMpesaNumber","num","handleMpesaPush","startsWith","amount","handlePlaceOrder","payload","clientEmail","clientName","clientPhone","deliveryAddress","paymentStatus","t","clearTimeout"],"sources":["C:/Floki/web-client/src/App.js"],"sourcesContent":["// --- Past Orders and Ratings ---\r\nfunction PastOrdersPage({ orders, onRate }) {\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236' }}>Past Orders</h2>\r\n      <ul style={{ listStyle: 'none', padding: 0 }}>\r\n        {orders.map(order => (\r\n          <li key={order._id} style={{ background: '#f7f7fa', borderRadius: 12, margin: '16px 0', padding: 18, boxShadow: '0 1px 8px #0001' }}>\r\n            <div style={{ fontWeight: 700, fontSize: 18 }}>Order #{order._id}</div>\r\n            <div>Status: {order.status}</div>\r\n            <div>Total: Ksh {order.total}</div>\r\n            <div>Items:</div>\r\n            <ul style={{ paddingLeft: 18 }}>\r\n              {order.items.map((item, idx) => (\r\n                <li key={idx} style={{ marginBottom: 6 }}>\r\n                  {item.menuItem?.name || 'Item'} x{item.quantity}\r\n                  <button style={{ marginLeft: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 6, padding: '4px 12px', fontWeight: 600, cursor: 'pointer' }}\r\n                    onClick={() => onRate(order, item)}>\r\n                    Rate Now\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {orders.length === 0 && <div style={{ color: '#6a708a' }}>No past orders found.</div>}\r\n    </div>\r\n  );\r\n}\r\nimport React, { useState, useMemo } from 'react';\r\n\r\n// Sign In Modal\r\nfunction SignInModal({ open, onClose, onSignIn }) {\r\n  const [email, setEmail] = useState('');\r\n  const [pin, setPin] = useState('');\r\n  if (!open) return null;\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: '#0007', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <div style={{ background: '#fff', borderRadius: 24, boxShadow: '0 8px 32px #0003', padding: '2.5rem 2rem', minWidth: 340, maxWidth: 400, width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', position: 'relative' }}>\r\n        <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 24, color: '#888', cursor: 'pointer' }}>&times;</button>\r\n        <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Sign In</h2>\r\n        <form onSubmit={e => { e.preventDefault(); onSignIn(email, pin); }} style={{ width: '100%' }}>\r\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required style={{ ...inputStyle }} />\r\n          <input type=\"number\" placeholder=\"PIN (4-6 digits)\" value={pin} onChange={e => setPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))} required style={{ ...inputStyle }} minLength={4} maxLength={6} />\r\n          <button type=\"submit\" style={{ width: '100%', background: '#1a2236', color: '#fff', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8, boxShadow: '0 2px 8px #1a223633' }}>Sign In</button>\r\n        </form>\r\n        <button onClick={onClose} style={{ width: '100%', background: '#f7f7fa', color: '#222', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer' }}>Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n  function isValidCard(card) {\r\n    // Card number: 16 digits, expiry: MM/YY, CVC: 3 or 4 digits\r\n    const numValid = /^\\d{16}$/.test(card.number);\r\n    const nameValid = card.name.trim().length > 0;\r\n    const expValid = /^(0[1-9]|1[0-2])\\/(\\d{2})$/.test(card.expiry);\r\n    const cvcValid = /^\\d{3,4}$/.test(card.cvv);\r\n    return numValid && nameValid && expValid && cvcValid;\r\n  }\r\n\r\n\r\n// Sign Out Modal\r\nfunction SignOutModal({ open, onClose, onSignOut }) {\r\n  if (!open) return null;\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: '#0007', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <div style={{ background: '#fff', borderRadius: 24, boxShadow: '0 8px 32px #0003', padding: '2.5rem 2rem', minWidth: 340, maxWidth: 400, width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', position: 'relative' }}>\r\n        <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 24, color: '#888', cursor: 'pointer' }}>&times;</button>\r\n        <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Sign Out</h2>\r\n        <div style={{ color: '#555', fontSize: 17, marginBottom: 24, textAlign: 'center' }}>Are you sure you want to sign out?</div>\r\n        <button\r\n          style={{ width: '100%', background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8, boxShadow: '0 2px 8px #e74c3c33' }}\r\n          onClick={onSignOut}\r\n        >Sign Out</button>\r\n        <button\r\n          style={{ width: '100%', background: '#f7f7fa', color: '#222', border: 'none', borderRadius: 12, padding: '14px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8 }}\r\n          onClick={onClose}\r\n        >Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Remove the old logout button and add a floating one at the bottom right\r\nfunction handleLogout() {\r\n  setUser(null);\r\n  setShowSignOut(false);\r\n}\r\n\r\nimport Track from './Track';\r\n\r\n// The reorder event listener must be inside the App component to use hooks\r\n// Placeholder MENU and OFFERS removed; data is loaded from backend\r\n\r\nconst inputStyle = {\r\n  display: 'block',\r\n  margin: '8px 0',\r\n  padding: '8px',\r\n  borderRadius: 6,\r\n  border: '1px solid #ccc',\r\n  width: '100%',\r\n  fontSize: 16,\r\n};\r\n\r\nfunction MenuPage({ menu, handleOrder, selectedCategory, setSelectedCategory }) {\r\n  const categories = ['breakfast', 'brunch', 'lunch', 'dinner', 'supper', 'specials'];\r\n  const [openIngredients, setOpenIngredients] = useState({});\r\n  const [specialsType, setSpecialsType] = useState('all');\r\n  const [selectingQty, setSelectingQty] = useState(null); // food.id\r\n  const [qty, setQty] = useState(1);\r\n  const [query, setQuery] = useState('');\r\n  React.useEffect(() => {\r\n    function resetQty() {\r\n      setSelectingQty(null);\r\n      setQty(1);\r\n    }\r\n    window.addEventListener('resetSelectingQty', resetQty);\r\n    return () => window.removeEventListener('resetSelectingQty', resetQty);\r\n  }, []);\r\n  function toggleIngredients(id) {\r\n    setOpenIngredients(prev => ({ ...prev, [id]: !prev[id] }));\r\n  }\r\n  let foods = menu || [];\r\n  // For specials, apply an optional sub-filter using simple heuristics\r\n  if (selectedCategory === 'specials') {\r\n    foods = (menu || []).filter(f => {\r\n      if (specialsType === 'all') return true;\r\n      const text = `${f.name || ''} ${f.desc || ''}`.toLowerCase();\r\n      if (specialsType === 'chef') return text.includes('chef');\r\n      if (specialsType === 'day') return text.includes('day');\r\n      if (specialsType === 'vegan') return text.includes('vegan');\r\n      if (specialsType === 'vegetarian') return text.includes('vegetarian') || text.includes('vegeterian');\r\n      return true;\r\n    });\r\n  }\r\n  const filteredFoods = (foods || []).filter(f => {\r\n    const q = query.trim().toLowerCase();\r\n    if (!q) return true;\r\n    const fields = [f.name, f.desc].concat(Array.isArray(f.ingredients) ? f.ingredients : []);\r\n    return fields.filter(Boolean).some(x => String(x).toLowerCase().includes(q));\r\n  });\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236' }}>Menu</h2>\r\n      <div style={{ display: 'flex', gap: 12, alignItems: 'center', marginBottom: 12 }}>\r\n        <input\r\n          type=\"search\"\r\n          placeholder=\"Search dishes\"\r\n          value={query}\r\n          onChange={e => setQuery(e.target.value)}\r\n          style={{ padding: '8px 12px', borderRadius: 8, border: '1px solid #e1e4ee', minWidth: 240 }}\r\n        />\r\n      </div>\r\n      <div style={{ marginBottom: 24, display: 'flex', gap: 12, justifyContent: 'center', flexWrap: 'wrap' }}>\r\n      {categories.map(cat => (\r\n        <button\r\n          key={cat}\r\n          onClick={() => setSelectedCategory(cat)}\r\n          style={{\r\n            background: selectedCategory === cat ? '#ffb300' : '#f7f7fa',\r\n            color: selectedCategory === cat ? '#222' : '#555',\r\n            border: 'none',\r\n            borderRadius: 6,\r\n            padding: '8px 18px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n            fontSize: 16,\r\n            transition: 'background 0.2s',\r\n            minWidth: 120,\r\n          }}\r\n        >\r\n          {cat.charAt(0).toUpperCase() + cat.slice(1)}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    {selectedCategory === 'specials' && (\r\n      <div style={{ marginBottom: 24, display: 'flex', gap: 12, justifyContent: 'center', flexWrap: 'wrap' }}>\r\n        {['all', 'chef', 'day', 'vegan', 'vegetarian'].map(type => (\r\n          <button\r\n            key={type}\r\n            onClick={() => setSpecialsType(type)}\r\n            style={{\r\n              background: specialsType === type ? '#ffb300' : '#f7f7fa',\r\n              color: specialsType === type ? '#222' : '#555',\r\n              border: 'none',\r\n              borderRadius: 6,\r\n              padding: '8px 18px',\r\n              fontWeight: 600,\r\n              cursor: 'pointer',\r\n              fontSize: 16,\r\n              transition: 'background 0.2s',\r\n              minWidth: 120,\r\n            }}\r\n          >\r\n            {type === 'all' ? 'All' : type === 'chef' ? \"Chef's Special\" : type === 'day' ? \"Day's Special\" : type.charAt(0).toUpperCase() + type.slice(1)}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    )}\r\n    <ul style={{\r\n      listStyle: 'none',\r\n      padding: 0,\r\n      margin: 0,\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\r\n      gap: 32,\r\n      width: '100%',\r\n    }}>\r\n      {filteredFoods.map(food => (\r\n        <li key={food.id} style={{\r\n          background: '#f7f7fa',\r\n          borderRadius: 12,\r\n          padding: 20,\r\n          boxShadow: '0 1px 8px #0001',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          minHeight: 120,\r\n          flexDirection: 'column',\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', width: '100%' }}>\r\n            <img src={food.img} alt={food.name} style={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 10, marginRight: 20 }} />\r\n            <div style={{ flex: 1 }}>\r\n              <div style={{ fontWeight: 700, fontSize: 20 }}>{food.name}</div>\r\n              <div style={{ color: '#555', marginBottom: 6 }}>{food.desc}</div>\r\n              {food.offerActive && food.offerPercent > 0 ? (\r\n                <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                  <div style={{ fontWeight: 600, color: '#ff5252', fontSize: 17 }}>Ksh {Math.round(food.price * (1 - food.offerPercent / 100))}</div>\r\n                  <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {food.price}</div>\r\n                  <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{food.offerPercent}%</span>\r\n                </div>\r\n              ) : (\r\n                <div style={{ fontWeight: 600, color: '#ffb300', fontSize: 17 }}>Ksh {food.price}</div>\r\n              )}\r\n              <div style={{ margin: '6px 0' }}>\r\n                {typeof food.averageRating === 'number' && food.ratingCount > 0 ? (\r\n                  <span style={{ color: '#f39c12', fontWeight: 600 }}>\r\n                    Avg Rating: {food.averageRating.toFixed(1)}  ({food.ratingCount})\r\n                  </span>\r\n                ) : (\r\n                  <span style={{ color: '#888', fontWeight: 500 }}>No ratings yet</span>\r\n                )}\r\n              </div>\r\n              {selectingQty === food.id ? (\r\n                <div style={{ display: 'flex', alignItems: 'center', marginTop: 8 }}>\r\n                  <button onClick={() => setQty(qty > 1 ? qty - 1 : 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 18 }}>-</button>\r\n                  <span style={{ margin: '0 12px', fontWeight: 700, fontSize: 18 }}>{qty}</span>\r\n                  <button onClick={() => setQty(qty + 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 18 }}>+</button>\r\n                  <button onClick={() => handleOrder({ ...food, quantity: qty })} style={{ marginLeft: 18, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Order</button>\r\n                </div>\r\n              ) : (\r\n                <button onClick={() => { setSelectingQty(food.id); setQty(1); }} style={{ marginTop: 8, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Order</button>\r\n              )}\r\n              <button onClick={() => toggleIngredients(food.id)} style={{ marginTop: 8, background: openIngredients[food.id] ? '#ffb300' : '#e0e0e0', color: '#222', border: 'none', borderRadius: 6, padding: '6px 16px', fontWeight: 600, cursor: 'pointer' }}>See Ingredients</button>\r\n            </div>\r\n          </div>\r\n          {openIngredients[food.id] && (\r\n            <div style={{ marginTop: 12, width: '100%' }}>\r\n              <div style={{ fontWeight: 600, color: '#1a2236', marginBottom: 6 }}>Ingredients:</div>\r\n              <ul style={{ paddingLeft: 18, margin: 0 }}>\r\n                {food.ingredients.map((ing, idx) => (\r\n                  <li key={idx} style={{ color: '#555', fontSize: 15 }}>{ing}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </li>\r\n      ))}\r\n      </ul>\r\n      {filteredFoods.length === 0 && (\r\n        <div style={{ textAlign: 'center', color: '#6a708a', marginTop: 12 }}>No items match your search.</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction OffersPage({ items }) {\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236' }}>Offers</h2>\r\n      <ul style={{\r\n        listStyle: 'none', padding: 0, margin: 0,\r\n        display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))', gap: 24\r\n      }}>\r\n        {items.map(food => (\r\n          <li key={food.id} style={{ background: '#f7f7fa', borderRadius: 12, padding: 16, boxShadow: '0 1px 8px #0001' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              {food.img && <img src={food.img} alt={food.name} style={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 10, marginRight: 20 }} />}\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 18 }}>{food.name}</div>\r\n                {food.desc && <div style={{ color: '#555', marginBottom: 6 }}>{food.desc}</div>}\r\n                <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                  <div style={{ fontWeight: 600, color: '#ff5252', fontSize: 17 }}>Ksh {Math.round(food.price * (1 - food.offerPercent / 100))}</div>\r\n                  <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {food.price}</div>\r\n                  <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{food.offerPercent}%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {items.length === 0 && <div style={{ color: '#6a708a' }}>No active offers.</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Dedicated Sign In Page (gate to the app)\r\nfunction SignInPage({ onSignIn, onSignUp, onResetPin }) {\r\n  const [mode, setMode] = useState('signin'); // 'signin' | 'signup' | 'reset'\r\n  const [firstName, setFirstName] = useState('');\r\n  const [lastName, setLastName] = useState('');\r\n  const [dob, setDob] = useState('');\r\n  const [sex, setSex] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [pin, setPin] = useState('');\r\n  const [confirmPin, setConfirmPin] = useState('');\r\n  const [awaitingCode, setAwaitingCode] = useState(false);\r\n  const [code, setCode] = useState('');\r\n  const [showPin, setShowPin] = useState(false);\r\n  const isValidEmail = e => /^\\S+@\\S+\\.\\S+$/.test(e);\r\n  const isValidPin = p => /^\\d{4,6}$/.test(p);\r\n  const isValidPhone = p => /^(07\\d{8}|011\\d{7})$/.test(p);\r\n  const isValidDob = d => {\r\n    const y = new Date(d).getFullYear();\r\n    const cy = new Date().getFullYear();\r\n    return Number.isFinite(y) && y >= 1900 && y <= cy;\r\n  };\r\n\r\n  function submit(e) {\r\n    e.preventDefault();\r\n    if (mode === 'signin') {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!isValidPin(pin)) { alert('Enter a 4-6 digit PIN.'); return; }\r\n      onSignIn(email, pin);\r\n    } else if (mode === 'signup' && !awaitingCode) {\r\n      if (!firstName.trim()) { alert('Please enter your first name.'); return; }\r\n      if (!lastName.trim()) { alert('Please enter your last name.'); return; }\r\n      if (!isValidDob(dob)) { alert('Please select a valid date of birth.'); return; }\r\n      if (!sex) { alert('Please select your sex.'); return; }\r\n      if (!isValidPhone(phone)) { alert('Enter phone as 07XXXXXXXX or 011XXXXXXX.'); return; }\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!isValidPin(pin)) { alert('Enter a 4-6 digit PIN.'); return; }\r\n      if (pin !== confirmPin) { alert('PINs do not match.'); return; }\r\n      const yob = new Date(dob).getFullYear();\r\n      // Init registration, send confirmation code\r\n      fetch('/api/auth/register-init', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ firstName: firstName.trim(), lastName: lastName.trim(), yob, sex, phone, email, pin })\r\n      })\r\n        .then(async res => {\r\n          if (res.ok) return res.json();\r\n          let data; try { data = await res.json(); } catch {}\r\n          throw new Error(data?.error || 'Failed to send confirmation code');\r\n        })\r\n        .then(() => { setAwaitingCode(true); })\r\n        .catch(err => alert(err.message));\r\n    } else if (mode === 'signup' && awaitingCode) {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      if (!code || code.length !== 6) { alert('Enter the 6-digit confirmation code.'); return; }\r\n      fetch('/api/auth/register-verify', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, code })\r\n      })\r\n        .then(async res => {\r\n          if (res.ok) return res.json();\r\n          let data; try { data = await res.json(); } catch {}\r\n          throw new Error(data?.error || 'Failed to verify code');\r\n        })\r\n        .then(() => {\r\n          const yob = new Date(dob).getFullYear();\r\n          onSignUp({ firstName: firstName.trim(), lastName: lastName.trim(), yob, sex, phone, email, pin });\r\n        })\r\n        .catch(err => alert(err.message));\r\n    } else {\r\n      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }\r\n      onResetPin(email);\r\n    }\r\n  }\r\n\r\n  const cardStyle = {\r\n    background: '#fff',\r\n    borderRadius: 16,\r\n    boxShadow: '0 12px 30px rgba(0,0,0,0.10)',\r\n    border: '1px solid #e6e8eb',\r\n    padding: '2rem 1.75rem',\r\n    width: '92vw',\r\n    maxWidth: 520,\r\n    fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif'\r\n  };\r\n  const titleStyle = {\r\n    fontSize: 26,\r\n    fontWeight: 700,\r\n    color: '#0f172a',\r\n    margin: '0 0 16px 0',\r\n    letterSpacing: 0.2,\r\n  };\r\n  const fieldStyle = {\r\n    width: '100%',\r\n    border: '1px solid #ddd',\r\n    borderRadius: 10,\r\n    padding: '12px 14px',\r\n    fontSize: 16,\r\n    outline: 'none',\r\n    margin: '10px 0',\r\n    background: '#f7f7fa',\r\n    boxSizing: 'border-box',\r\n    display: 'block',\r\n    maxWidth: '100%'\r\n  };\r\n  const primaryBtn = {\r\n    width: '100%',\r\n    background: '#ffb300',\r\n    color: '#222',\r\n    border: 'none',\r\n    borderRadius: 12,\r\n    padding: '12px 16px',\r\n    fontWeight: 700,\r\n    fontSize: 18,\r\n    cursor: 'pointer',\r\n    boxShadow: '0 2px 8px #1a223633',\r\n    marginTop: 12\r\n  };\r\n  const linkStyle = {\r\n    color: '#ffb300',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    padding: 0,\r\n    margin: 0,\r\n    cursor: 'pointer',\r\n    fontSize: 14,\r\n    textDecoration: 'underline'\r\n  };\r\n  const pinWrapStyle = {\r\n    position: 'relative',\r\n    width: '100%',\r\n    overflow: 'hidden'\r\n  };\r\n  const pinToggleStyle = {\r\n    position: 'absolute',\r\n    right: 12,\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    color: '#ffb300',\r\n    cursor: 'pointer',\r\n    padding: 0,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 24,\r\n    height: 24,\r\n    lineHeight: 0\r\n  };\r\n  const pinFieldStyle = {\r\n    ...fieldStyle,\r\n    paddingRight: '48px'\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      width: '100vw',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      flexDirection: 'column',\r\n      gap: 16,\r\n      background: '#f7f7fa',\r\n      position: 'relative'\r\n    }}>\r\n      <div style={{ color: '#1a2236', fontWeight: 800, fontSize: 30, letterSpacing: 0.5, fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif', textAlign: 'center' }}>Floki's</div>\r\n      <div style={cardStyle}>\r\n        <div style={titleStyle}>{mode === 'signin' ? 'Login' : mode === 'signup' ? 'Register' : 'Reset PIN'}</div>\r\n        <form onSubmit={submit}>\r\n          {mode === 'signup' && !awaitingCode && (\r\n            <>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12 }}>\r\n                <input type=\"text\" placeholder=\"First Name\" value={firstName} onChange={e => setFirstName(e.target.value)} style={fieldStyle} required />\r\n                <input type=\"text\" placeholder=\"Last Name\" value={lastName} onChange={e => setLastName(e.target.value)} style={fieldStyle} required />\r\n              </div>\r\n              <input type=\"date\" placeholder=\"Date of Birth\" value={dob} onChange={e => setDob(e.target.value)} style={fieldStyle} required max={new Date().toISOString().slice(0,10)} />\r\n              <select value={sex} onChange={e => setSex(e.target.value)} style={fieldStyle} required>\r\n                <option value=\"\">Sex</option>\r\n                <option value=\"Male\">Male</option>\r\n                <option value=\"Female\">Female</option>\r\n                <option value=\"Other\">Other</option>\r\n              </select>\r\n              <input\r\n                type=\"tel\"\r\n                inputMode=\"tel\"\r\n                placeholder=\"Tel (07XXXXXXXX or 011XXXXXXX)\"\r\n                value={phone}\r\n                onChange={e => setPhone(e.target.value.replace(/[^0-9]/g, '').slice(0,10))}\r\n                style={fieldStyle}\r\n                required\r\n                maxLength={10}\r\n              />\r\n            </>\r\n          )}\r\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} style={fieldStyle} required />\r\n          {mode !== 'reset' && (\r\n            <div style={pinWrapStyle}>\r\n              <input\r\n                type={showPin ? 'text' : 'password'}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder={mode==='signin' ? 'PIN' : 'Choose PIN'}\r\n                value={pin}\r\n                onChange={e => setPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                required\r\n                style={pinFieldStyle}\r\n                autoComplete=\"one-time-code\"\r\n              />\r\n              <button type=\"button\" aria-label=\"Toggle PIN visibility\" onClick={() => setShowPin(s => !s)} style={pinToggleStyle}>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  {showPin ? (\r\n                    <path d=\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\" stroke=\"#ffb300\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  ) : (\r\n                    <path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\" fill=\"#ffb300\"/>\r\n                  )}\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n          {mode === 'signup' && !awaitingCode && (\r\n            <div style={pinWrapStyle}>\r\n              <input\r\n                type={showPin ? 'text' : 'password'}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder=\"Confirm PIN\"\r\n                value={confirmPin}\r\n                onChange={e => setConfirmPin(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                required\r\n                style={pinFieldStyle}\r\n                autoComplete=\"one-time-code\"\r\n              />\r\n              <button type=\"button\" aria-label=\"Toggle PIN visibility\" onClick={() => setShowPin(s => !s)} style={pinToggleStyle}>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  {showPin ? (\r\n                    <path d=\"M2 2l20 20M12 5c-7 0-10 7-10 7s2.5 4.5 7 6l9-9c-2-3.5-6-4-6-4z\" stroke=\"#ffb300\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  ) : (\r\n                    <path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11-4a4 4 0 100 8 4 4 0 000-8z\" fill=\"#ffb300\"/>\r\n                  )}\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n          {mode === 'signup' && awaitingCode && (\r\n            <>\r\n              <div style={pinWrapStyle}>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  placeholder=\"Enter Confirmation Code\"\r\n                  value={code}\r\n                  onChange={e => setCode(e.target.value.replace(/[^0-9]/g, '').slice(0,6))}\r\n                  style={fieldStyle}\r\n                  required\r\n                  maxLength={6}\r\n                />\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div style={{ color: '#6b7280', fontSize: 14 }}>A confirmation code was sent to your email.</div>\r\n                <button\r\n                  type=\"button\"\r\n                  style={linkStyle}\r\n                  onClick={() => {\r\n                    const yobVal = new Date(dob).getFullYear();\r\n                    fetch('/api/auth/register-init', {\r\n                      method: 'POST',\r\n                      headers: { 'Content-Type': 'application/json' },\r\n                      body: JSON.stringify({ firstName: firstName.trim(), lastName: lastName.trim(), yob: yobVal, sex, phone, email, pin })\r\n                    })\r\n                      .then(async res => {\r\n                        if (res.ok) return res.json();\r\n                        let data; try { data = await res.json(); } catch {}\r\n                        throw new Error(data?.error || 'Failed to resend code');\r\n                      })\r\n                      .then(() => alert('Code resent'))\r\n                      .catch(err => alert(err.message));\r\n                  }}\r\n                >Resend Code</button>\r\n              </div>\r\n            </>\r\n          )}\r\n          <button type=\"submit\" style={primaryBtn}>\r\n            {mode === 'signin' ? 'Log In' : mode === 'signup' ? (awaitingCode ? 'Verify Code' : 'Send Code') : 'Send Reset Link'}\r\n          </button>\r\n        </form>\r\n\r\n        {mode === 'signup' && awaitingCode && null}\r\n\r\n        <div style={{ marginTop: 12, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          {mode === 'signin' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Don't have an account?</span>\r\n              <button type=\"button\" onClick={() => setMode('signup')} style={linkStyle}>Register</button>\r\n            </>\r\n          )}\r\n          {mode === 'signup' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Already have an account?</span>\r\n              <button type=\"button\" onClick={() => setMode('signin')} style={linkStyle}>Sign In</button>\r\n            </>\r\n          )}\r\n          {mode === 'reset' && (\r\n            <>\r\n              <span style={{ color: '#6b7280', fontSize: 14 }}>Remember your PIN?</span>\r\n              <button type=\"button\" onClick={() => setMode('signin')} style={linkStyle}>Sign In</button>\r\n            </>\r\n          )}\r\n        </div>\r\n        {mode === 'signin' && (\r\n          <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n            <button type=\"button\" onClick={() => setMode('reset')} style={linkStyle}>Forgot PIN?</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  // Auth modal states\r\n  const [showSignIn, setShowSignIn] = useState(false); // no longer auto-opened; kept for future use if needed\r\n  const [showSignOut, setShowSignOut] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Persist user session across refreshes\r\n  React.useEffect(() => {\r\n    try {\r\n      const raw = typeof localStorage !== 'undefined' ? localStorage.getItem('clientUser') : null;\r\n      if (raw) {\r\n        const saved = JSON.parse(raw);\r\n        if (saved && saved.email) {\r\n          setUser(saved);\r\n          setProfile(prev => ({\r\n            ...prev,\r\n            name: saved.name || prev.name,\r\n            email: saved.email,\r\n            phone: saved.phone || prev.phone,\r\n          }));\r\n        }\r\n      }\r\n    } catch {}\r\n  }, []);\r\n\r\n  function handleSignIn(email, pin) {\r\n    if (!email || !/^\\S+@\\S+\\.\\S+$/.test(email)) {\r\n      alert('Please enter a valid email.');\r\n      return;\r\n    }\r\n    if (!pin || !/^\\d{4,6}$/.test(pin)) {\r\n      alert('Please enter a 4-6 digit PIN.');\r\n      return;\r\n    }\r\n    fetch('/api/auth/login', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email, pin })\r\n    })\r\n      .then(res => res.ok ? res.json() : res.json().then(d => Promise.reject(new Error(d.error || 'Login failed'))))\r\n      .then(data => {\r\n        // Persist name and phone from backend when available\r\n        const nextUser = {\r\n          email: data.user?.email || email,\r\n          name: data.user?.name || undefined,\r\n          phone: data.user?.phone || undefined,\r\n        };\r\n        setUser(nextUser);\r\n        try { if (typeof localStorage !== 'undefined') localStorage.setItem('clientUser', JSON.stringify(nextUser)); } catch {}\r\n        // Keep profile in sync for downstream usage\r\n        setProfile(prev => ({\r\n          ...prev,\r\n          name: nextUser.name || prev.name,\r\n          email: nextUser.email,\r\n          phone: nextUser.phone || prev.phone,\r\n        }));\r\n        setShowSignIn(false);\r\n      })\r\n      .catch(err => alert(err.message));\r\n  }\r\n  function handleSignUp({ firstName, lastName, yob, sex, phone, email, pin }) {\r\n    if (!email || !pin || pin.length < 4 || pin.length > 6) {\r\n      alert('Please enter a valid email and 4-6 digit PIN.');\r\n      return;\r\n    }\r\n    const nowYear = new Date().getFullYear();\r\n    const age = String(nowYear - Number(yob));\r\n    let formattedPhone = phone;\r\n    if (/^(07\\d{8}|011\\d{7})$/.test(phone)) {\r\n      formattedPhone = '+254' + phone.slice(1);\r\n    }\r\n    // Finalize locally: profile prefill and sign-in (backend persistence already done on verify)\r\n    const fullName = `${firstName} ${lastName}`.trim();\r\n    setProfile(prev => ({\r\n      ...prev,\r\n      name: fullName,\r\n      age,\r\n      sex,\r\n      phone: formattedPhone,\r\n      email,\r\n    }));\r\n    // Reflect name in the signed-in state immediately and persist\r\n    const nextUser = { email, name: fullName, phone: formattedPhone };\r\n    setUser(nextUser);\r\n    try { if (typeof localStorage !== 'undefined') localStorage.setItem('clientUser', JSON.stringify(nextUser)); } catch {}\r\n  }\r\n  function handleResetPin(email) {\r\n    if (!/^\\S+@\\S+\\.\\S+$/.test(email)) {\r\n      alert('Please enter a valid email.');\r\n      return;\r\n    }\r\n    fetch('/api/auth/reset-pin', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(new Error('Failed to send reset email')))\r\n      .then(() => alert('Reset instructions have been sent to ' + email))\r\n      .catch(err => alert(err.message));\r\n  }\r\n  function handleSignOut() {\r\n    setUser(null);\r\n    setShowSignOut(false);\r\n    try { if (typeof localStorage !== 'undefined') localStorage.removeItem('clientUser'); } catch {}\r\n    // Prompt sign-in again after signing out\r\n    setShowSignIn(true);\r\n  }\r\n\r\n  const [trackOrders, setTrackOrders] = useState([\r\n  ]);\r\n\r\n  function handleCheckoutComplete(orderItems, deliveryType, grandTotal, orderId) {\r\n    const paymentMethod = order.payment || 'Cash';\r\n    setTrackOrders(prev => [\r\n      ...prev,\r\n      {\r\n        id: orderId,\r\n        items: orderItems,\r\n        deliveryType,\r\n        total: grandTotal,\r\n        date: new Date(),\r\n        status: 'Pending',\r\n        paymentMethod,\r\n        canCancel: true\r\n      }\r\n    ]);\r\n    setCart([]);\r\n    setPage('track');\r\n    // Set timeout to disable cancel after 1 minute\r\n    setTimeout(() => {\r\n      setTrackOrders(prev => prev.map((order, idx) => {\r\n        if (idx === prev.length - 1) {\r\n          return { ...order, canCancel: false };\r\n        }\r\n        return order;\r\n      }));\r\n    }, 60000);\r\n  }\r\n  const [showCheckout, setShowCheckout] = useState(false);\r\n  const [emailConfirmed, setEmailConfirmed] = useState(false);\r\n  const [emailConfirmationMsg, setEmailConfirmationMsg] = useState('');\r\n  const validateEmail = email => /^\\S+@\\S+\\.\\S+$/.test(email);\r\n  const [lastSavedEmail, setLastSavedEmail] = useState('');\r\n  React.useEffect(() => {\r\n    setLastSavedEmail(profile.email);\r\n  }, []);\r\n  // Remove auto-open modal sign-in; gating is handled via SignInPage\r\n  const [profileWarning, setProfileWarning] = useState('');\r\n  const [profileMapOpen, setProfileMapOpen] = useState(false);\r\n  const [profileEditing, setProfileEditing] = useState(true);\r\n  // Placeholder: Replace with actual user account info from auth/profile\r\n  const [profile, setProfile] = useState({\r\n    name: '',\r\n    age: '',\r\n    sex: '',\r\n    phone: '',\r\n    email: '',\r\n    allergies: '',\r\n    address: '',\r\n  });\r\n  const [page, setPage] = useState('menu');\r\n  const [orderFood, setOrderFood] = useState(null);\r\n  const [orderPlaced, setOrderPlaced] = useState(false);\r\n  const [tracking, setTracking] = useState(false);\r\n  const [order, setOrder] = useState({ name: profile.name, phone: profile.phone, address: profile.address, payment: 'Cash', location: { lat: null, lng: null } });\r\n  const [selectedCategory, setSelectedCategory] = useState('breakfast');\r\n  const [showMap, setShowMap] = useState(false);\r\n\r\n  const [instructions, setInstructions] = useState({ utensils: [], condiments: [], notes: '' });\r\n  const [cart, setCart] = useState([]);\r\n  const [cartNotification, setCartNotification] = useState('');\r\n  // System notification helper\r\n  function notify(title, body) {\r\n    try {\r\n      if (typeof window === 'undefined' || !('Notification' in window)) return;\r\n      if (Notification.permission === 'granted') {\r\n        new Notification(title, { body });\r\n      }\r\n    } catch {}\r\n  }\r\n  React.useEffect(() => {\r\n    try {\r\n      if (typeof window !== 'undefined' && 'Notification' in window && Notification.permission === 'default') {\r\n        Notification.requestPermission().catch(()=>{});\r\n      }\r\n    } catch {}\r\n  }, []);\r\n  function handleOrder(food) {\r\n    if (!user) {\r\n      // Gate prevents reaching here if not signed-in\r\n      return;\r\n    }\r\n    setOrderFood(food);\r\n    setPage('instructions');\r\n  }\r\n  function handleInstructionsSubmit(instr) {\r\n    // Immediately add item to cart and return to menu\r\n    const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n    const utensilCost = instr.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const qty = instr.qty || 1;\r\n    const unitPrice = orderFood.offerActive && orderFood.offerPercent > 0 ? Math.round(orderFood.price * (1 - orderFood.offerPercent / 100)) : orderFood.price;\r\n    const total = qty * unitPrice + utensilCost;\r\n    setCart([...cart, {\r\n      id: orderFood.id,\r\n      name: orderFood.name,\r\n      qty,\r\n      price: unitPrice,\r\n      offerActive: !!orderFood.offerActive,\r\n      offerPercent: Number(orderFood.offerPercent || 0),\r\n      utensils: instr.utensils,\r\n      condiments: instr.condiments,\r\n      notes: instr.notes,\r\n      deliveryNotes: instr.deliveryNotes,\r\n      utensilCost,\r\n      total,\r\n      img: orderFood.img,\r\n    }]);\r\n    // Compose notification listing what was added\r\n    let notif = `${qty} x ${orderFood.name}`;\r\n    if (instr.utensils.length) notif += `, Utensils: ${instr.utensils.join(', ')}`;\r\n    if (instr.condiments.length) notif += `, Condiments: ${instr.condiments.join(', ')}`;\r\n    if (instr.notes) notif += `, Notes: ${instr.notes}`;\r\n    if (instr.deliveryNotes) notif += `, Delivery: ${instr.deliveryNotes}`;\r\n    notify('Added to cart', notif);\r\n    setCartNotification(`${notif} added to cart.`);\r\n    setTimeout(() => setCartNotification(''), 2200);\r\n    setPage('menu');\r\n    setOrderFood(null);\r\n    setInstructions({ utensils: [], condiments: [], notes: '' });\r\n    // Reset MenuPage selectingQty state if needed\r\n    if (typeof window !== 'undefined') {\r\n      setTimeout(() => {\r\n        const evt = new CustomEvent('resetSelectingQty');\r\n        window.dispatchEvent(evt);\r\n      }, 250);\r\n    }\r\n  }\r\n  function handleOrderSubmit(e) {\r\n    e.preventDefault();\r\n    // Add item to cart and skip name/location module\r\n    const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n    const utensilCost = instructions.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const qty = orderFood.qty || instructions.qty || 1;\r\n    const unitPrice = orderFood.offerActive && orderFood.offerPercent > 0 ? Math.round(orderFood.price * (1 - orderFood.offerPercent / 100)) : orderFood.price;\r\n    const total = qty * unitPrice + utensilCost;\r\n    setCart([...cart, {\r\n      id: orderFood.id,\r\n      name: orderFood.name,\r\n      qty,\r\n      price: unitPrice,\r\n      offerActive: !!orderFood.offerActive,\r\n      offerPercent: Number(orderFood.offerPercent || 0),\r\n      utensils: instructions.utensils,\r\n      condiments: instructions.condiments,\r\n      notes: instructions.notes,\r\n      deliveryNotes: instructions.deliveryNotes,\r\n      utensilCost,\r\n      total,\r\n      img: orderFood.img,\r\n    }]);\r\n    // Compose notification listing what was added\r\n    let notif = `${qty} x ${orderFood.name}`;\r\n    if (instructions.utensils.length) notif += `, Utensils: ${instructions.utensils.join(', ')}`;\r\n    if (instructions.condiments.length) notif += `, Condiments: ${instructions.condiments.join(', ')}`;\r\n    if (instructions.notes) notif += `, Notes: ${instructions.notes}`;\r\n    if (instructions.deliveryNotes) notif += `, Delivery: ${instructions.deliveryNotes}`;\r\n    setCartNotification(`${notif} added to cart.`);\r\n    setTimeout(() => setCartNotification(''), 2200);\r\n    setPage('menu');\r\n    setOrderFood(null);\r\n    setInstructions({ utensils: [], condiments: [], notes: '' });\r\n    // Reset MenuPage selectingQty state if needed\r\n    if (typeof window !== 'undefined') {\r\n      setTimeout(() => {\r\n        const evt = new CustomEvent('resetSelectingQty');\r\n        window.dispatchEvent(evt);\r\n      }, 250);\r\n    }\r\n  }\r\n  function handleLocationChange() {\r\n    // Placeholder: Replace with actual map/location picker logic\r\n    setShowMap(true);\r\n  }\r\n  function handleMapSelect(lat, lng) {\r\n    setOrder({ ...order, location: { lat, lng }, address: `Lat: ${lat}, Lng: ${lng}` });\r\n    setShowMap(false);\r\n  }\r\n\r\n  // Viking art background image (unsplash, semi-transparent overlay)\r\n  const vikingBg = 'https://images.unsplash.com/photo-1506744038136-462fa3a6a7f0?auto=format&fit=crop&w=1200&q=80';\r\n  const [orders, setOrders] = useState([\r\n  ]);\r\n  function handleOrderComplete() {\r\n    if (cart.length > 0) {\r\n      setOrders(prevOrders => [...prevOrders, { items: cart, date: new Date(), status: 'Placed' }]);\r\n      setCart([]);\r\n      setPage('orders');\r\n    } else {\r\n      setPage('orders');\r\n    }\r\n  }\r\n  // Fetch menu and offers from backend for client app\r\n  const [clientMenu, setClientMenu] = useState([]);\r\n  const [clientOffers, setClientOffers] = useState([]);\r\n  const [loadingMenu, setLoadingMenu] = useState(false);\r\n  const [loadingOffers, setLoadingOffers] = useState(false);\r\n  const [menuError, setMenuError] = useState('');\r\n  const [offersError, setOffersError] = useState('');\r\n  const [hotelConfig, setHotelConfig] = useState({ utensils: [], condiments: [] });\r\n  React.useEffect(() => {\r\n    setLoadingMenu(true);\r\n    setMenuError('');\r\n    fetch('/api/admin/menu')\r\n      .then(async res => {\r\n        if (res.ok) return res.json();\r\n        let text; try { text = await res.text(); } catch {}\r\n        throw new Error(text || 'Failed to load menu');\r\n      })\r\n      .then(data => setClientMenu(Array.isArray(data) ? data : []))\r\n      .catch(err => setMenuError(err.message))\r\n      .finally(() => setLoadingMenu(false));\r\n  }, []);\r\n  React.useEffect(() => {\r\n    setLoadingOffers(true);\r\n    setOffersError('');\r\n    fetch('/api/hotel/offers')\r\n      .then(async res => {\r\n        if (res.ok) return res.json();\r\n        let text; try { text = await res.text(); } catch {}\r\n        throw new Error(text || 'Failed to load offers');\r\n      })\r\n      .then(data => setClientOffers(Array.isArray(data) ? data : []))\r\n      .catch(err => setOffersError(err.message))\r\n      .finally(() => setLoadingOffers(false));\r\n  }, []);\r\n  React.useEffect(() => {\r\n    fetch('/api/hotel/config')\r\n      .then(res => res.ok ? res.json() : Promise.resolve({ utensils: [], condiments: [] }))\r\n      .then(cfg => setHotelConfig({ utensils: Array.isArray(cfg.utensils) ? cfg.utensils : [], condiments: Array.isArray(cfg.condiments) ? cfg.condiments : [] }))\r\n      .catch(() => setHotelConfig({ utensils: [], condiments: [] }));\r\n  }, []);\r\n\r\n  // Gate: render SignInPage, but keep hooks above unconditional to preserve order\r\n  if (!user) {\r\n    return <SignInPage onSignIn={handleSignIn} onSignUp={handleSignUp} onResetPin={handleResetPin} />;\r\n  }\r\n\r\n  function MenuWrapper({ selectedCategory, setSelectedCategory, handleOrder }) {\r\n    // Map backend menu items into client categories\r\n    const foods = clientMenu.filter(i => (i.category || 'Foods') === 'Foods');\r\n    const byType = {\r\n      breakfast: foods.filter(i => (i.type || 'Breakfast') === 'Breakfast'),\r\n      brunch: foods.filter(i => (i.type || 'Breakfast') === 'Brunch'),\r\n      lunch: foods.filter(i => (i.type || 'Breakfast') === 'Lunch'),\r\n      dinner: foods.filter(i => (i.type || 'Breakfast') === 'Dinner'),\r\n      supper: foods.filter(i => (i.type || 'Breakfast') === 'Supper'),\r\n      specials: foods.filter(i => (i.type || '') === 'Specials'),\r\n    };\r\n    // Map fields to the shape MenuPage expects, including averageRating and ratingCount\r\n    const mapItem = i => ({\r\n      id: i._id,\r\n      name: i.name,\r\n      desc: i.description,\r\n      price: i.price,\r\n      img: i.image,\r\n      rating: i.rating || undefined,\r\n      averageRating: typeof i.averageRating === 'number' ? i.averageRating : (typeof i.avgRating === 'number' ? i.avgRating : undefined),\r\n      ratingCount: typeof i.ratingCount === 'number' ? i.ratingCount : undefined,\r\n      ingredients: Array.isArray(i.ingredients) ? i.ingredients : [],\r\n      offerActive: !!i.offerActive,\r\n      offerPercent: Number(i.offerPercent || 0)\r\n    });\r\n    const menu = (byType[selectedCategory] || []).map(mapItem);\r\n    if (loadingMenu) return <div>Loading</div>;\r\n    if (menuError) return <div style={{ color: 'crimson' }}>{menuError}</div>;\r\n    return (\r\n      <MenuPage\r\n        menu={menu}\r\n        handleOrder={handleOrder}\r\n        selectedCategory={selectedCategory}\r\n        setSelectedCategory={setSelectedCategory}\r\n      />\r\n    );\r\n  }\r\n\r\n  function OffersWrapper() {\r\n    if (loadingOffers) return <div>Loading</div>;\r\n    if (offersError) return <div style={{ color: 'crimson' }}>{offersError}</div>;\r\n    // Show any menu item with an active offer\r\n    const mapItem = i => ({ id: i._id, name: i.name, desc: i.description, price: i.price, img: i.image, offerPercent: Number(i.offerPercent || 0) });\r\n    const offerItems = clientMenu\r\n      .filter(i => !!i.offerActive && Number(i.offerPercent || 0) > 0)\r\n      .map(mapItem);\r\n    return <OffersPage items={offerItems} />;\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      fontFamily: 'Inter, Arial, sans-serif',\r\n      minHeight: '100vh',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n    }}>\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zIndex: 0,\r\n        backgroundImage: `url(${vikingBg})`,\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n        opacity: 0.35,\r\n        filter: 'blur(2px)',\r\n      }} />\r\n      <div style={{ position: 'relative', zIndex: 1, height: '100vh', overflow: 'hidden' }}>\r\n        <header style={{ position: 'fixed', top: 0, left: 0, width: '100vw', maxWidth: '100vw', background: 'rgba(26,34,54,0.98)', color: '#fff', padding: '1.2rem 1.2rem', display: 'flex', alignItems: 'center', justifyContent: 'space-between', boxShadow: '0 2px 16px #0003', zIndex: 10, borderRadius: 0, fontSize: '1.2rem', flexWrap: 'wrap', boxSizing: 'border-box', overflow: 'hidden' }}>\r\n          <span style={{ fontWeight: 700, fontSize: 24, letterSpacing: 0.5, fontFamily: 'system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif', flexShrink: 0 }}>Floki's</span>\r\n          <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: 18, marginRight: '0.5cm' }}>\r\n            <nav style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'flex-end', gap: 18, fontSize: 18, flexShrink: 1, minWidth: 0 }}>\r\n              <button onClick={() => setPage('menu')} style={{ background: page === 'menu' ? '#ffb300' : 'transparent', color: page === 'menu' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Menu</button>\r\n              <button onClick={() => setPage('offers')} style={{ background: page === 'offers' ? '#ffb300' : 'transparent', color: page === 'offers' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Offers</button>\r\n              <button onClick={() => setPage('cart')} style={{ background: page === 'cart' ? '#ffb300' : 'transparent', color: page === 'cart' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>\r\n                Cart{cart.length > 0 ? ` (${cart.length})` : ''}\r\n              </button>\r\n              <button onClick={() => setPage('track')} style={{ background: page === 'track' ? '#ffb300' : 'transparent', color: page === 'track' ? '#222' : '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', fontSize: 18, padding: '8px 14px', borderRadius: 8, transition: 'background 0.2s', whiteSpace: 'nowrap', minWidth: 0 }}>Track</button>\r\n            </nav>\r\n            <button onClick={() => setPage('profile')} style={{ background: 'transparent', border: 'none', cursor: 'pointer', padding: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', height: 44, marginRight: '0.5cm' }} aria-label=\"Profile\">\r\n              <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <circle cx=\"16\" cy=\"16\" r=\"16\" fill={page === 'profile' ? '#ffb300' : '#e0e0e0'} />\r\n                <ellipse cx=\"16\" cy=\"12\" rx=\"6\" ry=\"6\" fill={page === 'profile' ? '#222' : '#888'} />\r\n                <rect x=\"8\" y=\"20\" width=\"16\" height=\"6\" rx=\"3\" fill={page === 'profile' ? '#222' : '#888'} />\r\n              </svg>\r\n            </button>\r\n            {user && (\r\n              <>\r\n                <span style={{ color: '#fff', fontWeight: 600, fontSize: 17, marginRight: 12 }}>{user.name || user.email}</span>\r\n                <button onClick={() => setShowSignOut(true)} style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 16, cursor: 'pointer', marginLeft: 8 }}>Log Out</button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </header>\r\n        <main style={{ maxWidth: 900, width: '95vw', margin: '6.5rem auto 0 auto', background: 'rgba(255,255,255,0.92)', borderRadius: 18, boxShadow: '0 2px 24px #0002', padding: '2.5rem', backdropFilter: 'blur(2px)', height: 'calc(100vh - 6.5rem)', overflowY: 'auto', boxSizing: 'border-box', position: 'relative' }}>\r\n          {cartNotification && (\r\n            <div\r\n              style={{\r\n                position: 'fixed',\r\n                bottom: 32,\r\n                right: 32,\r\n                background: '#ffb300',\r\n                color: '#222',\r\n                fontWeight: 600,\r\n                fontSize: 18,\r\n                borderRadius: 8,\r\n                padding: '12px 28px',\r\n                boxShadow: '0 2px 8px #0002',\r\n                zIndex: 100,\r\n                opacity: 1,\r\n                transition: 'opacity 1s',\r\n                animation: 'fadeoutnotif 2.2s forwards',\r\n              }}\r\n            >\r\n              {cartNotification}\r\n              <style>{`\r\n                @keyframes fadeoutnotif {\r\n                  0% { opacity: 1; }\r\n                  80% { opacity: 1; }\r\n                  100% { opacity: 0; }\r\n                }\r\n              `}</style>\r\n            </div>\r\n          )}\r\n          {page === 'menu' && (\r\n            <MenuWrapper\r\n              selectedCategory={selectedCategory}\r\n              setSelectedCategory={setSelectedCategory}\r\n              handleOrder={handleOrder}\r\n            />\r\n          )}\r\n          {page === 'instructions' && orderFood && <InstructionsPage food={orderFood} onSubmit={handleInstructionsSubmit} config={hotelConfig} />}\r\n          {/* OrderPage and name/location/payment module fully removed. Only allow adding to cart from instructions page. */}\r\n          {page === 'track' && (\r\n            <Track trackOrders={trackOrders} setTrackOrders={setTrackOrders} config={hotelConfig} />\r\n          )}\r\n          {page === 'offers' && <OffersWrapper />}\r\n          {page === 'cart' && (\r\n            <CartPage cart={cart} setCart={setCart} setPage={setPage} config={hotelConfig} />\r\n          )}\r\n          {page === 'checkout' && (\r\n            <CheckoutPage\r\n              cart={cart}\r\n              setPage={setPage}\r\n              checkoutPayment={order.payment}\r\n              setCheckoutPayment={p => setOrder({ ...order, payment: p })}\r\n              setCart={setCart}\r\n              profile={profile}\r\n              userEmail={user?.email}\r\n              onCheckoutComplete={handleCheckoutComplete}\r\n            />\r\n          )}\r\n          {page === 'profile' && (\r\n            <div style={{ maxWidth: 420, margin: '2rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 4px 32px #0002', padding: '2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n              <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 28, marginBottom: 18 }}>Profile</h2>\r\n              <form style={{ width: '100%' }} onSubmit={e => {\r\n                e.preventDefault();\r\n                if (!profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address) {\r\n                  setProfileWarning('Please fill all fields before saving.');\r\n                  return;\r\n                }\r\n                if (!validateEmail(profile.email)) {\r\n                  setProfileWarning('Please enter a valid email address.');\r\n                  return;\r\n                }\r\n                setProfileEditing(false);\r\n                setProfileWarning('');\r\n                // If email changed, simulate sending confirmation\r\n                if (profile.email !== lastSavedEmail) {\r\n                  setEmailConfirmationMsg('A confirmation email has been sent to ' + profile.email + '. Please check your inbox to confirm your email address.');\r\n                  setEmailConfirmed(false);\r\n                  setLastSavedEmail(profile.email);\r\n                } else {\r\n                  setEmailConfirmationMsg('');\r\n                }\r\n              }}>\r\n                                {/* Checkout popup removed. Checkout is now a dedicated page. */}\r\n                                {emailConfirmationMsg && !emailConfirmed && (\r\n                                  <div style={{ color: '#1a2236', fontWeight: 600, fontSize: 16, marginBottom: 12, background: '#fffbe6', borderRadius: 8, padding: '10px 18px', border: '1px solid #ffe082' }}>\r\n                                    {emailConfirmationMsg}\r\n                                    <button\r\n                                      type=\"button\"\r\n                                      onClick={() => setEmailConfirmed(true)}\r\n                                      style={{ marginLeft: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}\r\n                                    >\r\n                                      Confirm Email\r\n                                    </button>\r\n                                  </div>\r\n                                )}\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Name<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"text\" value={profile.name} onChange={e => setProfile({ ...profile, name: e.target.value })} style={{ ...inputStyle, borderColor: !profile.name && profileEditing ? 'red' : '#ccc', background: !profile.name && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Full Name\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Age<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"number\" value={profile.age} onChange={e => setProfile({ ...profile, age: e.target.value })} style={{ ...inputStyle, borderColor: !profile.age && profileEditing ? 'red' : '#ccc', background: !profile.age && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Age\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Sex<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <select value={profile.sex} onChange={e => setProfile({ ...profile, sex: e.target.value })} style={{ ...inputStyle, borderColor: !profile.sex && profileEditing ? 'red' : '#ccc', background: !profile.sex && profileEditing ? '#fff0f0' : '#fff' }} required disabled={!profileEditing}>\r\n                    <option value=\"\">Select</option>\r\n                    <option value=\"Male\">Male</option>\r\n                    <option value=\"Female\">Female</option>\r\n                    <option value=\"Other\">Other</option>\r\n                  </select>\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Phone<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"tel\" value={profile.phone} onChange={e => setProfile({ ...profile, phone: e.target.value })} style={{ ...inputStyle, borderColor: !profile.phone && profileEditing ? 'red' : '#ccc', background: !profile.phone && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Phone Number\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Email<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <input type=\"email\" value={profile.email} onChange={e => setProfile({ ...profile, email: e.target.value })} style={{ ...inputStyle, borderColor: !profile.email && profileEditing ? 'red' : '#ccc', background: !profile.email && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Email Address\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Allergies<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <textarea value={profile.allergies} onChange={e => setProfile({ ...profile, allergies: e.target.value })} style={{ ...inputStyle, borderColor: !profile.allergies && profileEditing ? 'red' : '#ccc', background: !profile.allergies && profileEditing ? '#fff0f0' : '#fff' }} placeholder=\"Any allergies?\" required disabled={!profileEditing} />\r\n                </div>\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Address<span style={{ color: 'red' }}> *</span>:</label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    <input type=\"text\" value={profile.address} onChange={e => setProfile({ ...profile, address: e.target.value })} style={{ ...inputStyle, flex: 1, borderColor: !profile.address && profileEditing ? 'red' : '#ccc', background: !profile.address && profileEditing ? '#fff0f0' : '#fff' }} required disabled={!profileEditing} />\r\n                    {profileEditing && (\r\n                      <button type=\"button\" onClick={() => setProfileMapOpen(true)} style={{ background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '8px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16 }}>Location</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                          {profileMapOpen && (\r\n                            <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                              <div style={{ background: '#fff', borderRadius: 16, padding: '2.5rem 2rem', maxWidth: 480, width: 'auto', boxShadow: '0 4px 32px #0003', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', margin: 'auto' }}>\r\n                                <h3 style={{ marginTop: 0, fontSize: 24, fontWeight: 700, color: '#1a2236', marginBottom: 12 }}>Select Location</h3>\r\n                                <div style={{ marginBottom: 18, width: '100%', maxWidth: 400, height: 300 }}>\r\n                                  {/* Google Maps Embed API interactive map */}\r\n                                  <iframe\r\n                                    title=\"Google Map\"\r\n                                    width=\"100%\"\r\n                                    height=\"300\"\r\n                                    style={{ borderRadius: 8, border: 'none' }}\r\n                                    src=\"https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=Kisii,Kenya\"\r\n                                    allowFullScreen\r\n                                  ></iframe>\r\n                                  <div style={{ color: '#888', fontSize: 15, marginTop: 8 }}>Drag map and click 'Set Location' to save.</div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%' }}>\r\n                                  <button onClick={() => setProfileMapOpen(false)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '10px 28px', fontWeight: 600, cursor: 'pointer', fontSize: 17 }}>Cancel</button>\r\n                                  <button onClick={() => {\r\n                                    // Simulate setting location, you can integrate with map click event for real coordinates\r\n                                    setProfile({ ...profile, address: 'Lat: -1.2921, Lng: 36.8219' });\r\n                                    setProfileMapOpen(false);\r\n                                  }} style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 8, padding: '10px 28px', fontWeight: 600, cursor: 'pointer', fontSize: 17 }}>Set Location</button>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                {profileEditing ? (\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ marginTop: 12, background: !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address ? '#ccc' : '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address ? 'not-allowed' : 'pointer', width: '100%' }}\r\n                    disabled={\r\n                      !profile.name || !profile.age || !profile.sex || !profile.phone || !profile.email || !profile.allergies || !profile.address\r\n                    }\r\n                  >\r\n                    Save Profile\r\n                  </button>\r\n                ) : (\r\n                  <button type=\"button\" onClick={() => setProfileEditing(true)} style={{ marginTop: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}>Edit Profile</button>\r\n                )}\r\n                <button type=\"button\" onClick={() => setPage('menu')} style={{ marginTop: 12, background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 10, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}>Back to Menu</button>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n      {/* Auth Modals */}\r\n      <SignOutModal open={showSignOut} onClose={() => setShowSignOut(false)} onSignOut={handleSignOut} />\r\n      {/* Floating Log Out button removed per request */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InstructionsPage({ food, onSubmit, config }) {\r\n  const [utensils, setUtensils] = useState([]);\r\n  const [condiments, setCondiments] = useState([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [deliveryNotes, setDeliveryNotes] = useState('');\r\n  const [qty, setQty] = useState(food.quantity || 1);\r\n  const availableCondiments = Array.isArray(config?.condiments) ? config.condiments : [];\r\n  const availableUtensils = Array.isArray(config?.utensils) ? config.utensils : [];\r\n  const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n  \r\n  function toggleUtensil(ut) {\r\n    setUtensils(utensils.includes(ut) ? utensils.filter(u => u !== ut) : [...utensils, ut]);\r\n  }\r\n  \r\n  function addCondiment(cond) {\r\n    setCondiments([...condiments, cond]);\r\n  }\r\n  \r\n  function removeCondiment(idx) {\r\n    setCondiments(condiments.filter((_, i) => i !== idx));\r\n  }\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit({ utensils, condiments, notes, deliveryNotes, qty });\r\n  }\r\n  \r\n  const utensilCost = utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n  const total = (qty * food.price) + utensilCost;\r\n  \r\n  return (\r\n    <div style={{ maxWidth: 520, margin: '2rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 4px 32px #0002', padding: '2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n      <img src={food.img || 'https://via.placeholder.com/180?text=No+Image'} alt={food.name} style={{ width: 180, height: 180, objectFit: 'cover', borderRadius: 16, marginBottom: 18, boxShadow: '0 2px 12px #0001' }} />\r\n      <div style={{ fontWeight: 700, fontSize: 30, marginBottom: 8, color: '#1a2236', letterSpacing: 1 }}>{food.name}</div>\r\n      <div style={{ color: '#555', marginBottom: 12, fontSize: 18 }}>{food.desc}</div>\r\n      <div style={{ fontWeight: 600, color: '#ffb300', fontSize: 22, marginBottom: 6 }}>Ksh {food.price}</div>\r\n      <span style={{ color: '#f39c12', fontWeight: 600, fontSize: 17, marginBottom: 18 }}>Rating: {food.rating} </span>\r\n      <form onSubmit={handleSubmit} style={{ width: '100%' }}>\r\n        {availableUtensils.length > 0 && (\r\n          <div style={{ marginBottom: 24 }}>\r\n            <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Utensils Needed:</div>\r\n            <div style={{ display: 'flex', gap: 18, marginBottom: 8, flexWrap: 'wrap' }}>\r\n              {availableUtensils.map(ut => (\r\n                <label key={ut} style={{ fontWeight: 500, display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                  <input type=\"checkbox\" checked={utensils.includes(ut)} onChange={() => toggleUtensil(ut)} style={{ accentColor: '#ffb300', width: 18, height: 18 }} /> {ut}\r\n                  {utensilPrices[ut] ? (\r\n                    <span style={{ color: '#888', fontSize: 14, marginLeft: 4 }}>+{utensilPrices[ut]} Ksh</span>\r\n                  ) : null}\r\n                </label>\r\n              ))}\r\n            </div>\r\n            {utensils.length > 0 && (\r\n              <div style={{ color: '#1a2236', fontWeight: 500, fontSize: 15, marginTop: 6 }}>\r\n                Utensil cost: <span style={{ color: '#ffb300', fontWeight: 700 }}>{utensilCost} Ksh</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {availableCondiments.length > 0 && (\r\n          <div style={{ marginBottom: 24 }}>\r\n            <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Condiments:</div>\r\n            <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap', marginBottom: 8 }}>\r\n              {availableCondiments.map(cond => (\r\n                <button type=\"button\" key={cond} onClick={() => addCondiment(cond)} style={{ background: '#f7f7fa', color: '#222', border: '1px solid #ddd', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16, boxShadow: '0 1px 4px #0001' }}>{cond} +</button>\r\n              ))}\r\n            </div>\r\n            <ul style={{ marginTop: 12, paddingLeft: 18 }}>\r\n              {condiments.map((cond, idx) => (\r\n                <li key={idx} style={{ color: '#555', fontSize: 15, marginBottom: 6 }}>\r\n                  {cond} <button type=\"button\" onClick={() => removeCondiment(idx)} style={{ marginLeft: 8, background: '#ffb300', color: '#222', border: 'none', borderRadius: 6, padding: '2px 8px', fontWeight: 600, cursor: 'pointer', fontSize: 14 }}>Remove</button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n        <div style={{ marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Additional Notes:</div>\r\n          <textarea value={notes} onChange={e => setNotes(e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 10, border: '1px solid #ccc', fontSize: 16, padding: 10, background: '#f7f7fa', marginTop: 4 }} placeholder=\"Any special instructions?\" />\r\n        </div>\r\n        <div style={{ marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8, color: '#1a2236' }}>Delivery Instructions (for courier):</div>\r\n          <textarea value={deliveryNotes} onChange={e => setDeliveryNotes(e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 10, border: '1px solid #ccc', fontSize: 16, padding: 10, background: '#f7f7fa', marginTop: 4 }} placeholder=\"e.g., Call on arrival, gate code, landmarks\" />\r\n        </div>\r\n        <div style={{ marginBottom: 24, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 12 }}>\r\n          <div style={{ fontWeight: 600, color: '#1a2236' }}>Quantity:</div>\r\n          <button type=\"button\" onClick={() => setQty(qty > 1 ? qty - 1 : 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, cursor: 'pointer', fontSize: 20, boxShadow: '0 1px 4px #0001' }}>-</button>\r\n          <span style={{ margin: '0 12px', fontWeight: 700, fontSize: 20 }}>{qty}</span>\r\n          <button type=\"button\" onClick={() => setQty(qty + 1)} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, cursor: 'pointer', fontSize: 20, boxShadow: '0 1px 4px #0001' }}>+</button>\r\n        </div>\r\n        <button type=\"submit\" style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', marginTop: 8, boxShadow: '0 2px 8px #0002', width: '100%' }}>\r\n          {`Add to Cart (${qty}) ${total.toLocaleString()} Kshs`}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CartPage({ cart, setCart, setPage, config }) {\r\n    // Checkout popup state removed. Dedicated page is used.\r\n  const [editingIdx, setEditingIdx] = useState(null);\r\n  const [editItem, setEditItem] = useState(null);\r\n  const [deleteIdx, setDeleteIdx] = useState(null);\r\n  const utensilPrices = { Spoon: 20, Plate: 50, Cup: 20 };\r\n  const availableCondiments = Array.isArray(config?.condiments) ? config.condiments : [];\r\n  function handleDelete(idx) {\r\n    setDeleteIdx(idx);\r\n  }\r\n  function confirmDelete() {\r\n    setCart(cart.filter((_, i) => i !== deleteIdx));\r\n    setDeleteIdx(null);\r\n  }\r\n  function cancelDelete() {\r\n    setDeleteIdx(null);\r\n  }\r\n  function handleEdit(idx) {\r\n    setEditingIdx(idx);\r\n    setEditItem({ ...cart[idx] });\r\n  }\r\n  function handleEditChange(field, value) {\r\n    setEditItem({ ...editItem, [field]: value });\r\n  }\r\n  function toggleUtensil(ut) {\r\n    setEditItem({ ...editItem, utensils: editItem.utensils.includes(ut) ? editItem.utensils.filter(u => u !== ut) : [...editItem.utensils, ut] });\r\n  }\r\n  function addCondiment(cond) {\r\n    setEditItem({ ...editItem, condiments: [...editItem.condiments, cond] });\r\n  }\r\n  function removeCondiment(idx) {\r\n    setEditItem({ ...editItem, condiments: editItem.condiments.filter((_, i) => i !== idx) });\r\n  }\r\n  function handleSaveEdit() {\r\n    const utensilCost = editItem.utensils.reduce((sum, ut) => sum + (utensilPrices[ut] || 0), 0);\r\n    const total = editItem.qty * editItem.price + utensilCost;\r\n    setCart(cart.map((item, idx) => idx === editingIdx ? { ...editItem, utensilCost, total } : item));\r\n    setEditingIdx(null);\r\n    setEditItem(null);\r\n  }\r\n  return (\r\n    <div>\r\n      <h2 style={{ color: '#1a2236', marginBottom: 18 }}>Cart</h2>\r\n      {cart.length === 0 ? (\r\n        <div style={{ color: '#888', fontSize: 18 }}>Cart is empty.</div>\r\n      ) : (\r\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n          {cart.map((item, idx) => (\r\n            <li key={idx} style={{ marginBottom: 14, display: 'flex', alignItems: 'center', background: '#f7f7fa', borderRadius: 10, padding: '12px 14px', boxShadow: '0 1px 6px #0001' }}>\r\n              <span style={{ fontWeight: 700, fontSize: 18, color: '#ffb300', marginRight: 16 }}>{idx + 1}.</span>\r\n              <img src={item.img || 'https://via.placeholder.com/40?text=No+Image'} alt={item.name} style={{ width: 48, height: 48, objectFit: 'cover', borderRadius: 10, marginRight: 16 }} />\r\n              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 18, color: '#1a2236' }}>{item.name}</div>\r\n                <div style={{ color: '#555', fontSize: 15 }}>Qty: {item.qty}</div>\r\n                <div style={{ fontWeight: 700, color: '#ffb300', fontSize: 16, marginTop: 2 }}>{item.total} Ksh</div>\r\n                {item.utensils && item.utensils.length > 0 && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Utensils: {item.utensils.join(', ')}</div>\r\n                )}\r\n                {item.condiments && item.condiments.length > 0 && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Condiments: {item.condiments.join(', ')}</div>\r\n                )}\r\n                {item.notes && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Notes: {item.notes}</div>\r\n                )}\r\n                {item.deliveryNotes && (\r\n                  <div style={{ color: '#888', fontSize: 14 }}>Delivery: {item.deliveryNotes}</div>\r\n                )}\r\n              </div>\r\n              <button onClick={() => handleEdit(idx)} style={{ marginLeft: 12, background: '#ffb300', color: '#222', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}>Edit</button>\r\n              <button onClick={() => handleDelete(idx)} style={{ marginLeft: 8, background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 15 }}>Delete</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {editingIdx !== null && editItem && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100vw',\r\n          height: '100vh',\r\n          background: 'rgba(26,34,54,0.55)',\r\n          zIndex: 1000,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          backdropFilter: 'blur(2px)',\r\n          overflow: 'hidden',\r\n          pointerEvents: 'auto',\r\n        }}>\r\n          <div style={{\r\n            background: '#fff',\r\n            borderRadius: 24,\r\n            padding: '2.5rem',\r\n            maxWidth: 420,\r\n            width: '90vw',\r\n            boxShadow: '0 8px 32px #1a223633',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            margin: 'auto',\r\n            border: '2px solid #ffb300',\r\n            animation: 'popin 0.25s',\r\n            overflow: 'visible',\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: 'calc(50% - 6cm)',\r\n            transform: 'translate(-50%, -50%)',\r\n          }}>\r\n            <h3 style={{ marginTop: 0, fontSize: 24, fontWeight: 700, color: '#1a2236', marginBottom: 18 }}>Edit Item</h3>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Quantity:</label>\r\n              <input type=\"number\" min={1} value={editItem.qty} onChange={e => handleEditChange('qty', Number(e.target.value))} style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #ccc', fontSize: 16, marginTop: 6 }} />\r\n            </div>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Notes:</label>\r\n              <textarea value={editItem.notes || ''} onChange={e => handleEditChange('notes', e.target.value)} style={{ width: '100%', minHeight: 60, borderRadius: 8, border: '1px solid #ccc', fontSize: 16, padding: 10, marginTop: 6 }} />\r\n            </div>\r\n            <div style={{ width: '100%', marginBottom: 16 }}>\r\n              <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Utensils:</label>\r\n              <div style={{ display: 'flex', gap: 12, marginTop: 6 }}>\r\n                {['Spoon', 'Plate', 'Cup'].map(ut => (\r\n                  <label key={ut} style={{ fontWeight: 500, display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                    <input type=\"checkbox\" checked={editItem.utensils && editItem.utensils.includes(ut)} onChange={() => toggleUtensil(ut)} style={{ accentColor: '#ffb300', width: 18, height: 18 }} /> {ut}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            {availableCondiments.length > 0 && (\r\n              <div style={{ width: '100%', marginBottom: 16 }}>\r\n                <label style={{ fontWeight: 600, color: '#1a2236', fontSize: 18 }}>Condiments:</label>\r\n                <div style={{ display: 'flex', gap: 10, flexWrap: 'wrap', marginTop: 6 }}>\r\n                  {availableCondiments.map(cond => (\r\n                    <button type=\"button\" key={cond} onClick={() => addCondiment(cond)} style={{ background: '#f7f7fa', color: '#222', border: '1px solid #ddd', borderRadius: 8, padding: '6px 16px', fontWeight: 600, cursor: 'pointer', fontSize: 16, boxShadow: '0 1px 4px #0001' }}>{cond} +</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%', marginTop: 18 }}>\r\n              <button onClick={handleSaveEdit} style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 32px', fontWeight: 700, fontSize: 18, cursor: 'pointer', boxShadow: '0 2px 8px #0002', transition: 'background 0.2s' }}>Save</button>\r\n              <button onClick={() => { setEditingIdx(null); setEditItem(null); }} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 10, padding: '12px 32px', fontWeight: 700, fontSize: 18, cursor: 'pointer', boxShadow: '0 2px 8px #0001', transition: 'background 0.2s' }}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {deleteIdx !== null && (\r\n        <>\r\n          <style>{`\r\n            body.modal-open {\r\n              overflow: hidden !important;\r\n            }\r\n          `}</style>\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            background: 'rgba(26,34,54,0.55)',\r\n            zIndex: 1000,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            backdropFilter: 'blur(2px)',\r\n            overflow: 'hidden',\r\n            pointerEvents: 'auto',\r\n          }}>\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, #fff 80%, #ffb300 100%)',\r\n              borderRadius: 24,\r\n              padding: '3rem 2.5rem',\r\n              maxWidth: 420,\r\n              width: '90vw',\r\n              boxShadow: '0 8px 32px #1a223633',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              margin: 'auto',\r\n              border: '2px solid #ffb300',\r\n              animation: 'popin 0.25s',\r\n              overflow: 'visible',\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: 'calc(50% - 6.5cm)',\r\n              transform: 'translate(-50%, -50%)',\r\n            }}>\r\n              <style>{`\r\n                @keyframes popin {\r\n                  0% { transform: scale(0.95); opacity: 0.7; }\r\n                  100% { transform: scale(1); opacity: 1; }\r\n                }\r\n              `}</style>\r\n              <div style={{\r\n                width: 64,\r\n                height: 64,\r\n                borderRadius: '50%',\r\n                background: '#ffb300',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                marginBottom: 18,\r\n                boxShadow: '0 2px 8px #ffb30044',\r\n              }}>\r\n                <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <circle cx=\"18\" cy=\"18\" r=\"18\" fill=\"#fff\" />\r\n                  <path d=\"M12 24l12-12M24 24L12 12\" stroke=\"#e74c3c\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n                </svg>\r\n              </div>\r\n              <h3 style={{ marginTop: 0, fontSize: 26, fontWeight: 700, color: '#1a2236', marginBottom: 10, letterSpacing: 1 }}>Remove Item?</h3>\r\n              <p style={{ fontSize: 18, color: '#555', marginBottom: 22, textAlign: 'center', maxWidth: 320 }}>Are you sure you want to remove this item from your cart? This action cannot be undone.</p>\r\n              <div style={{ display: 'flex', gap: 18, justifyContent: 'center', width: '100%' }}>\r\n                <button onClick={cancelDelete} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 12, padding: '12px 32px', fontWeight: 700, cursor: 'pointer', fontSize: 18, boxShadow: '0 2px 8px #0001', transition: 'background 0.2s' }}>Cancel</button>\r\n                <button onClick={confirmDelete} style={{ background: 'linear-gradient(90deg, #e74c3c 80%, #ffb300 100%)', color: '#fff', border: 'none', borderRadius: 12, padding: '12px 32px', fontWeight: 700, cursor: 'pointer', fontSize: 18, boxShadow: '0 2px 8px #e74c3c33', transition: 'background 0.2s' }}>Delete</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n      {cart.length > 0 && (\r\n        <div style={{ marginTop: 24, padding: '18px', background: '#f7f7fa', borderRadius: 12 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22, marginBottom: 12 }}>Order Summary</div>\r\n          <div style={{ fontWeight: 700, fontSize: 20, color: '#ffb300' }}>Grand Total: {cart.reduce((sum, item) => sum + item.total, 0)} Ksh</div>\r\n          <button\r\n            style={{ marginTop: 18, background: '#1a2236', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 28px', fontWeight: 700, fontSize: 18, cursor: 'pointer', width: '100%' }}\r\n            onClick={() => setPage('checkout')}\r\n          >Checkout</button>\r\n        </div>\r\n      )}\r\n      {/* Checkout popup/modal removed. Checkout is now a dedicated page. */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CheckoutPage({ cart, setPage, checkoutPayment, setCheckoutPayment, onCheckoutComplete, profile, userEmail }) {\r\n  const [deliveryType, setDeliveryType] = React.useState('');\r\n  const [cardDetails, setCardDetails] = React.useState({ number: '', name: '', expiry: '', cvv: '' });\r\n  const [processing, setProcessing] = React.useState(false);\r\n  const [successMsg, setSuccessMsg] = React.useState('');\r\n  const [errorMsg, setErrorMsg] = React.useState('');\r\n  const [mpesaStatus, setMpesaStatus] = React.useState('');\r\n  const [mpesaNumber, setMpesaNumber] = React.useState('');\r\n  const [mpesaPushed, setMpesaPushed] = React.useState(false);\r\n\r\n  const baseTotal = cart.reduce((sum, item) => sum + item.total, 0);\r\n  const deliveryFee = deliveryType === 'Delivery' ? 50 : 0;\r\n  const grandTotal = baseTotal + deliveryFee;\r\n\r\n  function handleCardInput(e) {\r\n    const { name, value } = e.target;\r\n    setCardDetails(prev => ({ ...prev, [name]: value }));\r\n  }\r\n\r\n  function isValidMpesaNumber(num) {\r\n    return (/^(07\\d{8}|011\\d{7})$/).test(num);\r\n  }\r\n\r\n  async function handleMpesaPush() {\r\n    setErrorMsg('');\r\n    setMpesaStatus('Initiating M-Pesa payment...');\r\n    setProcessing(true);\r\n    try {\r\n      let phone = mpesaNumber;\r\n      if (phone.startsWith('0')) phone = '254' + phone.slice(1);\r\n      const res = await fetch('/api/mpesa/stkpush', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ amount: grandTotal, phone }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.error) throw new Error(data.error.message || data.error);\r\n      setMpesaStatus('STK Push sent. Enter your M-Pesa PIN.');\r\n      setMpesaPushed(true);\r\n      setProcessing(false);\r\n    } catch (err) {\r\n      setErrorMsg('M-Pesa error: ' + err.message);\r\n      setProcessing(false);\r\n      setMpesaStatus('');\r\n    }\r\n  }\r\n\r\n  async function handlePlaceOrder() {\r\n    setErrorMsg('');\r\n    if (cart.length === 0) { setErrorMsg('Cart is empty.'); return; }\r\n    if (!deliveryType) { setErrorMsg('Please select Pickup or Delivery.'); return; }\r\n    if (checkoutPayment === 'M-Pesa' && !mpesaPushed) { setErrorMsg('Please push M-Pesa first.'); return; }\r\n    setProcessing(true);\r\n\r\n    const payload = {\r\n      items: cart.map(item => ({ menuItem: item.id, quantity: item.qty })),\r\n      clientEmail: (profile?.email || userEmail || ''),\r\n      clientName: (profile?.name && profile.name.trim()) ? profile.name.trim() : (profile?.email || userEmail || ''),\r\n      clientPhone: profile?.phone || '',\r\n      deliveryAddress: profile?.address || '',\r\n      deliveryType,\r\n      status: 'pending',\r\n      total: grandTotal,\r\n      paymentStatus: checkoutPayment === 'Card' ? 'paid' : 'pending'\r\n    };\r\n\r\n    try {\r\n      const res = await fetch('/api/hotel/orders', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok || data.error) throw new Error(data.error || 'Failed to place order');\r\n      setSuccessMsg(`Order placed! Grand Total: ${grandTotal} Ksh`);\r\n      setProcessing(false);\r\n      onCheckoutComplete && onCheckoutComplete(\r\n        cart.map(item => ({ ...item })),\r\n        deliveryType,\r\n        grandTotal,\r\n        data._id\r\n      );\r\n    } catch (err) {\r\n      setErrorMsg(err.message);\r\n      setProcessing(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (successMsg) {\r\n      const t = setTimeout(() => { setPage('track'); }, 2200);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [successMsg, setPage]);\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '4rem auto', background: '#fff', borderRadius: 24, boxShadow: '0 6px 32px #0003', padding: '3rem 2.5rem', display: 'flex', flexDirection: 'column', alignItems: 'center', minHeight: 420 }}>\r\n      <h2 style={{ color: '#1a2236', fontWeight: 700, fontSize: 34, marginBottom: 24, letterSpacing: 1 }}>Checkout</h2>\r\n      {/* Delivery/Pickup selection mandatory */}\r\n      <div style={{ width: '100%', marginBottom: 24 }}>\r\n        <label style={{ fontWeight: 700, fontSize: 20, color: '#1a2236', marginBottom: 10 }}>Choose Delivery Type <span style={{ color: 'red' }}>*</span></label>\r\n        <select value={deliveryType} onChange={e => setDeliveryType(e.target.value)} style={{ width: '100%', padding: '12px', borderRadius: 10, border: '1px solid #ccc', fontSize: 18, marginTop: 8, marginBottom: 8 }} required>\r\n          <option value=\"\">Select</option>\r\n          <option value=\"Pickup\">Pickup</option>\r\n          <option value=\"Delivery\">Delivery (+50 Ksh)</option>\r\n        </select>\r\n      </div>\r\n      {successMsg ? (\r\n        <div style={{ color: '#1a8f3c', fontWeight: 700, fontSize: 22, marginBottom: 18 }}>{successMsg}</div>\r\n      ) : <>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22, marginBottom: 10 }}>Order Items</div>\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n            {cart.map((item, idx) => (\r\n              <li key={idx} style={{ marginBottom: 18, display: 'flex', alignItems: 'center', background: '#f7f7fa', borderRadius: 12, padding: '14px 18px', boxShadow: '0 1px 8px #0001' }}>\r\n                <img src={item.img || 'https://via.placeholder.com/48?text=No+Image'} alt={item.name} style={{ width: 56, height: 56, objectFit: 'cover', borderRadius: 12, marginRight: 18 }} />\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ fontWeight: 700, fontSize: 20, color: '#1a2236' }}>{item.name}</div>\r\n                  <div style={{ color: '#555', fontSize: 16 }}>Qty: {item.qty}</div>\r\n                  {item.offerActive && item.offerPercent > 0 ? (\r\n                    <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\r\n                      <div style={{ fontWeight: 700, color: '#ff5252', fontSize: 18, marginTop: 2 }}>{item.total} Ksh</div>\r\n                      <div style={{ color: '#888', textDecoration: 'line-through' }}>Ksh {(item.price * item.qty).toLocaleString()}</div>\r\n                      <span style={{ background: '#ffb300', color: '#222', borderRadius: 6, padding: '2px 8px', fontWeight: 700, fontSize: 12 }}>-{item.offerPercent}%</span>\r\n                    </div>\r\n                  ) : (\r\n                    <div style={{ fontWeight: 700, color: '#ffb300', fontSize: 18, marginTop: 2 }}>{item.total} Ksh</div>\r\n                  )}\r\n                  {item.deliveryNotes && (\r\n                    <div style={{ color: '#888', fontSize: 14, marginTop: 4 }}>Delivery: {item.deliveryNotes}</div>\r\n                  )}\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <div style={{ fontWeight: 700, fontSize: 22 }}>Grand Total</div>\r\n          <div style={{ fontWeight: 700, fontSize: 28, color: '#ffb300', marginTop: 8 }}>{grandTotal} Ksh</div>\r\n          {deliveryType === 'Delivery' && (\r\n            <div style={{ color: '#888', fontSize: 16, marginTop: 4 }}>Includes 50 Ksh delivery fee</div>\r\n          )}\r\n        </div>\r\n        <div style={{ width: '100%', marginBottom: 24 }}>\r\n          <label style={{ fontWeight: 700, fontSize: 20, color: '#1a2236', marginBottom: 10 }}>Payment Method</label>\r\n          <select value={checkoutPayment} onChange={e => setCheckoutPayment(e.target.value)} style={{ width: '100%', padding: '12px', borderRadius: 10, border: '1px solid #ccc', fontSize: 18, marginTop: 8, marginBottom: 8 }}>\r\n            <option value=\"Cash\">Cash</option>\r\n            <option value=\"M-Pesa\">M-Pesa</option>\r\n            <option value=\"Card\">Card</option>\r\n          </select>\r\n        </div>\r\n        {checkoutPayment === 'M-Pesa' && (\r\n          <div style={{ width: '100%', marginBottom: 24, display: 'flex', alignItems: 'center', gap: 12 }}>\r\n            <input\r\n              type=\"tel\"\r\n              placeholder=\"M-Pesa Number (07XXXXXXXX or 011XXXXXXX)\"\r\n              value={mpesaNumber}\r\n              onChange={e => {\r\n                setMpesaNumber(e.target.value.replace(/[^0-9]/g, '').slice(0, 10));\r\n                setMpesaPushed(false);\r\n              }}\r\n              style={{ flex: 1, padding: 12, borderRadius: 10, border: '1px solid #ccc', fontSize: 18 }}\r\n              disabled={processing}\r\n              maxLength={10}\r\n            />\r\n            <button\r\n              style={{ background: isValidMpesaNumber(mpesaNumber) && !processing ? '#1a2236' : '#ccc', color: '#fff', border: 'none', borderRadius: 10, padding: '12px 18px', fontWeight: 700, fontSize: 18, cursor: isValidMpesaNumber(mpesaNumber) && !processing ? 'pointer' : 'not-allowed' }}\r\n              onClick={handleMpesaPush}\r\n              disabled={!isValidMpesaNumber(mpesaNumber) || processing || mpesaPushed}\r\n            >Push</button>\r\n          </div>\r\n        )}\r\n        {mpesaStatus && <div style={{ color: '#1a2236', fontWeight: 600, marginBottom: 12 }}>{mpesaStatus}</div>}\r\n        {errorMsg && <div style={{ color: '#e74c3c', fontWeight: 600, marginBottom: 12 }}>{errorMsg}</div>}\r\n        <button\r\n          style={{ background: processing || !deliveryType ? '#ccc' : '#1a2236', color: '#fff', border: 'none', borderRadius: 12, padding: '16px 32px', fontWeight: 700, fontSize: 22, cursor: processing || !deliveryType ? 'not-allowed' : 'pointer', width: '100%', marginBottom: 12, boxShadow: '0 2px 8px #0002' }}\r\n          onClick={handlePlaceOrder}\r\n          disabled={processing || !deliveryType || (checkoutPayment === 'M-Pesa' && !mpesaPushed) || (checkoutPayment === 'Card' && !isValidCard(cardDetails))}\r\n        >{processing ? 'Processing...' : 'Checkout'}</button>\r\n        <button onClick={() => setPage('cart')} style={{ background: '#e0e0e0', color: '#222', border: 'none', borderRadius: 12, padding: '12px 28px', fontWeight: 700, fontSize: 18, cursor: processing ? 'not-allowed' : 'pointer', width: '100%' }} disabled={processing}>Back to Cart</button>\r\n      </>}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}