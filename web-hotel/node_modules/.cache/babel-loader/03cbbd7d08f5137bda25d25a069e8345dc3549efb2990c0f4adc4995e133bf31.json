{"ast":null,"code":"import React,{useEffect,useState}from'react';import{HotelAPI}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReviewsPage(){const[reviews,setReviews]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{async function fetchReviews(){setLoading(true);setError('');try{const data=await HotelAPI.listReviews();setReviews(Array.isArray(data)?data:[]);}catch(e){setError(e.message||'Failed to load reviews');}finally{setLoading(false);}}fetchReviews();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:900,margin:'0 auto',padding:'1.5rem 0'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#1a2236',marginBottom:24},children:\"Customer Ratings & Reviews\"}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#1a2236'},children:\"Loading reviews\\u2026\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson',fontWeight:600},children:error}),!loading&&!error&&reviews.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#8a8fa3',fontSize:16},children:\"No reviews yet.\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:24},children:reviews.map((r,i)=>{var _r$menuItem,_r$orderId,_r$orderId2;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:12,boxShadow:'0 2px 12px #0001',padding:'1.25rem 1.5rem',display:'flex',flexDirection:'column',gap:8,borderLeft:\"6px solid \".concat(getRatingColor(r.rating))},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:18},children:[/*#__PURE__*/_jsx(ItemImage,{item:r.menuItem}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#1a2236',fontWeight:600,fontSize:17},children:((_r$menuItem=r.menuItem)===null||_r$menuItem===void 0?void 0:_r$menuItem.name)||''}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:22,fontWeight:700,color:getRatingColor(r.rating)},children:renderStars(r.rating)})]}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#8a8fa3',fontSize:14,marginLeft:'auto'},children:formatDateTime(r.createdAt)})]}),r.comment&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#2d3a58',fontSize:16},children:r.comment}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#8a8fa3',fontSize:13},children:[((_r$orderId=r.orderId)===null||_r$orderId===void 0?void 0:_r$orderId.clientName)&&/*#__PURE__*/_jsxs(\"span\",{children:[\"By \",r.orderId.clientName]}),((_r$orderId2=r.orderId)===null||_r$orderId2===void 0?void 0:_r$orderId2._id)&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:8,color:'#b0b4c3'},children:[\"Order #\",String(r.orderId._id).slice(-6).toUpperCase()]})]})]},r._id||i);})})]});}function ItemImage(_ref){let{item}=_ref;// Use item.image or item.photo if available, else fallback to a placeholder\nconst src=(item===null||item===void 0?void 0:item.image)||(item===null||item===void 0?void 0:item.photo)||'https://via.placeholder.com/64x64?text=No+Image';return/*#__PURE__*/_jsx(\"img\",{src:src,alt:(item===null||item===void 0?void 0:item.name)||'Menu Item',style:{width:64,height:64,objectFit:'cover',borderRadius:8,background:'#f0f0f0',marginRight:8}});}function renderStars(rating){const n=Math.round(Number(rating)||0);return'★'.repeat(n)+'☆'.repeat(5-n);}function getRatingColor(rating){const n=Math.round(Number(rating)||0);if(n>=5)return'#1a8f3c';if(n>=4)return'#4caf50';if(n>=3)return'#ffb300';if(n>=2)return'#ff7043';return'#e53935';}function formatDateTime(iso){try{const d=new Date(iso);return d.toLocaleString();}catch(_unused){return iso;}}","map":{"version":3,"names":["React","useEffect","useState","HotelAPI","jsx","_jsx","jsxs","_jsxs","ReviewsPage","reviews","setReviews","loading","setLoading","error","setError","fetchReviews","data","listReviews","Array","isArray","e","message","style","maxWidth","margin","padding","children","color","marginBottom","fontWeight","length","fontSize","display","gap","map","r","i","_r$menuItem","_r$orderId","_r$orderId2","background","borderRadius","boxShadow","flexDirection","borderLeft","concat","getRatingColor","rating","alignItems","ItemImage","item","menuItem","name","renderStars","marginLeft","formatDateTime","createdAt","comment","orderId","clientName","_id","String","slice","toUpperCase","_ref","src","image","photo","alt","width","height","objectFit","marginRight","n","Math","round","Number","repeat","iso","d","Date","toLocaleString","_unused"],"sources":["C:/Floki/web-hotel/src/pages/ReviewsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { HotelAPI } from '../api';\r\n\r\n\r\nexport default function ReviewsPage() {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    async function fetchReviews() {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const data = await HotelAPI.listReviews();\r\n        setReviews(Array.isArray(data) ? data : []);\r\n      } catch (e) {\r\n        setError(e.message || 'Failed to load reviews');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchReviews();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ maxWidth: 900, margin: '0 auto', padding: '1.5rem 0' }}>\r\n      <h2 style={{ color: '#1a2236', marginBottom: 24 }}>Customer Ratings & Reviews</h2>\r\n      {loading && <div style={{ color: '#1a2236' }}>Loading reviews…</div>}\r\n      {error && <div style={{ color: 'crimson', fontWeight: 600 }}>{error}</div>}\r\n      {!loading && !error && reviews.length === 0 && (\r\n        <div style={{ color: '#8a8fa3', fontSize: 16 }}>No reviews yet.</div>\r\n      )}\r\n      <div style={{ display: 'grid', gap: 24 }}>\r\n        {reviews.map((r, i) => (\r\n          <div key={r._id || i} style={{\r\n            background: '#fff',\r\n            borderRadius: 12,\r\n            boxShadow: '0 2px 12px #0001',\r\n            padding: '1.25rem 1.5rem',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: 8,\r\n            borderLeft: `6px solid ${getRatingColor(r.rating)}`\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 18 }}>\r\n              <ItemImage item={r.menuItem} />\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                <span style={{ color: '#1a2236', fontWeight: 600, fontSize: 17 }}>{r.menuItem?.name || ''}</span>\r\n                <span style={{ fontSize: 22, fontWeight: 700, color: getRatingColor(r.rating) }}>{renderStars(r.rating)}</span>\r\n              </div>\r\n              <span style={{ color: '#8a8fa3', fontSize: 14, marginLeft: 'auto' }}>{formatDateTime(r.createdAt)}</span>\r\n            </div>\r\n            {r.comment && <div style={{ color: '#2d3a58', fontSize: 16 }}>{r.comment}</div>}\r\n            <div style={{ color: '#8a8fa3', fontSize: 13 }}>\r\n              {r.orderId?.clientName && <span>By {r.orderId.clientName}</span>}\r\n              {r.orderId?._id && <span style={{ marginLeft: 8, color: '#b0b4c3' }}>Order #{String(r.orderId._id).slice(-6).toUpperCase()}</span>}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction ItemImage({ item }) {\r\n  // Use item.image or item.photo if available, else fallback to a placeholder\r\n  const src = item?.image || item?.photo || 'https://via.placeholder.com/64x64?text=No+Image';\r\n  return (\r\n    <img\r\n      src={src}\r\n      alt={item?.name || 'Menu Item'}\r\n      style={{ width: 64, height: 64, objectFit: 'cover', borderRadius: 8, background: '#f0f0f0', marginRight: 8 }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction renderStars(rating) {\r\n  const n = Math.round(Number(rating) || 0);\r\n  return '★'.repeat(n) + '☆'.repeat(5 - n);\r\n}\r\n\r\nfunction getRatingColor(rating) {\r\n  const n = Math.round(Number(rating) || 0);\r\n  if (n >= 5) return '#1a8f3c';\r\n  if (n >= 4) return '#4caf50';\r\n  if (n >= 3) return '#ffb300';\r\n  if (n >= 2) return '#ff7043';\r\n  return '#e53935';\r\n}\r\n\r\nfunction formatDateTime(iso) {\r\n  try {\r\n    const d = new Date(iso);\r\n    return d.toLocaleString();\r\n  } catch {\r\n    return iso;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}