{"ast":null,"code":"import _objectSpread from\"C:/Floki/web-hotel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from'react';import{HotelAPI}from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ItemCard(_ref){let{item,onEdit,onDelete,onOffer,index}=_ref;const hasOffer=!!item.offerActive&&Number(item.offerPercent||0)>0;const discounted=hasOffer?Number(item.price||0)*(1-Number(item.offerPercent||0)/100):null;return/*#__PURE__*/_jsxs(\"li\",{style:{background:'#f7f7fa',borderRadius:12,padding:20,boxShadow:'0 1px 8px #0001',display:'flex',alignItems:'center',minHeight:120,flexDirection:'column',listStyle:'none',maxWidth:420,width:'100%',justifySelf:'center'},children:[item.category==='Foods'&&item.image&&/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',marginBottom:10},children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,style:{width:'100%',maxHeight:160,objectFit:'cover',borderRadius:8}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8,marginBottom:8,width:'100%',justifyContent:'space-between'},children:[index&&/*#__PURE__*/_jsx(\"span\",{style:{background:'#1a2236',color:'#fff',borderRadius:999,width:28,height:28,display:'flex',alignItems:'center',justifyContent:'center',fontWeight:600,fontSize:12},children:index}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20},children:item.name})]}),item.category==='Foods'&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#555',marginBottom:6},children:item.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:10},children:[!hasOffer?/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#ffb300',fontSize:17},children:[\"Ksh \",Number(item.price||0).toFixed(2)]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textDecoration:'line-through',color:'#6a708a',fontSize:15},children:[\"Ksh \",Number(item.price||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,color:'#1a2236',fontSize:18},children:[\"Ksh \",Number(discounted||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffefe0',color:'#b85600',borderRadius:999,padding:'2px 8px',fontSize:12},children:[Number(item.offerPercent||0),\"% OFF\"]})]}),item.category==='Foods'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 8px',borderRadius:999,background:item.available?'#ddf6e5':'#ffe9e6',color:item.available?'#1c7d42':'#b23b2e',fontSize:12},children:item.available?'Available':'Unavailable'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEdit(item),style:{background:'#1a2236',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOffer(item),style:{background:'#ffb300',color:'#1a2236',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Offer\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(item),style:{background:'#b23b2e',color:'#fff',border:'none',borderRadius:6,padding:'8px 18px',fontWeight:600,cursor:'pointer'},children:\"Delete\"})]})]});}function Editor(_ref2){let{initial,onSave,onCancel,creating,isFoods,currentType}=_ref2;const[form,setForm]=useState(()=>initial?_objectSpread({category:initial.category||'Foods',type:initial.type||'Breakfast',ingredients:Array.isArray(initial.ingredients)?initial.ingredients:[]},initial):{name:'',description:'',price:'',available:true,image:'',category:'Foods',type:'Breakfast',ingredients:[]});const fileInputRef=useRef(null);function update(k,v){setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[k]:v}));}function handlePickImage(){if(fileInputRef.current)fileInputRef.current.click();}function handleFileChange(e){const file=e.target.files&&e.target.files[0];if(!file)return;if(!file.type.startsWith('image/')){alert('Please select an image file.');return;}const reader=new FileReader();reader.onload=ev=>{update('image',ev.target.result);};reader.onerror=()=>alert('Failed to read image file.');reader.readAsDataURL(file);}async function submit(e){e.preventDefault();const payload=_objectSpread(_objectSpread({},form),{},{price:Number(form.price||0)});if(isFoods){payload.ingredients=(Array.isArray(payload.ingredients)?payload.ingredients:[]).map(s=>String(s||'').trim()).filter(Boolean);}try{await onSave(payload);}catch(err){alert(err&&err.message||'Failed to save item. Is the backend running on port 5000?');}}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'grid',gap:12},children:[isFoods&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{onClick:handlePickImage,role:\"button\",\"aria-label\":\"Add image\",title:\"Add image\",style:{width:140,height:140,borderRadius:12,background:'#e6e9f2',overflow:'hidden',position:'relative',cursor:'pointer',boxShadow:'inset 0 0 0 2px #d6dae6'},children:form.image?/*#__PURE__*/_jsx(\"img\",{src:form.image,alt:\"Item\",style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',width:'100%',height:'100%',color:'#1a2236'},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:42,fontWeight:800},children:\"+\"})})})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",onChange:handleFileChange,style:{display:'none'}})]}),isFoods&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Ingredients (one per line)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:(form.ingredients||[]).join('\\n'),onChange:e=>{const raw=e.target.value;const arr=raw.split(/\\n/);update('ingredients',arr);},rows:5,style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'}}),(form.ingredients||[]).length>0&&/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:8,paddingLeft:18},children:(form.ingredients||[]).map((ing,i)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'#1a2236'},children:ing},i))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Item\"}),/*#__PURE__*/_jsx(\"input\",{value:form.name,onChange:e=>update('name',e.target.value),required:true,style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'}})]}),isFoods&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.description,onChange:e=>update('description',e.target.value),rows:3,style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:form.price,onChange:e=>update('price',e.target.value),required:true,style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'}})]}),isFoods&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Available\"}),/*#__PURE__*/_jsxs(\"select\",{value:String(form.available),onChange:e=>update('available',e.target.value==='true'),style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"No\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,style:{padding:'8px 14px',borderRadius:8,border:'1px solid #dfe3ee',background:'#fff'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:'8px 14px',borderRadius:8,border:'none',background:'#1a2236',color:'#fff'},children:\"Save\"})]})]});}export default function MenuPage(){const categories=['Foods','Utilities','Condiments','Packaging'];const[selectedCategory,setSelectedCategory]=useState('Foods');const types=['Breakfast','Brunch','Lunch','Dinner','Supper','Specials'];const[selectedType,setSelectedType]=useState('Breakfast');const[specialsType,setSpecialsType]=useState('all');const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[editing,setEditing]=useState(null);const[creating,setCreating]=useState(false);const[offerEditing,setOfferEditing]=useState(null);const[offerPercent,setOfferPercent]=useState('');const[offerActive,setOfferActive]=useState(true);const[query,setQuery]=useState('');async function load(){setLoading(true);setError('');try{const data=await HotelAPI.listMenu();setItems(data);}catch(e){setError(e.message||'Failed to load menu');}finally{setLoading(false);}}useEffect(()=>{load();},[]);async function handleSave(payload){if(!payload.category)payload.category=selectedCategory;if(payload.category==='Foods'&&!payload.type)payload.type=selectedType;// Remove Foods-only fields when saving non-Foods items\nif(payload.category!=='Foods'){['type','ingredients','image','description','available'].forEach(k=>{if(k in payload)delete payload[k];});}if(editing){const updated=await HotelAPI.updateMenuItem(editing._id,payload);setItems(prev=>prev.map(i=>i._id===updated._id?updated:i));setEditing(null);}else{const created=await HotelAPI.createMenuItem(payload);setItems(prev=>[created,...prev]);setCreating(false);}}async function handleDelete(item){if(!window.confirm(\"Delete \".concat(item.name,\"?\")))return;await HotelAPI.deleteMenuItem(item._id);setItems(prev=>prev.filter(i=>i._id!==item._id));}function handleOfferOpen(item){setOfferEditing(item);setOfferPercent(String(item.offerPercent!=null?item.offerPercent:''));setOfferActive(!!item.offerActive);}async function handleOfferSave(){if(!offerEditing)return;const val=offerPercent===''?null:Number(offerPercent);const updated=await HotelAPI.updateMenuItem(offerEditing._id,{offerPercent:val,offerActive});setItems(prev=>prev.map(i=>i._id===updated._id?updated:i));setOfferEditing(null);}async function handleOfferDisable(){if(!offerEditing)return;const updated=await HotelAPI.updateMenuItem(offerEditing._id,{offerPercent:null,offerActive:false});setItems(prev=>prev.map(i=>i._id===updated._id?updated:i));setOfferEditing(null);}// No client-side seeding; Specials come from backend items\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,marginBottom:12},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'#1a2236'},children:\"Menu\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'auto',display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Search items\\u2026\",value:query,onChange:e=>setQuery(e.target.value),style:{padding:'8px 12px',borderRadius:8,border:'1px solid #e1e4ee',minWidth:220}}),!creating&&!editing&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCreating(true),style:{padding:'8px 14px',borderRadius:8,border:'none',background:'#1a2236',color:'#fff'},children:[\"Add \",selectedCategory==='Foods'?selectedType:selectedCategory,\" Item\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:load,style:{padding:'8px 14px',borderRadius:8,border:'1px solid #dfe3ee',background:'#fff'},children:\"Refresh\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,marginBottom:16},children:categories.map(cat=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedCategory(cat);},style:{padding:'8px 14px',borderRadius:999,border:selectedCategory===cat?'none':'1px solid #dfe3ee',background:selectedCategory===cat?'#1a2236':'#fff',color:selectedCategory===cat?'#fff':'#1a2236',fontWeight:600},children:cat},cat))}),selectedCategory==='Foods'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,marginBottom:16,flexWrap:'wrap'},children:types.map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedType(t),style:{padding:'6px 12px',borderRadius:999,border:selectedType===t?'none':'1px solid #dfe3ee',background:selectedType===t?'#ffb300':'#fff',color:selectedType===t?'#1a2236':'#1a2236',fontWeight:600},children:t},t))}),selectedCategory==='Foods'&&selectedType==='Specials'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,marginBottom:16,flexWrap:'wrap'},children:['all','chef','day','vegan','vegetarian'].map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpecialsType(t),style:{padding:'6px 12px',borderRadius:999,border:specialsType===t?'none':'1px solid #dfe3ee',background:specialsType===t?'#ffb300':'#fff',color:'#1a2236',fontWeight:600},children:t==='all'?'All':t==='chef'?\"Chef's Special\":t==='day'?\"Day's Special\":t.charAt(0).toUpperCase()+t.slice(1)},t))}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson'},children:error}),(creating||editing)&&/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e8ebf4',borderRadius:12,padding:16,marginBottom:16,background:'#fafbfe'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,marginBottom:8},children:editing?'Edit Item':'New Item'}),/*#__PURE__*/_jsx(Editor,{creating:!editing&&creating,isFoods:selectedCategory==='Foods',currentType:selectedType,initial:editing||(creating?{category:selectedCategory,type:selectedCategory==='Foods'?selectedType:undefined}:undefined),onSave:handleSave,onCancel:()=>{setCreating(false);setEditing(null);}})]}),offerEditing&&/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e8ebf4',borderRadius:12,padding:16,marginBottom:16,background:'#fff7e6'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,marginBottom:8},children:[\"Set Offer for \",offerEditing.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:10},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:12,color:'#6a708a'},children:\"Percent Off\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"100\",step:\"0.01\",value:offerPercent,onChange:e=>setOfferPercent(e.target.value),style:{width:'100%',padding:10,borderRadius:8,border:'1px solid #e1e4ee'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{id:\"offer-active\",type:\"checkbox\",checked:offerActive,onChange:e=>setOfferActive(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"offer-active\",children:\"Offer Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setOfferEditing(null),style:{padding:'8px 14px',borderRadius:8,border:'1px solid #dfe3ee',background:'#fff'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleOfferDisable,style:{padding:'8px 14px',borderRadius:8,border:'none',background:'#b23b2e',color:'#fff'},children:\"Disable\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleOfferSave,style:{padding:'8px 14px',borderRadius:8,border:'none',background:'#ffb300',color:'#1a2236'},children:\"Save Offer\"})]})]})]}),selectedCategory!=='Foods'&&/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',justifyItems:'center',gap:20,width:'100%'},children:items.filter(item=>(item.category||'Foods')===selectedCategory).filter(item=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[item.name,item.description,item.category,item.type,String(item.price)].concat(Array.isArray(item.ingredients)?item.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).map((item,idx)=>/*#__PURE__*/_jsx(ItemCard,{item:item,onEdit:setEditing,onDelete:handleDelete,onOffer:handleOfferOpen,index:idx+1},item._id))}),selectedCategory==='Foods'&&selectedType!=='Specials'&&/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',justifyItems:'center',gap:20,width:'100%'},children:items.filter(item=>(item.category||'Foods')==='Foods').filter(item=>{const it=item.type||'Breakfast';return it===selectedType;}).filter(item=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[item.name,item.description,item.category,item.type,String(item.price)].concat(Array.isArray(item.ingredients)?item.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).map((item,idx)=>/*#__PURE__*/_jsx(ItemCard,{item:item,onEdit:setEditing,onDelete:handleDelete,onOffer:handleOfferOpen,index:idx+1},item._id))}),selectedCategory==='Foods'&&selectedType==='Specials'&&/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,margin:0,display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',justifyItems:'center',gap:20,width:'100%'},children:items.filter(i=>(i.category||'')==='Foods'&&(i.type||'')==='Specials').filter(i=>{// Optional sub-filter by specialsType using simple heuristics on name/description\nconst text=\"\".concat(i.name||'',\" \").concat(i.description||'').toLowerCase();if(specialsType==='all')return true;if(specialsType==='chef')return text.includes('chef');if(specialsType==='day')return text.includes('day');if(specialsType==='vegan')return text.includes('vegan');if(specialsType==='vegetarian')return text.includes('vegetarian');return true;}).filter(i=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[i.name,i.description,i.category,i.type,String(i.price)].concat(Array.isArray(i.ingredients)?i.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).map((item,idx)=>/*#__PURE__*/_jsx(ItemCard,{item:item,onEdit:setEditing,onDelete:handleDelete,onOffer:handleOfferOpen,index:idx+1},item._id))}),!loading&&selectedCategory!=='Foods'&&items.filter(item=>(item.category||'Foods')===selectedCategory).filter(item=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[item.name,item.description,item.category,item.type,String(item.price)].concat(Array.isArray(item.ingredients)?item.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No menu items yet.\"}),selectedCategory==='Foods'&&selectedType==='Specials'&&items.filter(i=>(i.category||'')==='Foods'&&(i.type||'')==='Specials').filter(i=>{const text=\"\".concat(i.name||'',\" \").concat(i.description||'').toLowerCase();if(specialsType==='all')return true;if(specialsType==='chef')return text.includes('chef');if(specialsType==='day')return text.includes('day');if(specialsType==='vegan')return text.includes('vegan');if(specialsType==='vegetarian')return text.includes('vegetarian');return true;}).filter(i=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[i.name,i.description,i.category,i.type,String(i.price)].concat(Array.isArray(i.ingredients)?i.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No specials yet.\"}),selectedCategory==='Foods'&&selectedType!=='Specials'&&items.filter(item=>(item.category||'Foods')==='Foods').filter(item=>{const it=item.type||'Breakfast';return it===selectedType;}).filter(item=>{const q=query.trim().toLowerCase();if(!q)return true;const fields=[item.name,item.description,item.category,item.type,String(item.price)].concat(Array.isArray(item.ingredients)?item.ingredients:[]);return fields.filter(Boolean).some(f=>String(f).toLowerCase().includes(q));}).length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No menu items yet.\"})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","HotelAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ItemCard","_ref","item","onEdit","onDelete","onOffer","index","hasOffer","offerActive","Number","offerPercent","discounted","price","style","background","borderRadius","padding","boxShadow","display","alignItems","minHeight","flexDirection","listStyle","maxWidth","width","justifySelf","children","category","image","marginBottom","src","alt","name","maxHeight","objectFit","gap","justifyContent","color","height","fontWeight","fontSize","description","toFixed","textDecoration","available","marginTop","onClick","border","cursor","Editor","_ref2","initial","onSave","onCancel","creating","isFoods","currentType","form","setForm","_objectSpread","type","ingredients","Array","isArray","fileInputRef","update","k","v","prev","handlePickImage","current","click","handleFileChange","e","file","target","files","startsWith","alert","reader","FileReader","onload","ev","result","onerror","readAsDataURL","submit","preventDefault","payload","map","s","String","trim","filter","Boolean","err","message","onSubmit","role","title","overflow","position","ref","accept","onChange","value","join","raw","arr","split","rows","length","paddingLeft","ing","i","required","step","min","MenuPage","categories","selectedCategory","setSelectedCategory","types","selectedType","setSelectedType","specialsType","setSpecialsType","items","setItems","loading","setLoading","error","setError","editing","setEditing","setCreating","offerEditing","setOfferEditing","setOfferPercent","setOfferActive","query","setQuery","load","data","listMenu","handleSave","forEach","updated","updateMenuItem","_id","created","createMenuItem","handleDelete","window","confirm","concat","deleteMenuItem","handleOfferOpen","handleOfferSave","val","handleOfferDisable","margin","marginLeft","placeholder","minWidth","cat","flexWrap","t","charAt","toUpperCase","slice","undefined","max","id","checked","htmlFor","gridTemplateColumns","justifyItems","q","toLowerCase","fields","some","f","includes","idx","it","text"],"sources":["C:/Floki/web-hotel/src/pages/MenuPage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { HotelAPI } from '../api';\r\n\r\nfunction ItemCard({ item, onEdit, onDelete, onOffer, index }) {\r\n  const hasOffer = !!item.offerActive && Number(item.offerPercent || 0) > 0;\r\n  const discounted = hasOffer ? Number(item.price || 0) * (1 - Number(item.offerPercent || 0) / 100) : null;\r\n  return (\r\n    <li style={{\r\n      background: '#f7f7fa',\r\n      borderRadius: 12,\r\n      padding: 20,\r\n      boxShadow: '0 1px 8px #0001',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      minHeight: 120,\r\n      flexDirection: 'column',\r\n      listStyle: 'none',\r\n      maxWidth: 420,\r\n      width: '100%',\r\n      justifySelf: 'center'\r\n    }}>\r\n      {item.category === 'Foods' && item.image && (\r\n        <div style={{ width: '100%', marginBottom: 10 }}>\r\n          <img src={item.image} alt={item.name} style={{ width: '100%', maxHeight: 160, objectFit: 'cover', borderRadius: 8 }} />\r\n        </div>\r\n      )}\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8, width: '100%', justifyContent: 'space-between' }}>\r\n        {index && (\r\n          <span style={{ background: '#1a2236', color: '#fff', borderRadius: 999, width: 28, height: 28, display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 600, fontSize: 12 }}>{index}</span>\r\n        )}\r\n        <div style={{ fontWeight: 700, fontSize: 20 }}>{item.name}</div>\r\n      </div>\r\n      {item.category === 'Foods' && (\r\n        <div style={{ color: '#555', marginBottom: 6 }}>{item.description}</div>\r\n      )}\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>\r\n        {!hasOffer ? (\r\n          <div style={{ fontWeight: 600, color: '#ffb300', fontSize: 17 }}>Ksh {Number(item.price || 0).toFixed(2)}</div>\r\n        ) : (\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n            <div style={{ textDecoration: 'line-through', color: '#6a708a', fontSize: 15 }}>Ksh {Number(item.price || 0).toFixed(2)}</div>\r\n            <div style={{ fontWeight: 700, color: '#1a2236', fontSize: 18 }}>Ksh {Number(discounted || 0).toFixed(2)}</div>\r\n            <span style={{ background: '#ffefe0', color: '#b85600', borderRadius: 999, padding: '2px 8px', fontSize: 12 }}>{Number(item.offerPercent || 0)}% OFF</span>\r\n          </div>\r\n        )}\r\n        {item.category === 'Foods' && (\r\n          <span style={{ padding: '2px 8px', borderRadius: 999, background: item.available ? '#ddf6e5' : '#ffe9e6', color: item.available ? '#1c7d42' : '#b23b2e', fontSize: 12 }}>\r\n            {item.available ? 'Available' : 'Unavailable'}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\r\n        <button onClick={() => onEdit(item)} style={{ background: '#1a2236', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Edit</button>\r\n        <button onClick={() => onOffer(item)} style={{ background: '#ffb300', color: '#1a2236', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Offer</button>\r\n        <button onClick={() => onDelete(item)} style={{ background: '#b23b2e', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Delete</button>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nfunction Editor({ initial, onSave, onCancel, creating, isFoods, currentType }) {\r\n  const [form, setForm] = useState(() => initial ? { category: initial.category || 'Foods', type: initial.type || 'Breakfast', ingredients: Array.isArray(initial.ingredients) ? initial.ingredients : [], ...initial } : { name: '', description: '', price: '', available: true, image: '', category: 'Foods', type: 'Breakfast', ingredients: [] });\r\n  const fileInputRef = useRef(null);\r\n  function update(k, v) { setForm(prev => ({ ...prev, [k]: v })); }\r\n  function handlePickImage() {\r\n    if (fileInputRef.current) fileInputRef.current.click();\r\n  }\r\n  function handleFileChange(e) {\r\n    const file = e.target.files && e.target.files[0];\r\n    if (!file) return;\r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please select an image file.');\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = (ev) => {\r\n      update('image', ev.target.result);\r\n    };\r\n    reader.onerror = () => alert('Failed to read image file.');\r\n    reader.readAsDataURL(file);\r\n  }\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n    const payload = { ...form, price: Number(form.price || 0) };\r\n    if (isFoods) {\r\n      payload.ingredients = (Array.isArray(payload.ingredients) ? payload.ingredients : [])\r\n        .map(s => String(s || '').trim())\r\n        .filter(Boolean);\r\n    }\r\n    try {\r\n      await onSave(payload);\r\n    } catch (err) {\r\n      alert((err && err.message) || 'Failed to save item. Is the backend running on port 5000?');\r\n    }\r\n  }\r\n  return (\r\n    <form onSubmit={submit} style={{ display: 'grid', gap: 12 }}>\r\n      {/* Image placeholder only for Foods */}\r\n      {isFoods && (\r\n        <>\r\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n            <div onClick={handlePickImage} role=\"button\" aria-label=\"Add image\" title=\"Add image\"\r\n                 style={{ width: 140, height: 140, borderRadius: 12, background: '#e6e9f2', overflow: 'hidden', position: 'relative', cursor: 'pointer', boxShadow: 'inset 0 0 0 2px #d6dae6' }}>\r\n              {form.image ? (\r\n                <img src={form.image} alt=\"Item\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n              ) : (\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', width: '100%', height: '100%', color: '#1a2236' }}>\r\n                  <span style={{ fontSize: 42, fontWeight: 800 }}>+</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <input ref={fileInputRef} type=\"file\" accept=\"image/*\" onChange={handleFileChange} style={{ display: 'none' }} />\r\n        </>\r\n      )}\r\n      {/* No Type selector in Foods editor; type comes from sub-sub menu */}\r\n      {isFoods && (\r\n        <div>\r\n          <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Ingredients (one per line)</label>\r\n          <textarea\r\n            value={(form.ingredients || []).join('\\n')}\r\n            onChange={e => {\r\n              const raw = e.target.value;\r\n              const arr = raw.split(/\\n/);\r\n              update('ingredients', arr);\r\n            }}\r\n            rows={5}\r\n            style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }}\r\n          />\r\n          {(form.ingredients || []).length > 0 && (\r\n            <ul style={{ marginTop: 8, paddingLeft: 18 }}>\r\n              {(form.ingredients || []).map((ing, i) => (\r\n                <li key={i} style={{ color: '#1a2236' }}>{ing}</li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      )}\r\n      {/* No Category/Type controls in editor; context comes from tabs */}\r\n      <div>\r\n        <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Item</label>\r\n        <input value={form.name} onChange={e => update('name', e.target.value)} required style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }} />\r\n      </div>\r\n      {isFoods && (\r\n        <div>\r\n          <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Description</label>\r\n          <textarea value={form.description} onChange={e => update('description', e.target.value)} rows={3} style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }} />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Price</label>\r\n        <input type=\"number\" step=\"0.01\" min=\"0\" value={form.price} onChange={e => update('price', e.target.value)} required style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }} />\r\n      </div>\r\n      {isFoods && (\r\n        <div>\r\n          <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Available</label>\r\n          <select value={String(form.available)} onChange={e => update('available', e.target.value === 'true')} style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }}>\r\n            <option value=\"true\">Yes</option>\r\n            <option value=\"false\">No</option>\r\n          </select>\r\n        </div>\r\n      )}\r\n      <div style={{ display: 'flex', gap: 8, justifyContent: 'flex-end' }}>\r\n        <button type=\"button\" onClick={onCancel} style={{ padding: '8px 14px', borderRadius: 8, border: '1px solid #dfe3ee', background: '#fff' }}>Cancel</button>\r\n        <button type=\"submit\" style={{ padding: '8px 14px', borderRadius: 8, border: 'none', background: '#1a2236', color: '#fff' }}>Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default function MenuPage() {\r\n  const categories = ['Foods', 'Utilities', 'Condiments', 'Packaging'];\r\n  const [selectedCategory, setSelectedCategory] = useState('Foods');\r\n  const types = ['Breakfast', 'Brunch', 'Lunch', 'Dinner', 'Supper', 'Specials'];\r\n  const [selectedType, setSelectedType] = useState('Breakfast');\r\n  const [specialsType, setSpecialsType] = useState('all');\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [editing, setEditing] = useState(null);\r\n  const [creating, setCreating] = useState(false);\r\n  const [offerEditing, setOfferEditing] = useState(null);\r\n  const [offerPercent, setOfferPercent] = useState('');\r\n  const [offerActive, setOfferActive] = useState(true);\r\n  const [query, setQuery] = useState('');\r\n\r\n\r\n  async function load() {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const data = await HotelAPI.listMenu();\r\n      setItems(data);\r\n    } catch (e) {\r\n      setError(e.message || 'Failed to load menu');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  async function handleSave(payload) {\r\n    if (!payload.category) payload.category = selectedCategory;\r\n    if (payload.category === 'Foods' && !payload.type) payload.type = selectedType;\r\n    // Remove Foods-only fields when saving non-Foods items\r\n    if (payload.category !== 'Foods') {\r\n      ['type', 'ingredients', 'image', 'description', 'available'].forEach(k => {\r\n        if (k in payload) delete payload[k];\r\n      });\r\n    }\r\n    if (editing) {\r\n      const updated = await HotelAPI.updateMenuItem(editing._id, payload);\r\n      setItems(prev => prev.map(i => (i._id === updated._id ? updated : i)));\r\n      setEditing(null);\r\n    } else {\r\n      const created = await HotelAPI.createMenuItem(payload);\r\n      setItems(prev => [created, ...prev]);\r\n      setCreating(false);\r\n    }\r\n  }\r\n\r\n  async function handleDelete(item) {\r\n    if (!window.confirm(`Delete ${item.name}?`)) return;\r\n    await HotelAPI.deleteMenuItem(item._id);\r\n    setItems(prev => prev.filter(i => i._id !== item._id));\r\n  }\r\n\r\n  function handleOfferOpen(item) {\r\n    setOfferEditing(item);\r\n    setOfferPercent(String(item.offerPercent != null ? item.offerPercent : ''));\r\n    setOfferActive(!!item.offerActive);\r\n  }\r\n\r\n  async function handleOfferSave() {\r\n    if (!offerEditing) return;\r\n    const val = offerPercent === '' ? null : Number(offerPercent);\r\n    const updated = await HotelAPI.updateMenuItem(offerEditing._id, { offerPercent: val, offerActive });\r\n    setItems(prev => prev.map(i => (i._id === updated._id ? updated : i)));\r\n    setOfferEditing(null);\r\n  }\r\n\r\n  async function handleOfferDisable() {\r\n    if (!offerEditing) return;\r\n    const updated = await HotelAPI.updateMenuItem(offerEditing._id, { offerPercent: null, offerActive: false });\r\n    setItems(prev => prev.map(i => (i._id === updated._id ? updated : i)));\r\n    setOfferEditing(null);\r\n  }\r\n\r\n  // No client-side seeding; Specials come from backend items\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 12 }}>\r\n        <h2 style={{ margin: 0, color: '#1a2236' }}>Menu</h2>\r\n        <div style={{ marginLeft: 'auto', display: 'flex', gap: 8, alignItems: 'center' }}>\r\n          <input\r\n            type=\"search\"\r\n            placeholder=\"Search items…\"\r\n            value={query}\r\n            onChange={e => setQuery(e.target.value)}\r\n            style={{ padding: '8px 12px', borderRadius: 8, border: '1px solid #e1e4ee', minWidth: 220 }}\r\n          />\r\n          {!creating && !editing && (\r\n            <button\r\n              onClick={() => setCreating(true)}\r\n              style={{ padding: '8px 14px', borderRadius: 8, border: 'none', background: '#1a2236', color: '#fff' }}\r\n            >\r\n              Add {selectedCategory === 'Foods' ? selectedType : selectedCategory} Item\r\n            </button>\r\n          )}\r\n          <button onClick={load} style={{ padding: '8px 14px', borderRadius: 8, border: '1px solid #dfe3ee', background: '#fff' }}>Refresh</button>\r\n        </div>\r\n      </div>\r\n      {/* Submenu tabs */}\r\n      <div style={{ display: 'flex', gap: 8, marginBottom: 16 }}>\r\n        {categories.map(cat => (\r\n          <button key={cat} onClick={() => { setSelectedCategory(cat); }}\r\n                  style={{ padding: '8px 14px', borderRadius: 999, border: selectedCategory === cat ? 'none' : '1px solid #dfe3ee', background: selectedCategory === cat ? '#1a2236' : '#fff', color: selectedCategory === cat ? '#fff' : '#1a2236', fontWeight: 600 }}>\r\n            {cat}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      {/* Sub-sub menus for Foods */}\r\n      {selectedCategory === 'Foods' && (\r\n        <div style={{ display: 'flex', gap: 8, marginBottom: 16, flexWrap: 'wrap' }}>\r\n          {types.map(t => (\r\n            <button key={t} onClick={() => setSelectedType(t)}\r\n                    style={{ padding: '6px 12px', borderRadius: 999, border: selectedType === t ? 'none' : '1px solid #dfe3ee', background: selectedType === t ? '#ffb300' : '#fff', color: selectedType === t ? '#1a2236' : '#1a2236', fontWeight: 600 }}>\r\n              {t}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {/* Sub-sub menus for Specials under Foods */}\r\n      {selectedCategory === 'Foods' && selectedType === 'Specials' && (\r\n        <div style={{ display: 'flex', gap: 8, marginBottom: 16, flexWrap: 'wrap' }}>\r\n          {['all', 'chef', 'day', 'vegan', 'vegetarian'].map(t => (\r\n            <button key={t} onClick={() => setSpecialsType(t)}\r\n                    style={{ padding: '6px 12px', borderRadius: 999, border: specialsType === t ? 'none' : '1px solid #dfe3ee', background: specialsType === t ? '#ffb300' : '#fff', color: '#1a2236', fontWeight: 600 }}>\r\n              {t === 'all' ? 'All' : t === 'chef' ? \"Chef's Special\" : t === 'day' ? \"Day's Special\" : t.charAt(0).toUpperCase() + t.slice(1)}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {loading && <div>Loading…</div>}\r\n      {error && <div style={{ color: 'crimson' }}>{error}</div>}\r\n\r\n      {(creating || editing) && (\r\n        <div style={{ border: '1px solid #e8ebf4', borderRadius: 12, padding: 16, marginBottom: 16, background: '#fafbfe' }}>\r\n          <div style={{ fontWeight: 700, marginBottom: 8 }}>{editing ? 'Edit Item' : 'New Item'}</div>\r\n          <Editor\r\n            creating={!editing && creating}\r\n            isFoods={selectedCategory === 'Foods'}\r\n            currentType={selectedType}\r\n            initial={editing || (creating ? { category: selectedCategory, type: selectedCategory === 'Foods' ? selectedType : undefined } : undefined)}\r\n            onSave={handleSave}\r\n            onCancel={() => { setCreating(false); setEditing(null); }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {offerEditing && (\r\n        <div style={{ border: '1px solid #e8ebf4', borderRadius: 12, padding: 16, marginBottom: 16, background: '#fff7e6' }}>\r\n          <div style={{ fontWeight: 700, marginBottom: 8 }}>Set Offer for {offerEditing.name}</div>\r\n          <div style={{ display: 'grid', gap: 10 }}>\r\n            <div>\r\n              <label style={{ display: 'block', fontSize: 12, color: '#6a708a' }}>Percent Off</label>\r\n              <input type=\"number\" min=\"0\" max=\"100\" step=\"0.01\" value={offerPercent}\r\n                     onChange={e => setOfferPercent(e.target.value)}\r\n                     style={{ width: '100%', padding: 10, borderRadius: 8, border: '1px solid #e1e4ee' }} />\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n              <input id=\"offer-active\" type=\"checkbox\" checked={offerActive} onChange={e => setOfferActive(e.target.checked)} />\r\n              <label htmlFor=\"offer-active\">Offer Active</label>\r\n            </div>\r\n            <div style={{ display: 'flex', gap: 8, justifyContent: 'flex-end' }}>\r\n              <button type=\"button\" onClick={() => setOfferEditing(null)} style={{ padding: '8px 14px', borderRadius: 8, border: '1px solid #dfe3ee', background: '#fff' }}>Cancel</button>\r\n              <button type=\"button\" onClick={handleOfferDisable} style={{ padding: '8px 14px', borderRadius: 8, border: 'none', background: '#b23b2e', color: '#fff' }}>Disable</button>\r\n              <button type=\"button\" onClick={handleOfferSave} style={{ padding: '8px 14px', borderRadius: 8, border: 'none', background: '#ffb300', color: '#1a2236' }}>Save Offer</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Items list for non-Foods categories */}\r\n      {selectedCategory !== 'Foods' && (\r\n      <ul style={{\r\n        listStyle: 'none',\r\n        padding: 0,\r\n        margin: 0,\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n        justifyItems: 'center',\r\n        gap: 20,\r\n        width: '100%',\r\n      }}>\r\n        {items\r\n          .filter(item => (item.category || 'Foods') === selectedCategory)\r\n          .filter(item => {\r\n            const q = query.trim().toLowerCase();\r\n            if (!q) return true;\r\n            const fields = [item.name, item.description, item.category, item.type, String(item.price)]\r\n              .concat(Array.isArray(item.ingredients) ? item.ingredients : []);\r\n            return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n          })\r\n          .map((item, idx) => (\r\n          <ItemCard key={item._id} item={item} onEdit={setEditing} onDelete={handleDelete} onOffer={handleOfferOpen} index={idx + 1} />\r\n        ))}\r\n      </ul>\r\n      )}\r\n\r\n      {/* Items list for Foods standard types (non-Specials) */}\r\n      {selectedCategory === 'Foods' && selectedType !== 'Specials' && (\r\n      <ul style={{\r\n        listStyle: 'none',\r\n        padding: 0,\r\n        margin: 0,\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n        justifyItems: 'center',\r\n        gap: 20,\r\n        width: '100%',\r\n      }}>\r\n        {items\r\n          .filter(item => (item.category || 'Foods') === 'Foods')\r\n          .filter(item => {\r\n            const it = item.type || 'Breakfast';\r\n            return it === selectedType;\r\n          })\r\n          .filter(item => {\r\n            const q = query.trim().toLowerCase();\r\n            if (!q) return true;\r\n            const fields = [item.name, item.description, item.category, item.type, String(item.price)]\r\n              .concat(Array.isArray(item.ingredients) ? item.ingredients : []);\r\n            return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n          })\r\n          .map((item, idx) => (\r\n          <ItemCard key={item._id} item={item} onEdit={setEditing} onDelete={handleDelete} onOffer={handleOfferOpen} index={idx + 1} />\r\n        ))}\r\n      </ul>\r\n      )}\r\n      {/* Specials list under Foods (backend items only) */}\r\n      {selectedCategory === 'Foods' && selectedType === 'Specials' && (\r\n        <ul style={{\r\n          listStyle: 'none',\r\n          padding: 0,\r\n          margin: 0,\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n          justifyItems: 'center',\r\n          gap: 20,\r\n          width: '100%',\r\n        }}>\r\n          {items\r\n            .filter(i => (i.category || '') === 'Foods' && (i.type || '') === 'Specials')\r\n            .filter(i => {\r\n              // Optional sub-filter by specialsType using simple heuristics on name/description\r\n              const text = `${i.name || ''} ${i.description || ''}`.toLowerCase();\r\n              if (specialsType === 'all') return true;\r\n              if (specialsType === 'chef') return text.includes('chef');\r\n              if (specialsType === 'day') return text.includes('day');\r\n              if (specialsType === 'vegan') return text.includes('vegan');\r\n              if (specialsType === 'vegetarian') return text.includes('vegetarian');\r\n              return true;\r\n            })\r\n            .filter(i => {\r\n              const q = query.trim().toLowerCase();\r\n              if (!q) return true;\r\n              const fields = [i.name, i.description, i.category, i.type, String(i.price)]\r\n                .concat(Array.isArray(i.ingredients) ? i.ingredients : []);\r\n              return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n            })\r\n            .map((item, idx) => (\r\n              <ItemCard key={item._id} item={item} onEdit={setEditing} onDelete={handleDelete} onOffer={handleOfferOpen} index={idx + 1} />\r\n            ))}\r\n        </ul>\r\n      )}\r\n      {!loading && selectedCategory !== 'Foods' && items\r\n        .filter(item => (item.category || 'Foods') === selectedCategory)\r\n        .filter(item => {\r\n          const q = query.trim().toLowerCase();\r\n          if (!q) return true;\r\n          const fields = [item.name, item.description, item.category, item.type, String(item.price)]\r\n            .concat(Array.isArray(item.ingredients) ? item.ingredients : []);\r\n          return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n        })\r\n        .length === 0 && <div>No menu items yet.</div>}\r\n      {selectedCategory === 'Foods' && selectedType === 'Specials' && items\r\n        .filter(i => (i.category || '') === 'Foods' && (i.type || '') === 'Specials')\r\n        .filter(i => {\r\n          const text = `${i.name || ''} ${i.description || ''}`.toLowerCase();\r\n          if (specialsType === 'all') return true;\r\n          if (specialsType === 'chef') return text.includes('chef');\r\n          if (specialsType === 'day') return text.includes('day');\r\n          if (specialsType === 'vegan') return text.includes('vegan');\r\n          if (specialsType === 'vegetarian') return text.includes('vegetarian');\r\n          return true;\r\n        })\r\n        .filter(i => {\r\n          const q = query.trim().toLowerCase();\r\n          if (!q) return true;\r\n          const fields = [i.name, i.description, i.category, i.type, String(i.price)]\r\n            .concat(Array.isArray(i.ingredients) ? i.ingredients : []);\r\n          return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n        }).length === 0 && <div>No specials yet.</div>}\r\n      {selectedCategory === 'Foods' && selectedType !== 'Specials' && items\r\n        .filter(item => (item.category || 'Foods') === 'Foods')\r\n        .filter(item => {\r\n          const it = item.type || 'Breakfast';\r\n          return it === selectedType;\r\n        })\r\n        .filter(item => {\r\n          const q = query.trim().toLowerCase();\r\n          if (!q) return true;\r\n          const fields = [item.name, item.description, item.category, item.type, String(item.price)]\r\n            .concat(Array.isArray(item.ingredients) ? item.ingredients : []);\r\n          return fields.filter(Boolean).some(f => String(f).toLowerCase().includes(q));\r\n        }).length === 0 && <div>No menu items yet.</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}