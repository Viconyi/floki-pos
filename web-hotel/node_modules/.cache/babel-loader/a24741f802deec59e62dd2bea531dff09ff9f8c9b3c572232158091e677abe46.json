{"ast":null,"code":"import _objectSpread from\"C:/Floki/web-hotel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const jsonHeaders={'Content-Type':'application/json'};let authToken=null;export function setAuthToken(token){authToken=token||null;}function getAuthToken(){try{if(authToken)return authToken;if(typeof localStorage!=='undefined'){return localStorage.getItem('staffToken');}return null;}catch(_unused){return authToken;}}let errorHandler=null;export function setApiErrorHandler(fn){errorHandler=fn;}const API_BASE=process.env.REACT_APP_API_BASE||'';function resolveUrl(url){if(/^https?:\\/\\//i.test(url))return url;if(!API_BASE)return url;if(url.startsWith('/'))return API_BASE+url;return API_BASE+'/'+url;}async function http(method,url,body){try{const headers=body?_objectSpread({},jsonHeaders):{};const token=getAuthToken();if(token)headers['Authorization']=\"Bearer \".concat(token);const res=await fetch(resolveUrl(url),{method,headers:Object.keys(headers).length?headers:undefined,body:body?JSON.stringify(body):undefined});if(!res.ok){const text=await res.text();const err=new Error(text||\"HTTP \".concat(res.status));if(errorHandler)errorHandler(err,{url,status:res.status});throw err;}if(errorHandler)errorHandler(null,{url,status:res.status});// 204 no content\nif(res.status===204)return null;return res.json();}catch(e){if(errorHandler)errorHandler(e,{url});throw e;}}export const HotelAPI={// Orders\nlistOrders:()=>http('GET','/api/hotel/orders'),updateOrder:(id,payload)=>http('PUT',\"/api/hotel/orders/\".concat(id),payload),createOrder:payload=>http('POST','/api/hotel/orders',payload),// Menu (admin endpoints)\nlistMenu:()=>http('GET','/api/admin/menu'),createMenuItem:payload=>http('POST','/api/admin/menu',payload),updateMenuItem:(id,payload)=>http('PUT',\"/api/admin/menu/\".concat(id),payload),deleteMenuItem:id=>http('DELETE',\"/api/admin/menu/\".concat(id)),// Auth\nlogin:(username,pin)=>http('POST','/api/hotel/auth/login',{username,pin}),logout:()=>http('POST','/api/hotel/auth/logout'),// MPESA QR\ngenerateQR:payload=>http('POST','/api/mpesa/qrcode',payload)};export function formatCurrency(amount){if(typeof amount!=='number')return amount;// Use Kenyan Shillings display as \"Kshs\" per requirements\nconst num=Number.isFinite(amount)?amount:0;return\"Kshs \".concat(num.toLocaleString(undefined,{minimumFractionDigits:0,maximumFractionDigits:2}));}export function formatDateTime(iso){try{const d=new Date(iso);return d.toLocaleString();}catch(_unused2){return iso;}}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}